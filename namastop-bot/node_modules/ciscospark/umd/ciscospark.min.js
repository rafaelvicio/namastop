/*! Cisco Spark SDK v1.47.4 */
var CiscoSpark=function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),i={}.hasOwnProperty,o=function(e,t){return i.call(e,t)},a=function(e){try{return!!e()}catch(e){return!0}},u=!a(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),s=r(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),c=(s.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),l=function(e){if(!c(e))throw TypeError(e+" is not an object!");return e},f=n.document,d=c(f)&&c(f.createElement),p=function(e){return d?f.createElement(e):{}},h=!u&&!a(function(){return 7!=Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a}),v=function(e,t){if(!c(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!c(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!c(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!c(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,m={f:u?Object.defineProperty:function(e,t,r){if(l(e),t=v(t,!0),l(r),h)try{return g(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},y=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},b=u?function(e,t,r){return m.f(e,t,y(1,r))}:function(e,t,r){return e[t]=r,e},_=0,w=Math.random(),S=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++_+w).toString(36))},k=r(function(e){var t=S("src"),r=Function.toString,i=(""+r).split("toString");s.inspectSource=function(e){return r.call(e)},(e.exports=function(e,r,a,u){var s="function"==typeof a;s&&(o(a,"name")||b(a,"name",r)),e[r]!==a&&(s&&(o(a,t)||b(a,t,e[r]?""+e[r]:i.join(String(r)))),e===n?e[r]=a:u?e[r]?e[r]=a:b(e,r,a):(delete e[r],b(e,r,a)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||r.call(this)})}),E=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},T=function(e,t,r){if(E(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},P=function(e,t,r){var i,o,a,u,c=e&P.F,l=e&P.G,f=e&P.S,d=e&P.P,p=e&P.B,h=l?n:f?n[t]||(n[t]={}):(n[t]||{}).prototype,v=l?s:s[t]||(s[t]={}),g=v.prototype||(v.prototype={});for(i in l&&(r=t),r)a=((o=!c&&h&&void 0!==h[i])?h:r)[i],u=p&&o?T(a,n):d&&"function"==typeof a?T(Function.call,a):a,h&&k(h,i,a,e&P.U),v[i]!=a&&b(v,i,u),d&&g[i]!=a&&(g[i]=a)};n.core=s,P.F=1,P.G=2,P.S=4,P.P=8,P.B=16,P.W=32,P.U=64,P.R=128;var O=P,C=r(function(e){var t=S("meta"),r=m.f,n=0,i=Object.isExtensible||function(){return!0},u=!a(function(){return i(Object.preventExtensions({}))}),s=function(e){r(e,t,{value:{i:"O"+ ++n,w:{}}})},l=e.exports={KEY:t,NEED:!1,fastKey:function(e,r){if(!c(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,t)){if(!i(e))return"F";if(!r)return"E";s(e)}return e[t].i},getWeak:function(e,r){if(!o(e,t)){if(!i(e))return!0;if(!r)return!1;s(e)}return e[t].w},onFreeze:function(e){return u&&l.NEED&&i(e)&&!o(e,t)&&s(e),e}}}),M=(C.KEY,C.NEED,C.fastKey,C.getWeak,C.onFreeze,r(function(e){var t=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(e.exports=function(e,r){return t[e]||(t[e]=void 0!==r?r:{})})("versions",[]).push({version:s.version,mode:"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})})),j=r(function(e){var t=M("wks"),r=n.Symbol,i="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=i&&r[e]||(i?r:S)("Symbol."+e))}).store=t}),x=m.f,R=j("toStringTag"),A=function(e,t,r){e&&!o(e=r?e:e.prototype,R)&&x(e,R,{configurable:!0,value:t})},I={f:j},D=m.f,L=function(e){var t=s.Symbol||(s.Symbol=n.Symbol||{});"_"==e.charAt(0)||e in t||D(t,e,{value:I.f(e)})},F={}.toString,N=function(e){return F.call(e).slice(8,-1)},U=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==N(e)?e.split(""):Object(e)},z=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},q=function(e){return U(z(e))},B=Math.ceil,W=Math.floor,V=function(e){return isNaN(e=+e)?0:(e>0?W:B)(e)},G=Math.min,H=function(e){return e>0?G(V(e),9007199254740991):0},J=Math.max,Y=Math.min,$=function(e,t){return(e=V(e))<0?J(e+t,0):Y(e,t)},K=function(e){return function(t,r,n){var i,o=q(t),a=H(o.length),u=$(n,a);if(e&&r!=r){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((e||u in o)&&o[u]===r)return e||u||0;return!e&&-1}},X=M("keys"),Z=function(e){return X[e]||(X[e]=S(e))},Q=K(!1),ee=Z("IE_PROTO"),te=function(e,t){var r,n=q(e),i=0,a=[];for(r in n)r!=ee&&o(n,r)&&a.push(r);for(;t.length>i;)o(n,r=t[i++])&&(~Q(a,r)||a.push(r));return a},re="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ne=Object.keys||function(e){return te(e,re)},ie={f:Object.getOwnPropertySymbols},oe={f:{}.propertyIsEnumerable},ae=Array.isArray||function(e){return"Array"==N(e)},ue=u?Object.defineProperties:function(e,t){l(e);for(var r,n=ne(t),i=n.length,o=0;i>o;)m.f(e,r=n[o++],t[r]);return e},se=n.document,ce=se&&se.documentElement,le=Z("IE_PROTO"),fe=function(){},de=function(){var e,t=p("iframe"),r=re.length;for(t.style.display="none",ce.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),de=e.F;r--;)delete de.prototype[re[r]];return de()},pe=Object.create||function(e,t){var r;return null!==e?(fe.prototype=l(e),r=new fe,fe.prototype=null,r[le]=e):r=de(),void 0===t?r:ue(r,t)},he=re.concat("length","prototype"),ve={f:Object.getOwnPropertyNames||function(e){return te(e,he)}},ge=ve.f,me={}.toString,ye="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],be={f:function(e){return ye&&"[object Window]"==me.call(e)?function(e){try{return ge(e)}catch(e){return ye.slice()}}(e):ge(q(e))}},_e=Object.getOwnPropertyDescriptor,we={f:u?_e:function(e,t){if(e=q(e),t=v(t,!0),h)try{return _e(e,t)}catch(e){}if(o(e,t))return y(!oe.f.call(e,t),e[t])}},Se=C.KEY,ke=we.f,Ee=m.f,Te=be.f,Pe=n.Symbol,Oe=n.JSON,Ce=Oe&&Oe.stringify,Me=j("_hidden"),je=j("toPrimitive"),xe={}.propertyIsEnumerable,Re=M("symbol-registry"),Ae=M("symbols"),Ie=M("op-symbols"),De=Object.prototype,Le="function"==typeof Pe,Fe=n.QObject,Ne=!Fe||!Fe.prototype||!Fe.prototype.findChild,Ue=u&&a(function(){return 7!=pe(Ee({},"a",{get:function(){return Ee(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=ke(De,t);n&&delete De[t],Ee(e,t,r),n&&e!==De&&Ee(De,t,n)}:Ee,ze=function(e){var t=Ae[e]=pe(Pe.prototype);return t._k=e,t},qe=Le&&"symbol"==typeof Pe.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Pe},Be=function(e,t,r){return e===De&&Be(Ie,t,r),l(e),t=v(t,!0),l(r),o(Ae,t)?(r.enumerable?(o(e,Me)&&e[Me][t]&&(e[Me][t]=!1),r=pe(r,{enumerable:y(0,!1)})):(o(e,Me)||Ee(e,Me,y(1,{})),e[Me][t]=!0),Ue(e,t,r)):Ee(e,t,r)},We=function(e,t){l(e);for(var r,n=function(e){var t=ne(e),r=ie.f;if(r)for(var n,i=r(e),o=oe.f,a=0;i.length>a;)o.call(e,n=i[a++])&&t.push(n);return t}(t=q(t)),i=0,o=n.length;o>i;)Be(e,r=n[i++],t[r]);return e},Ve=function(e){var t=xe.call(this,e=v(e,!0));return!(this===De&&o(Ae,e)&&!o(Ie,e))&&(!(t||!o(this,e)||!o(Ae,e)||o(this,Me)&&this[Me][e])||t)},Ge=function(e,t){if(e=q(e),t=v(t,!0),e!==De||!o(Ae,t)||o(Ie,t)){var r=ke(e,t);return!r||!o(Ae,t)||o(e,Me)&&e[Me][t]||(r.enumerable=!0),r}},He=function(e){for(var t,r=Te(q(e)),n=[],i=0;r.length>i;)o(Ae,t=r[i++])||t==Me||t==Se||n.push(t);return n},Je=function(e){for(var t,r=e===De,n=Te(r?Ie:q(e)),i=[],a=0;n.length>a;)!o(Ae,t=n[a++])||r&&!o(De,t)||i.push(Ae[t]);return i};Le||(k((Pe=function(){if(this instanceof Pe)throw TypeError("Symbol is not a constructor!");var e=S(arguments.length>0?arguments[0]:void 0),t=function(r){this===De&&t.call(Ie,r),o(this,Me)&&o(this[Me],e)&&(this[Me][e]=!1),Ue(this,e,y(1,r))};return u&&Ne&&Ue(De,e,{configurable:!0,set:t}),ze(e)}).prototype,"toString",function(){return this._k}),we.f=Ge,m.f=Be,ve.f=be.f=He,oe.f=Ve,ie.f=Je,u&&k(De,"propertyIsEnumerable",Ve,!0),I.f=function(e){return ze(j(e))}),O(O.G+O.W+O.F*!Le,{Symbol:Pe});for(var Ye="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),$e=0;Ye.length>$e;)j(Ye[$e++]);for(var Ke=ne(j.store),Xe=0;Ke.length>Xe;)L(Ke[Xe++]);O(O.S+O.F*!Le,"Symbol",{for:function(e){return o(Re,e+="")?Re[e]:Re[e]=Pe(e)},keyFor:function(e){if(!qe(e))throw TypeError(e+" is not a symbol!");for(var t in Re)if(Re[t]===e)return t},useSetter:function(){Ne=!0},useSimple:function(){Ne=!1}}),O(O.S+O.F*!Le,"Object",{create:function(e,t){return void 0===t?pe(e):We(pe(e),t)},defineProperty:Be,defineProperties:We,getOwnPropertyDescriptor:Ge,getOwnPropertyNames:He,getOwnPropertySymbols:Je}),Oe&&O(O.S+O.F*(!Le||a(function(){var e=Pe();return"[null]"!=Ce([e])||"{}"!=Ce({a:e})||"{}"!=Ce(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(c(t)||void 0!==e)&&!qe(e))return ae(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!qe(t))return t}),n[1]=t,Ce.apply(Oe,n)}}),Pe.prototype[je]||b(Pe.prototype,je,Pe.prototype.valueOf),A(Pe,"Symbol"),A(Math,"Math",!0),A(n.JSON,"JSON",!0),O(O.S,"Object",{create:pe}),O(O.S+O.F*!u,"Object",{defineProperty:m.f}),O(O.S+O.F*!u,"Object",{defineProperties:ue});var Ze=function(e,t){var r=(s.Object||{})[e]||Object[e],n={};n[e]=t(r),O(O.S+O.F*a(function(){r(1)}),"Object",n)},Qe=we.f;Ze("getOwnPropertyDescriptor",function(){return function(e,t){return Qe(q(e),t)}});var et=function(e){return Object(z(e))},tt=Z("IE_PROTO"),rt=Object.prototype,nt=Object.getPrototypeOf||function(e){return e=et(e),o(e,tt)?e[tt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?rt:null};Ze("getPrototypeOf",function(){return function(e){return nt(et(e))}}),Ze("keys",function(){return function(e){return ne(et(e))}}),Ze("getOwnPropertyNames",function(){return be.f});var it=C.onFreeze;Ze("freeze",function(e){return function(t){return e&&c(t)?e(it(t)):t}});var ot=C.onFreeze;Ze("seal",function(e){return function(t){return e&&c(t)?e(ot(t)):t}});var at=C.onFreeze;Ze("preventExtensions",function(e){return function(t){return e&&c(t)?e(at(t)):t}}),Ze("isFrozen",function(e){return function(t){return!c(t)||!!e&&e(t)}}),Ze("isSealed",function(e){return function(t){return!c(t)||!!e&&e(t)}}),Ze("isExtensible",function(e){return function(t){return!!c(t)&&(!e||e(t))}});var ut=Object.assign,st=!ut||a(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=ut({},e)[r]||Object.keys(ut({},t)).join("")!=n})?function(e,t){for(var r=et(e),n=arguments.length,i=1,o=ie.f,a=oe.f;n>i;)for(var u,s=U(arguments[i++]),c=o?ne(s).concat(o(s)):ne(s),l=c.length,f=0;l>f;)a.call(s,u=c[f++])&&(r[u]=s[u]);return r}:ut;O(O.S+O.F,"Object",{assign:st});var ct=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};O(O.S,"Object",{is:ct});var lt=function(e,t){if(l(e),!c(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},ft={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=T(Function.call,we.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return lt(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:lt};O(O.S,"Object",{setPrototypeOf:ft.set});var dt=j("toStringTag"),pt="Arguments"==N(function(){return arguments}()),ht=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),dt))?r:pt?N(t):"Object"==(n=N(t))&&"function"==typeof t.callee?"Arguments":n},vt={};vt[j("toStringTag")]="z",vt+""!="[object z]"&&k(Object.prototype,"toString",function(){return"[object "+ht(this)+"]"},!0);var gt=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},mt=[].slice,yt={},bt=Function.bind||function(e){var t=E(this),r=mt.call(arguments,1),n=function(){var i=r.concat(mt.call(arguments));return this instanceof n?function(e,t,r){if(!(t in yt)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";yt[t]=Function("F,a","return new F("+n.join(",")+")")}return yt[t](e,r)}(t,i.length,i):gt(t,i,e)};return c(t.prototype)&&(n.prototype=t.prototype),n};O(O.P,"Function",{bind:bt});var _t=m.f,wt=Function.prototype,St=/^\s*function ([^ (]*)/;"name"in wt||u&&_t(wt,"name",{configurable:!0,get:function(){try{return(""+this).match(St)[1]}catch(e){return""}}});var kt=j("hasInstance"),Et=Function.prototype;kt in Et||m.f(Et,kt,{value:function(e){if("function"!=typeof this||!c(e))return!1;if(!c(this.prototype))return e instanceof this;for(;e=nt(e);)if(this.prototype===e)return!0;return!1}});var Tt="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",Pt="["+Tt+"]",Ot=RegExp("^"+Pt+Pt+"*"),Ct=RegExp(Pt+Pt+"*$"),Mt=function(e,t,r){var n={},i=a(function(){return!!Tt[e]()||"âÂ"!="âÂ"[e]()}),o=n[e]=i?t(jt):Tt[e];r&&(n[r]=o),O(O.P+O.F*i,"String",n)},jt=Mt.trim=function(e,t){return e=String(z(e)),1&t&&(e=e.replace(Ot,"")),2&t&&(e=e.replace(Ct,"")),e},xt=Mt,Rt=n.parseInt,At=xt.trim,It=/^[-+]?0[xX]/,Dt=8!==Rt(Tt+"08")||22!==Rt(Tt+"0x16")?function(e,t){var r=At(String(e),3);return Rt(r,t>>>0||(It.test(r)?16:10))}:Rt;O(O.G+O.F*(parseInt!=Dt),{parseInt:Dt});var Lt=n.parseFloat,Ft=xt.trim,Nt=1/Lt(Tt+"-0")!=-1/0?function(e){var t=Ft(String(e),3),r=Lt(t);return 0===r&&"-"==t.charAt(0)?-0:r}:Lt;O(O.G+O.F*(parseFloat!=Nt),{parseFloat:Nt});var Ut=ft.set,zt=function(e,t,r){var n,i=t.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&c(n)&&Ut&&Ut(e,n),e},qt=ve.f,Bt=we.f,Wt=m.f,Vt=xt.trim,Gt=n.Number,Ht=Gt,Jt=Gt.prototype,Yt="Number"==N(pe(Jt)),$t="trim"in String.prototype,Kt=function(e){var t=v(e,!1);if("string"==typeof t&&t.length>2){var r,n,i,o=(t=$t?t.trim():Vt(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var a,u=t.slice(2),s=0,c=u.length;s<c;s++)if((a=u.charCodeAt(s))<48||a>i)return NaN;return parseInt(u,n)}}return+t};if(!Gt(" 0o1")||!Gt("0b1")||Gt("+0x1")){Gt=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof Gt&&(Yt?a(function(){Jt.valueOf.call(r)}):"Number"!=N(r))?zt(new Ht(Kt(t)),r,Gt):Kt(t)};for(var Xt,Zt=u?qt(Ht):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Qt=0;Zt.length>Qt;Qt++)o(Ht,Xt=Zt[Qt])&&!o(Gt,Xt)&&Wt(Gt,Xt,Bt(Ht,Xt));Gt.prototype=Jt,Jt.constructor=Gt,k(n,"Number",Gt)}var er=function(e,t){if("number"!=typeof e&&"Number"!=N(e))throw TypeError(t);return+e},tr=function(e){var t=String(z(this)),r="",n=V(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r},rr=1..toFixed,nr=Math.floor,ir=[0,0,0,0,0,0],or="Number.toFixed: incorrect invocation!",ar=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*ir[r],ir[r]=n%1e7,n=nr(n/1e7)},ur=function(e){for(var t=6,r=0;--t>=0;)r+=ir[t],ir[t]=nr(r/e),r=r%e*1e7},sr=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==ir[e]){var r=String(ir[e]);t=""===t?r:t+tr.call("0",7-r.length)+r}return t},cr=function(e,t,r){return 0===t?r:t%2==1?cr(e,t-1,r*e):cr(e*e,t/2,r)};O(O.P+O.F*(!!rr&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a(function(){rr.call({})})),"Number",{toFixed:function(e){var t,r,n,i,o=er(this,or),a=V(e),u="",s="0";if(a<0||a>20)throw RangeError(or);if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(u="-",o=-o),o>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(o*cr(2,69,1))-69)<0?o*cr(2,-t,1):o/cr(2,t,1),r*=4503599627370496,(t=52-t)>0){for(ar(0,r),n=a;n>=7;)ar(1e7,0),n-=7;for(ar(cr(10,n,1),0),n=t-1;n>=23;)ur(1<<23),n-=23;ur(1<<n),ar(1,1),ur(2),s=sr()}else ar(0,r),ar(1<<-t,0),s=sr()+tr.call("0",a);return s=a>0?u+((i=s.length)<=a?"0."+tr.call("0",a-i)+s:s.slice(0,i-a)+"."+s.slice(i-a)):u+s}});var lr=1..toPrecision;O(O.P+O.F*(a(function(){return"1"!==lr.call(1,void 0)})||!a(function(){lr.call({})})),"Number",{toPrecision:function(e){var t=er(this,"Number#toPrecision: incorrect invocation!");return void 0===e?lr.call(t):lr.call(t,e)}}),O(O.S,"Number",{EPSILON:Math.pow(2,-52)});var fr=n.isFinite;O(O.S,"Number",{isFinite:function(e){return"number"==typeof e&&fr(e)}});var dr=Math.floor,pr=function(e){return!c(e)&&isFinite(e)&&dr(e)===e};O(O.S,"Number",{isInteger:pr}),O(O.S,"Number",{isNaN:function(e){return e!=e}});var hr=Math.abs;O(O.S,"Number",{isSafeInteger:function(e){return pr(e)&&hr(e)<=9007199254740991}}),O(O.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),O(O.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),O(O.S+O.F*(Number.parseFloat!=Nt),"Number",{parseFloat:Nt}),O(O.S+O.F*(Number.parseInt!=Dt),"Number",{parseInt:Dt});var vr=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)},gr=Math.sqrt,mr=Math.acosh;O(O.S+O.F*!(mr&&710==Math.floor(mr(Number.MAX_VALUE))&&mr(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:vr(e-1+gr(e-1)*gr(e+1))}});var yr=Math.asinh;O(O.S+O.F*!(yr&&1/yr(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}});var br=Math.atanh;O(O.S+O.F*!(br&&1/br(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}});var _r=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1};O(O.S,"Math",{cbrt:function(e){return _r(e=+e)*Math.pow(Math.abs(e),1/3)}}),O(O.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}});var wr=Math.exp;O(O.S,"Math",{cosh:function(e){return(wr(e=+e)+wr(-e))/2}});var Sr=Math.expm1,kr=!Sr||Sr(10)>22025.465794806718||Sr(10)<22025.465794806718||-2e-17!=Sr(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:Sr;O(O.S+O.F*(kr!=Math.expm1),"Math",{expm1:kr});var Er=Math.pow,Tr=Er(2,-52),Pr=Er(2,-23),Or=Er(2,127)*(2-Pr),Cr=Er(2,-126),Mr=Math.fround||function(e){var t,r,n=Math.abs(e),i=_r(e);return n<Cr?i*(n/Cr/Pr+1/Tr-1/Tr)*Cr*Pr:(r=(t=(1+Pr/Tr)*n)-(t-n))>Or||r!=r?i*(1/0):i*r};O(O.S,"Math",{fround:Mr});var jr=Math.abs;O(O.S,"Math",{hypot:function(e,t){for(var r,n,i=0,o=0,a=arguments.length,u=0;o<a;)u<(r=jr(arguments[o++]))?(i=i*(n=u/r)*n+1,u=r):i+=r>0?(n=r/u)*n:r;return u===1/0?1/0:u*Math.sqrt(i)}});var xr=Math.imul;O(O.S+O.F*a(function(){return-5!=xr(4294967295,5)||2!=xr.length}),"Math",{imul:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n;return 0|i*o+((65535&r>>>16)*o+i*(65535&n>>>16)<<16>>>0)}}),O(O.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}}),O(O.S,"Math",{log1p:vr}),O(O.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}}),O(O.S,"Math",{sign:_r});var Rr=Math.exp;O(O.S+O.F*a(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(kr(e)-kr(-e))/2:(Rr(e-1)-Rr(-e-1))*(Math.E/2)}});var Ar=Math.exp;O(O.S,"Math",{tanh:function(e){var t=kr(e=+e),r=kr(-e);return t==1/0?1:r==1/0?-1:(t-r)/(Ar(e)+Ar(-e))}}),O(O.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}});var Ir=String.fromCharCode,Dr=String.fromCodePoint;O(O.S+O.F*(!!Dr&&1!=Dr.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,i=0;n>i;){if(t=+arguments[i++],$(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?Ir(t):Ir(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}}),O(O.S,"String",{raw:function(e){for(var t=q(e.raw),r=H(t.length),n=arguments.length,i=[],o=0;r>o;)i.push(String(t[o++])),o<n&&i.push(String(arguments[o]));return i.join("")}}),xt("trim",function(e){return function(){return e(this,3)}});var Lr=function(e){return function(t,r){var n,i,o=String(z(t)),a=V(r),u=o.length;return a<0||a>=u?e?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):n:e?o.slice(a,a+2):i-56320+(n-55296<<10)+65536}},Fr={},Nr={};b(Nr,j("iterator"),function(){return this});var Ur=function(e,t,r){e.prototype=pe(Nr,{next:y(1,r)}),A(e,t+" Iterator")},zr=j("iterator"),qr=!([].keys&&"next"in[].keys()),Br=function(){return this},Wr=function(e,t,r,n,i,o,a){Ur(r,t,n);var u,s,c,l=function(e){if(!qr&&e in h)return h[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},f=t+" Iterator",d="values"==i,p=!1,h=e.prototype,v=h[zr]||h["@@iterator"]||i&&h[i],g=v||l(i),m=i?d?l("entries"):g:void 0,y="Array"==t&&h.entries||v;if(y&&(c=nt(y.call(new e)))!==Object.prototype&&c.next&&(A(c,f,!0),"function"!=typeof c[zr]&&b(c,zr,Br)),d&&v&&"values"!==v.name&&(p=!0,g=function(){return v.call(this)}),(qr||p||!h[zr])&&b(h,zr,g),Fr[t]=g,Fr[f]=Br,i)if(u={values:d?g:l("values"),keys:o?g:l("keys"),entries:m},a)for(s in u)s in h||k(h,s,u[s]);else O(O.P+O.F*(qr||p),t,u);return u},Vr=Lr(!0);Wr(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=Vr(t,r),this._i+=e.length,{value:e,done:!1})});var Gr=Lr(!1);O(O.P,"String",{codePointAt:function(e){return Gr(this,e)}});var Hr=j("match"),Jr=function(e){var t;return c(e)&&(void 0!==(t=e[Hr])?!!t:"RegExp"==N(e))},Yr=function(e,t,r){if(Jr(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(z(e))},$r=j("match"),Kr=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[$r]=!1,!"/./"[e](t)}catch(e){}}return!0},Xr="".endsWith;O(O.P+O.F*Kr("endsWith"),"String",{endsWith:function(e){var t=Yr(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=H(t.length),i=void 0===r?n:Math.min(H(r),n),o=String(e);return Xr?Xr.call(t,o,i):t.slice(i-o.length,i)===o}});O(O.P+O.F*Kr("includes"),"String",{includes:function(e){return!!~Yr(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}}),O(O.P,"String",{repeat:tr});var Zr="".startsWith;O(O.P+O.F*Kr("startsWith"),"String",{startsWith:function(e){var t=Yr(this,e,"startsWith"),r=H(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return Zr?Zr.call(t,n,r):t.slice(r,r+n.length)===n}});var Qr=/"/g,en=function(e,t,r,n){var i=String(z(e)),o="<"+t;return""!==r&&(o+=" "+r+'="'+String(n).replace(Qr,"&quot;")+'"'),o+">"+i+"</"+t+">"},tn=function(e,t){var r={};r[e]=t(en),O(O.P+O.F*a(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)};tn("anchor",function(e){return function(t){return e(this,"a","name",t)}}),tn("big",function(e){return function(){return e(this,"big","","")}}),tn("blink",function(e){return function(){return e(this,"blink","","")}}),tn("bold",function(e){return function(){return e(this,"b","","")}}),tn("fixed",function(e){return function(){return e(this,"tt","","")}}),tn("fontcolor",function(e){return function(t){return e(this,"font","color",t)}}),tn("fontsize",function(e){return function(t){return e(this,"font","size",t)}}),tn("italics",function(e){return function(){return e(this,"i","","")}}),tn("link",function(e){return function(t){return e(this,"a","href",t)}}),tn("small",function(e){return function(){return e(this,"small","","")}}),tn("strike",function(e){return function(){return e(this,"strike","","")}}),tn("sub",function(e){return function(){return e(this,"sub","","")}}),tn("sup",function(e){return function(){return e(this,"sup","","")}}),O(O.S,"Date",{now:function(){return(new Date).getTime()}}),O(O.P+O.F*a(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=et(this),r=v(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}});var rn=Date.prototype.getTime,nn=Date.prototype.toISOString,on=function(e){return e>9?e:"0"+e},an=a(function(){return"0385-07-25T07:06:39.999Z"!=nn.call(new Date(-5e13-1))})||!a(function(){nn.call(new Date(NaN))})?function(){if(!isFinite(rn.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+on(e.getUTCMonth()+1)+"-"+on(e.getUTCDate())+"T"+on(e.getUTCHours())+":"+on(e.getUTCMinutes())+":"+on(e.getUTCSeconds())+"."+(r>99?r:"0"+on(r))+"Z"}:nn;O(O.P+O.F*(Date.prototype.toISOString!==an),"Date",{toISOString:an});var un=Date.prototype,sn=un.toString,cn=un.getTime;new Date(NaN)+""!="Invalid Date"&&k(un,"toString",function(){var e=cn.call(this);return e==e?sn.call(this):"Invalid Date"});var ln=j("toPrimitive"),fn=Date.prototype;ln in fn||b(fn,ln,function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return v(l(this),"number"!=e)}),O(O.S,"Array",{isArray:ae});var dn=function(e,t,r,n){try{return n?t(l(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&l(i.call(e)),t}},pn=j("iterator"),hn=Array.prototype,vn=function(e){return void 0!==e&&(Fr.Array===e||hn[pn]===e)},gn=function(e,t,r){t in e?m.f(e,t,y(0,r)):e[t]=r},mn=j("iterator"),yn=s.getIteratorMethod=function(e){if(null!=e)return e[mn]||e["@@iterator"]||Fr[ht(e)]},bn=j("iterator"),_n=!1;try{[7][bn]().return=function(){_n=!0}}catch(e){}var wn=function(e,t){if(!t&&!_n)return!1;var r=!1;try{var n=[7],i=n[bn]();i.next=function(){return{done:r=!0}},n[bn]=function(){return i},e(n)}catch(e){}return r};O(O.S+O.F*!wn(function(e){}),"Array",{from:function(e){var t,r,n,i,o=et(e),a="function"==typeof this?this:Array,u=arguments.length,s=u>1?arguments[1]:void 0,c=void 0!==s,l=0,f=yn(o);if(c&&(s=T(s,u>2?arguments[2]:void 0,2)),null==f||a==Array&&vn(f))for(r=new a(t=H(o.length));t>l;l++)gn(r,l,c?s(o[l],l):o[l]);else for(i=f.call(o),r=new a;!(n=i.next()).done;l++)gn(r,l,c?dn(i,s,[n.value,l],!0):n.value);return r.length=l,r}}),O(O.S+O.F*a(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)gn(r,e,arguments[e++]);return r.length=t,r}});var Sn=function(e,t){return!!e&&a(function(){t?e.call(null,function(){},1):e.call(null)})},kn=[].join;O(O.P+O.F*(U!=Object||!Sn(kn)),"Array",{join:function(e){return kn.call(q(this),void 0===e?",":e)}});var En=[].slice;O(O.P+O.F*a(function(){ce&&En.call(ce)}),"Array",{slice:function(e,t){var r=H(this.length),n=N(this);if(t=void 0===t?r:t,"Array"==n)return En.call(this,e,t);for(var i=$(e,r),o=$(t,r),a=H(o-i),u=new Array(a),s=0;s<a;s++)u[s]="String"==n?this.charAt(i+s):this[i+s];return u}});var Tn=[].sort,Pn=[1,2,3];O(O.P+O.F*(a(function(){Pn.sort(void 0)})||!a(function(){Pn.sort(null)})||!Sn(Tn)),"Array",{sort:function(e){return void 0===e?Tn.call(et(this)):Tn.call(et(this),E(e))}});var On=j("species"),Cn=function(e,t){return new(function(e){var t;return ae(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!ae(t.prototype)||(t=void 0),c(t)&&null===(t=t[On])&&(t=void 0)),void 0===t?Array:t}(e))(t)},Mn=function(e,t){var r=1==e,n=2==e,i=3==e,o=4==e,a=6==e,u=5==e||a,s=t||Cn;return function(t,c,l){for(var f,d,p=et(t),h=U(p),v=T(c,l,3),g=H(h.length),m=0,y=r?s(t,g):n?s(t,0):void 0;g>m;m++)if((u||m in h)&&(d=v(f=h[m],m,p),e))if(r)y[m]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return m;case 2:y.push(f)}else if(o)return!1;return a?-1:i||o?o:y}},jn=Mn(0),xn=Sn([].forEach,!0);O(O.P+O.F*!xn,"Array",{forEach:function(e){return jn(this,e,arguments[1])}});var Rn=Mn(1);O(O.P+O.F*!Sn([].map,!0),"Array",{map:function(e){return Rn(this,e,arguments[1])}});var An=Mn(2);O(O.P+O.F*!Sn([].filter,!0),"Array",{filter:function(e){return An(this,e,arguments[1])}});var In=Mn(3);O(O.P+O.F*!Sn([].some,!0),"Array",{some:function(e){return In(this,e,arguments[1])}});var Dn=Mn(4);O(O.P+O.F*!Sn([].every,!0),"Array",{every:function(e){return Dn(this,e,arguments[1])}});var Ln=function(e,t,r,n,i){E(t);var o=et(e),a=U(o),u=H(o.length),s=i?u-1:0,c=i?-1:1;if(r<2)for(;;){if(s in a){n=a[s],s+=c;break}if(s+=c,i?s<0:u<=s)throw TypeError("Reduce of empty array with no initial value")}for(;i?s>=0:u>s;s+=c)s in a&&(n=t(n,a[s],s,o));return n};O(O.P+O.F*!Sn([].reduce,!0),"Array",{reduce:function(e){return Ln(this,e,arguments.length,arguments[1],!1)}}),O(O.P+O.F*!Sn([].reduceRight,!0),"Array",{reduceRight:function(e){return Ln(this,e,arguments.length,arguments[1],!0)}});var Fn=K(!1),Nn=[].indexOf,Un=!!Nn&&1/[1].indexOf(1,-0)<0;O(O.P+O.F*(Un||!Sn(Nn)),"Array",{indexOf:function(e){return Un?Nn.apply(this,arguments)||0:Fn(this,e,arguments[1])}});var zn=[].lastIndexOf,qn=!!zn&&1/[1].lastIndexOf(1,-0)<0;O(O.P+O.F*(qn||!Sn(zn)),"Array",{lastIndexOf:function(e){if(qn)return zn.apply(this,arguments)||0;var t=q(this),r=H(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,V(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}});var Bn=[].copyWithin||function(e,t){var r=et(this),n=H(r.length),i=$(e,n),o=$(t,n),a=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===a?n:$(a,n))-o,n-i),s=1;for(o<i&&i<o+u&&(s=-1,o+=u-1,i+=u-1);u-- >0;)o in r?r[i]=r[o]:delete r[i],i+=s,o+=s;return r},Wn=j("unscopables"),Vn=Array.prototype;null==Vn[Wn]&&b(Vn,Wn,{});var Gn=function(e){Vn[Wn][e]=!0};O(O.P,"Array",{copyWithin:Bn}),Gn("copyWithin");var Hn=function(e){for(var t=et(this),r=H(t.length),n=arguments.length,i=$(n>1?arguments[1]:void 0,r),o=n>2?arguments[2]:void 0,a=void 0===o?r:$(o,r);a>i;)t[i++]=e;return t};O(O.P,"Array",{fill:Hn}),Gn("fill");var Jn=Mn(5),Yn=!0;"find"in[]&&Array(1).find(function(){Yn=!1}),O(O.P+O.F*Yn,"Array",{find:function(e){return Jn(this,e,arguments.length>1?arguments[1]:void 0)}}),Gn("find");var $n=Mn(6),Kn=!0;"findIndex"in[]&&Array(1).findIndex(function(){Kn=!1}),O(O.P+O.F*Kn,"Array",{findIndex:function(e){return $n(this,e,arguments.length>1?arguments[1]:void 0)}}),Gn("findIndex");var Xn=j("species"),Zn=function(e){var t=n[e];u&&t&&!t[Xn]&&m.f(t,Xn,{configurable:!0,get:function(){return this}})};Zn("Array");var Qn=function(e,t){return{value:t,done:!!e}},ei=Wr(Array,"Array",function(e,t){this._t=q(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,Qn(1)):Qn(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");Fr.Arguments=Fr.Array,Gn("keys"),Gn("values"),Gn("entries");var ti=function(){var e=l(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},ri=m.f,ni=ve.f,ii=n.RegExp,oi=ii,ai=ii.prototype,ui=/a/g,si=/a/g,ci=new ii(ui)!==ui;if(u&&(!ci||a(function(){return si[j("match")]=!1,ii(ui)!=ui||ii(si)==si||"/a/i"!=ii(ui,"i")}))){ii=function(e,t){var r=this instanceof ii,n=Jr(e),i=void 0===t;return!r&&n&&e.constructor===ii&&i?e:zt(ci?new oi(n&&!i?e.source:e,t):oi((n=e instanceof ii)?e.source:e,n&&i?ti.call(e):t),r?this:ai,ii)};for(var li=function(e){e in ii||ri(ii,e,{configurable:!0,get:function(){return oi[e]},set:function(t){oi[e]=t}})},fi=ni(oi),di=0;fi.length>di;)li(fi[di++]);ai.constructor=ii,ii.prototype=ai,k(n,"RegExp",ii)}Zn("RegExp"),u&&"g"!=/./g.flags&&m.f(RegExp.prototype,"flags",{configurable:!0,get:ti});var pi=/./.toString,hi=function(e){k(RegExp.prototype,"toString",e,!0)};a(function(){return"/a/b"!=pi.call({source:"a",flags:"b"})})?hi(function(){var e=l(this);return"/".concat(e.source,"/","flags"in e?e.flags:!u&&e instanceof RegExp?ti.call(e):void 0)}):"toString"!=pi.name&&hi(function(){return pi.call(this)});var vi=function(e,t,r){var n=j(e),i=r(z,n,""[e]),o=i[0],u=i[1];a(function(){var t={};return t[n]=function(){return 7},7!=""[e](t)})&&(k(String.prototype,e,o),b(RegExp.prototype,n,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)}))};vi("match",1,function(e,t,r){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]}),vi("replace",2,function(e,t,r){return[function(n,i){var o=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]}),vi("search",1,function(e,t,r){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]}),vi("split",2,function(e,t,r){var n=Jr,i=r,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];r=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!n(e))return i.call(r,e,t);var u,s,c,l,f,d=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,v=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,p+"g");for(a||(u=new RegExp("^"+g.source+"$(?!\\s)",p));(s=g.exec(r))&&!((c=s.index+s[0].length)>h&&(d.push(r.slice(h,s.index)),!a&&s.length>1&&s[0].replace(u,function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(s[f]=void 0)}),s.length>1&&s.index<r.length&&o.apply(d,s.slice(1)),l=s[0].length,h=c,d.length>=v));)g.lastIndex===s.index&&g.lastIndex++;return h===r.length?!l&&g.test("")||d.push(""):d.push(r.slice(h)),d.length>v?d.slice(0,v):d}}else"0".split(void 0,0).length&&(r=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function(n,i){var o=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]});var gi,mi,yi,bi=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},_i=r(function(e){var t={},r={},n=e.exports=function(e,n,i,o,a){var u,s,c,f,d=a?function(){return e}:yn(e),p=T(i,o,n?2:1),h=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");if(vn(d)){for(u=H(e.length);u>h;h++)if((f=n?p(l(s=e[h])[0],s[1]):p(e[h]))===t||f===r)return f}else for(c=d.call(e);!(s=c.next()).done;)if((f=dn(c,p,s.value,n))===t||f===r)return f};n.BREAK=t,n.RETURN=r}),wi=j("species"),Si=function(e,t){var r,n=l(e).constructor;return void 0===n||null==(r=l(n)[wi])?t:E(r)},ki=n.process,Ei=n.setImmediate,Ti=n.clearImmediate,Pi=n.MessageChannel,Oi=n.Dispatch,Ci=0,Mi={},ji=function(){var e=+this;if(Mi.hasOwnProperty(e)){var t=Mi[e];delete Mi[e],t()}},xi=function(e){ji.call(e.data)};Ei&&Ti||(Ei=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return Mi[++Ci]=function(){gt("function"==typeof e?e:Function(e),t)},gi(Ci),Ci},Ti=function(e){delete Mi[e]},"process"==N(ki)?gi=function(e){ki.nextTick(T(ji,e,1))}:Oi&&Oi.now?gi=function(e){Oi.now(T(ji,e,1))}:Pi?(yi=(mi=new Pi).port2,mi.port1.onmessage=xi,gi=T(yi.postMessage,yi,1)):n.addEventListener&&"function"==typeof postMessage&&!n.importScripts?(gi=function(e){n.postMessage(e+"","*")},n.addEventListener("message",xi,!1)):gi="onreadystatechange"in p("script")?function(e){ce.appendChild(p("script")).onreadystatechange=function(){ce.removeChild(this),ji.call(e)}}:function(e){setTimeout(T(ji,e,1),0)});var Ri={set:Ei,clear:Ti},Ai=Ri.set,Ii=n.MutationObserver||n.WebKitMutationObserver,Di=n.process,Li=n.Promise,Fi="process"==N(Di),Ni=function(){var e,t,r,i=function(){var n,i;for(Fi&&(n=Di.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(Fi)r=function(){Di.nextTick(i)};else if(!Ii||n.navigator&&n.navigator.standalone)if(Li&&Li.resolve){var o=Li.resolve(void 0);r=function(){o.then(i)}}else r=function(){Ai.call(n,i)};else{var a=!0,u=document.createTextNode("");new Ii(i).observe(u,{characterData:!0}),r=function(){u.data=a=!a}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}};function Ui(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=E(t),this.reject=E(r)}var zi,qi,Bi,Wi,Vi={f:function(e){return new Ui(e)}},Gi=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},Hi=n.navigator,Ji=Hi&&Hi.userAgent||"",Yi=function(e,t){if(l(e),c(t)&&t.constructor===e)return t;var r=Vi.f(e);return(0,r.resolve)(t),r.promise},$i=function(e,t,r){for(var n in t)k(e,n,t[n],r);return e},Ki=Ri.set,Xi=Ni(),Zi=n.TypeError,Qi=n.process,eo=Qi&&Qi.versions,to=eo&&eo.v8||"",ro=n.Promise,no="process"==ht(Qi),io=function(){},oo=qi=Vi.f,ao=!!function(){try{var e=ro.resolve(1),t=(e.constructor={})[j("species")]=function(e){e(io,io)};return(no||"function"==typeof PromiseRejectionEvent)&&e.then(io)instanceof t&&0!==to.indexOf("6.6")&&-1===Ji.indexOf("Chrome/66")}catch(e){}}(),uo=function(e){var t;return!(!c(e)||"function"!=typeof(t=e.then))&&t},so=function(e,t){if(!e._n){e._n=!0;var r=e._c;Xi(function(){for(var n=e._v,i=1==e._s,o=0,a=function(t){var r,o,a,u=i?t.ok:t.fail,s=t.resolve,c=t.reject,l=t.domain;try{u?(i||(2==e._h&&fo(e),e._h=1),!0===u?r=n:(l&&l.enter(),r=u(n),l&&(l.exit(),a=!0)),r===t.promise?c(Zi("Promise-chain cycle")):(o=uo(r))?o.call(r,s,c):s(r)):c(n)}catch(e){l&&!a&&l.exit(),c(e)}};r.length>o;)a(r[o++]);e._c=[],e._n=!1,t&&!e._h&&co(e)})}},co=function(e){Ki.call(n,function(){var t,r,i,o=e._v,a=lo(e);if(a&&(t=Gi(function(){no?Qi.emit("unhandledRejection",o,e):(r=n.onunhandledrejection)?r({promise:e,reason:o}):(i=n.console)&&i.error&&i.error("Unhandled promise rejection",o)}),e._h=no||lo(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},lo=function(e){return 1!==e._h&&0===(e._a||e._c).length},fo=function(e){Ki.call(n,function(){var t;no?Qi.emit("rejectionHandled",e):(t=n.onrejectionhandled)&&t({promise:e,reason:e._v})})},po=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),so(t,!0))},ho=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw Zi("Promise can't be resolved itself");(t=uo(e))?Xi(function(){var n={_w:r,_d:!1};try{t.call(e,T(ho,n,1),T(po,n,1))}catch(e){po.call(n,e)}}):(r._v=e,r._s=1,so(r,!1))}catch(e){po.call({_w:r,_d:!1},e)}}};ao||(ro=function(e){bi(this,ro,"Promise","_h"),E(e),zi.call(this);try{e(T(ho,this,1),T(po,this,1))}catch(e){po.call(this,e)}},(zi=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=$i(ro.prototype,{then:function(e,t){var r=oo(Si(this,ro));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=no?Qi.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&so(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Bi=function(){var e=new zi;this.promise=e,this.resolve=T(ho,e,1),this.reject=T(po,e,1)},Vi.f=oo=function(e){return e===ro||e===Wi?new Bi(e):qi(e)}),O(O.G+O.W+O.F*!ao,{Promise:ro}),A(ro,"Promise"),Zn("Promise"),Wi=s.Promise,O(O.S+O.F*!ao,"Promise",{reject:function(e){var t=oo(this);return(0,t.reject)(e),t.promise}}),O(O.S+O.F*!ao,"Promise",{resolve:function(e){return Yi(this,e)}}),O(O.S+O.F*!(ao&&wn(function(e){ro.all(e).catch(io)})),"Promise",{all:function(e){var t=this,r=oo(t),n=r.resolve,i=r.reject,o=Gi(function(){var r=[],o=0,a=1;_i(e,!1,function(e){var u=o++,s=!1;r.push(void 0),a++,t.resolve(e).then(function(e){s||(s=!0,r[u]=e,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=oo(t),n=r.reject,i=Gi(function(){_i(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}});var vo=function(e,t){if(!c(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},go=m.f,mo=C.fastKey,yo=u?"_s":"size",bo=function(e,t){var r,n=mo(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r},_o={getConstructor:function(e,t,r,n){var i=e(function(e,o){bi(e,i,t,"_i"),e._t=t,e._i=pe(null),e._f=void 0,e._l=void 0,e[yo]=0,null!=o&&_i(o,r,e[n],e)});return $i(i.prototype,{clear:function(){for(var e=vo(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[yo]=0},delete:function(e){var r=vo(this,t),n=bo(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[yo]--}return!!n},forEach:function(e){vo(this,t);for(var r,n=T(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!bo(vo(this,t),e)}}),u&&go(i.prototype,"size",{get:function(){return vo(this,t)[yo]}}),i},def:function(e,t,r){var n,i,o=bo(e,t);return o?o.v=r:(e._l=o={i:i=mo(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[yo]++,"F"!==i&&(e._i[i]=o)),e},getEntry:bo,setStrong:function(e,t,r){Wr(e,t,function(e,r){this._t=vo(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?Qn(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,Qn(1))},r?"entries":"values",!r,!0),Zn(t)}},wo=function(e,t,r,i,o,u){var s=n[e],l=s,f=o?"set":"add",d=l&&l.prototype,p={},h=function(e){var t=d[e];k(d,e,"delete"==e?function(e){return!(u&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(u&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return u&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof l&&(u||d.forEach&&!a(function(){(new l).entries().next()}))){var v=new l,g=v[f](u?{}:-0,1)!=v,m=a(function(){v.has(1)}),y=wn(function(e){new l(e)}),b=!u&&a(function(){for(var e=new l,t=5;t--;)e[f](t,t);return!e.has(-0)});y||((l=t(function(t,r){bi(t,l,e);var n=zt(new s,t,l);return null!=r&&_i(r,o,n[f],n),n})).prototype=d,d.constructor=l),(m||b)&&(h("delete"),h("has"),o&&h("get")),(b||g)&&h(f),u&&d.clear&&delete d.clear}else l=i.getConstructor(t,e,o,f),$i(l.prototype,r),C.NEED=!0;return A(l,e),p[e]=l,O(O.G+O.W+O.F*(l!=s),p),u||i.setStrong(l,e,o),l},So=wo("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=_o.getEntry(vo(this,"Map"),e);return t&&t.v},set:function(e,t){return _o.def(vo(this,"Map"),0===e?0:e,t)}},_o,!0),ko=wo("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return _o.def(vo(this,"Set"),e=0===e?0:e,e)}},_o),Eo=C.getWeak,To=Mn(5),Po=Mn(6),Oo=0,Co=function(e){return e._l||(e._l=new Mo)},Mo=function(){this.a=[]},jo=function(e,t){return To(e.a,function(e){return e[0]===t})};Mo.prototype={get:function(e){var t=jo(this,e);if(t)return t[1]},has:function(e){return!!jo(this,e)},set:function(e,t){var r=jo(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=Po(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}};var xo={getConstructor:function(e,t,r,n){var i=e(function(e,o){bi(e,i,t,"_i"),e._t=t,e._i=Oo++,e._l=void 0,null!=o&&_i(o,r,e[n],e)});return $i(i.prototype,{delete:function(e){if(!c(e))return!1;var r=Eo(e);return!0===r?Co(vo(this,t)).delete(e):r&&o(r,this._i)&&delete r[this._i]},has:function(e){if(!c(e))return!1;var r=Eo(e);return!0===r?Co(vo(this,t)).has(e):r&&o(r,this._i)}}),i},def:function(e,t,r){var n=Eo(l(t),!0);return!0===n?Co(e).set(t,r):n[e._i]=r,e},ufstore:Co},Ro=r(function(e){var t,r=Mn(0),n=C.getWeak,i=Object.isExtensible,o=xo.ufstore,u={},s=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},l={get:function(e){if(c(e)){var t=n(e);return!0===t?o(vo(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return xo.def(vo(this,"WeakMap"),e,t)}},f=e.exports=wo("WeakMap",s,l,xo,!0,!0);a(function(){return 7!=(new f).set((Object.freeze||Object)(u),7).get(u)})&&(t=xo.getConstructor(s,"WeakMap"),st(t.prototype,l),C.NEED=!0,r(["delete","has","get","set"],function(e){var r=f.prototype,n=r[e];k(r,e,function(r,o){if(c(r)&&!i(r)){this._f||(this._f=new t);var a=this._f[e](r,o);return"set"==e?this:a}return n.call(this,r,o)})}))});wo("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return xo.def(vo(this,"WeakSet"),e,!0)}},xo,!1,!0);for(var Ao,Io=S("typed_array"),Do=S("view"),Lo=!(!n.ArrayBuffer||!n.DataView),Fo=Lo,No=0,Uo="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");No<9;)(Ao=n[Uo[No++]])?(b(Ao.prototype,Io,!0),b(Ao.prototype,Do,!0)):Fo=!1;var zo={ABV:Lo,CONSTR:Fo,TYPED:Io,VIEW:Do},qo=function(e){if(void 0===e)return 0;var t=V(e),r=H(t);if(t!==r)throw RangeError("Wrong length!");return r},Bo=r(function(e,t){var r=ve.f,i=m.f,o="prototype",s="Wrong index!",c=n.ArrayBuffer,l=n.DataView,f=n.Math,d=n.RangeError,p=n.Infinity,h=c,v=f.abs,g=f.pow,y=f.floor,_=f.log,w=f.LN2,S=u?"_b":"buffer",k=u?"_l":"byteLength",E=u?"_o":"byteOffset";function T(e,t,r){var n,i,o,a=new Array(r),u=8*r-t-1,s=(1<<u)-1,c=s>>1,l=23===t?g(2,-24)-g(2,-77):0,f=0,d=e<0||0===e&&1/e<0?1:0;for((e=v(e))!=e||e===p?(i=e!=e?1:0,n=s):(n=y(_(e)/w),e*(o=g(2,-n))<1&&(n--,o*=2),(e+=n+c>=1?l/o:l*g(2,1-c))*o>=2&&(n++,o/=2),n+c>=s?(i=0,n=s):n+c>=1?(i=(e*o-1)*g(2,t),n+=c):(i=e*g(2,c-1)*g(2,t),n=0));t>=8;a[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,u+=t;u>0;a[f++]=255&n,n/=256,u-=8);return a[--f]|=128*d,a}function P(e,t,r){var n,i=8*r-t-1,o=(1<<i)-1,a=o>>1,u=i-7,s=r-1,c=e[s--],l=127&c;for(c>>=7;u>0;l=256*l+e[s],s--,u-=8);for(n=l&(1<<-u)-1,l>>=-u,u+=t;u>0;n=256*n+e[s],s--,u-=8);if(0===l)l=1-a;else{if(l===o)return n?NaN:c?-p:p;n+=g(2,t),l-=a}return(c?-1:1)*n*g(2,l-t)}function O(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function C(e){return[255&e]}function M(e){return[255&e,e>>8&255]}function j(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function x(e){return T(e,52,8)}function R(e){return T(e,23,4)}function I(e,t,r){i(e[o],t,{get:function(){return this[r]}})}function D(e,t,r,n){var i=qo(+r);if(i+t>e[k])throw d(s);var o=e[S]._b,a=i+e[E],u=o.slice(a,a+t);return n?u:u.reverse()}function L(e,t,r,n,i,o){var a=qo(+r);if(a+t>e[k])throw d(s);for(var u=e[S]._b,c=a+e[E],l=n(+i),f=0;f<t;f++)u[c+f]=l[o?f:t-f-1]}if(zo.ABV){if(!a(function(){c(1)})||!a(function(){new c(-1)})||a(function(){return new c,new c(1.5),new c(NaN),"ArrayBuffer"!=c.name})){for(var F,N=(c=function(e){return bi(this,c),new h(qo(e))})[o]=h[o],U=r(h),z=0;U.length>z;)(F=U[z++])in c||b(c,F,h[F]);N.constructor=c}var q=new l(new c(2)),B=l[o].setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||$i(l[o],{setInt8:function(e,t){B.call(this,e,t<<24>>24)},setUint8:function(e,t){B.call(this,e,t<<24>>24)}},!0)}else c=function(e){bi(this,c,"ArrayBuffer");var t=qo(e);this._b=Hn.call(new Array(t),0),this[k]=t},l=function(e,t,r){bi(this,l,"DataView"),bi(e,c,"DataView");var n=e[k],i=V(t);if(i<0||i>n)throw d("Wrong offset!");if(i+(r=void 0===r?n-i:H(r))>n)throw d("Wrong length!");this[S]=e,this[E]=i,this[k]=r},u&&(I(c,"byteLength","_l"),I(l,"buffer","_b"),I(l,"byteLength","_l"),I(l,"byteOffset","_o")),$i(l[o],{getInt8:function(e){return D(this,1,e)[0]<<24>>24},getUint8:function(e){return D(this,1,e)[0]},getInt16:function(e){var t=D(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=D(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return O(D(this,4,e,arguments[1]))},getUint32:function(e){return O(D(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return P(D(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return P(D(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){L(this,1,e,C,t)},setUint8:function(e,t){L(this,1,e,C,t)},setInt16:function(e,t){L(this,2,e,M,t,arguments[2])},setUint16:function(e,t){L(this,2,e,M,t,arguments[2])},setInt32:function(e,t){L(this,4,e,j,t,arguments[2])},setUint32:function(e,t){L(this,4,e,j,t,arguments[2])},setFloat32:function(e,t){L(this,4,e,R,t,arguments[2])},setFloat64:function(e,t){L(this,8,e,x,t,arguments[2])}});A(c,"ArrayBuffer"),A(l,"DataView"),b(l[o],zo.VIEW,!0),t.ArrayBuffer=c,t.DataView=l}),Wo=n.ArrayBuffer,Vo=Bo.ArrayBuffer,Go=Bo.DataView,Ho=zo.ABV&&Wo.isView,Jo=Vo.prototype.slice,Yo=zo.VIEW;O(O.G+O.W+O.F*(Wo!==Vo),{ArrayBuffer:Vo}),O(O.S+O.F*!zo.CONSTR,"ArrayBuffer",{isView:function(e){return Ho&&Ho(e)||c(e)&&Yo in e}}),O(O.P+O.U+O.F*a(function(){return!new Vo(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==Jo&&void 0===t)return Jo.call(l(this),e);for(var r=l(this).byteLength,n=$(e,r),i=$(void 0===t?r:t,r),o=new(Si(this,Vo))(H(i-n)),a=new Go(this),u=new Go(o),s=0;n<i;)u.setUint8(s++,a.getUint8(n++));return o}}),Zn("ArrayBuffer"),O(O.G+O.W+O.F*!zo.ABV,{DataView:Bo.DataView});var $o=r(function(e){if(u){var t=n,r=a,i=O,s=zo,l=Bo,f=T,d=bi,p=y,h=b,g=$i,_=V,w=H,k=qo,E=$,P=v,C=o,M=ht,x=c,R=et,A=vn,I=pe,D=nt,L=ve.f,F=yn,N=S,U=j,z=Mn,q=K,B=Si,W=ei,G=Fr,J=wn,Y=Zn,X=Hn,Z=Bn,Q=m,ee=we,te=Q.f,re=ee.f,ne=t.RangeError,ie=t.TypeError,oe=t.Uint8Array,ae=Array.prototype,ue=l.ArrayBuffer,se=l.DataView,ce=z(0),le=z(2),fe=z(3),de=z(4),he=z(5),ge=z(6),me=q(!0),ye=q(!1),be=W.values,_e=W.keys,Se=W.entries,ke=ae.lastIndexOf,Ee=ae.reduce,Te=ae.reduceRight,Pe=ae.join,Oe=ae.sort,Ce=ae.slice,Me=ae.toString,je=ae.toLocaleString,xe=U("iterator"),Re=U("toStringTag"),Ae=N("typed_constructor"),Ie=N("def_constructor"),De=s.CONSTR,Le=s.TYPED,Fe=s.VIEW,Ne=z(1,function(e,t){return We(B(e,e[Ie]),t)}),Ue=r(function(){return 1===new oe(new Uint16Array([1]).buffer)[0]}),ze=!!oe&&!!oe.prototype.set&&r(function(){new oe(1).set({})}),qe=function(e,t){var r=_(e);if(r<0||r%t)throw ne("Wrong offset!");return r},Be=function(e){if(x(e)&&Le in e)return e;throw ie(e+" is not a typed array!")},We=function(e,t){if(!(x(e)&&Ae in e))throw ie("It is not a typed array constructor!");return new e(t)},Ve=function(e,t){return Ge(B(e,e[Ie]),t)},Ge=function(e,t){for(var r=0,n=t.length,i=We(e,n);n>r;)i[r]=t[r++];return i},He=function(e,t,r){te(e,t,{get:function(){return this._d[r]}})},Je=function(e){var t,r,n,i,o,a,u=R(e),s=arguments.length,c=s>1?arguments[1]:void 0,l=void 0!==c,d=F(u);if(null!=d&&!A(d)){for(a=d.call(u),n=[],t=0;!(o=a.next()).done;t++)n.push(o.value);u=n}for(l&&s>2&&(c=f(c,arguments[2],2)),t=0,r=w(u.length),i=We(this,r);r>t;t++)i[t]=l?c(u[t],t):u[t];return i},Ye=function(){for(var e=0,t=arguments.length,r=We(this,t);t>e;)r[e]=arguments[e++];return r},$e=!!oe&&r(function(){je.call(new oe(1))}),Ke=function(){return je.apply($e?Ce.call(Be(this)):Be(this),arguments)},Xe={copyWithin:function(e,t){return Z.call(Be(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return de(Be(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return X.apply(Be(this),arguments)},filter:function(e){return Ve(this,le(Be(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return he(Be(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ge(Be(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){ce(Be(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ye(Be(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return me(Be(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return Pe.apply(Be(this),arguments)},lastIndexOf:function(e){return ke.apply(Be(this),arguments)},map:function(e){return Ne(Be(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return Ee.apply(Be(this),arguments)},reduceRight:function(e){return Te.apply(Be(this),arguments)},reverse:function(){for(var e,t=Be(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return fe(Be(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return Oe.call(Be(this),e)},subarray:function(e,t){var r=Be(this),n=r.length,i=E(e,n);return new(B(r,r[Ie]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,w((void 0===t?n:E(t,n))-i))}},Ze=function(e,t){return Ve(this,Ce.call(Be(this),e,t))},Qe=function(e){Be(this);var t=qe(arguments[1],1),r=this.length,n=R(e),i=w(n.length),o=0;if(i+t>r)throw ne("Wrong length!");for(;o<i;)this[t+o]=n[o++]},tt={entries:function(){return Se.call(Be(this))},keys:function(){return _e.call(Be(this))},values:function(){return be.call(Be(this))}},rt=function(e,t){return x(e)&&e[Le]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},it=function(e,t){return rt(e,t=P(t,!0))?p(2,e[t]):re(e,t)},ot=function(e,t,r){return!(rt(e,t=P(t,!0))&&x(r)&&C(r,"value"))||C(r,"get")||C(r,"set")||r.configurable||C(r,"writable")&&!r.writable||C(r,"enumerable")&&!r.enumerable?te(e,t,r):(e[t]=r.value,e)};De||(ee.f=it,Q.f=ot),i(i.S+i.F*!De,"Object",{getOwnPropertyDescriptor:it,defineProperty:ot}),r(function(){Me.call({})})&&(Me=je=function(){return Pe.call(this)});var at=g({},Xe);g(at,tt),h(at,xe,tt.values),g(at,{slice:Ze,set:Qe,constructor:function(){},toString:Me,toLocaleString:Ke}),He(at,"buffer","b"),He(at,"byteOffset","o"),He(at,"byteLength","l"),He(at,"length","e"),te(at,Re,{get:function(){return this[Le]}}),e.exports=function(e,n,o,a){var u=e+((a=!!a)?"Clamped":"")+"Array",c="get"+e,l="set"+e,f=t[u],p=f||{},v=f&&D(f),g=!f||!s.ABV,m={},y=f&&f.prototype,b=function(e,t){te(e,t,{get:function(){return function(e,t){var r=e._d;return r.v[c](t*n+r.o,Ue)}(this,t)},set:function(e){return function(e,t,r){var i=e._d;a&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[l](t*n+i.o,r,Ue)}(this,t,e)},enumerable:!0})};g?(f=o(function(e,t,r,i){d(e,f,u,"_d");var o,a,s,c,l=0,p=0;if(x(t)){if(!(t instanceof ue||"ArrayBuffer"==(c=M(t))||"SharedArrayBuffer"==c))return Le in t?Ge(f,t):Je.call(f,t);o=t,p=qe(r,n);var v=t.byteLength;if(void 0===i){if(v%n)throw ne("Wrong length!");if((a=v-p)<0)throw ne("Wrong length!")}else if((a=w(i)*n)+p>v)throw ne("Wrong length!");s=a/n}else s=k(t),o=new ue(a=s*n);for(h(e,"_d",{b:o,o:p,l:a,e:s,v:new se(o)});l<s;)b(e,l++)}),y=f.prototype=I(at),h(y,"constructor",f)):r(function(){f(1)})&&r(function(){new f(-1)})&&J(function(e){new f,new f(null),new f(1.5),new f(e)},!0)||(f=o(function(e,t,r,i){var o;return d(e,f,u),x(t)?t instanceof ue||"ArrayBuffer"==(o=M(t))||"SharedArrayBuffer"==o?void 0!==i?new p(t,qe(r,n),i):void 0!==r?new p(t,qe(r,n)):new p(t):Le in t?Ge(f,t):Je.call(f,t):new p(k(t))}),ce(v!==Function.prototype?L(p).concat(L(v)):L(p),function(e){e in f||h(f,e,p[e])}),f.prototype=y,y.constructor=f);var _=y[xe],S=!!_&&("values"==_.name||null==_.name),E=tt.values;h(f,Ae,!0),h(y,Le,u),h(y,Fe,!0),h(y,Ie,f),(a?new f(1)[Re]==u:Re in y)||te(y,Re,{get:function(){return u}}),m[u]=f,i(i.G+i.W+i.F*(f!=p),m),i(i.S,u,{BYTES_PER_ELEMENT:n}),i(i.S+i.F*r(function(){p.of.call(f,1)}),u,{from:Je,of:Ye}),"BYTES_PER_ELEMENT"in y||h(y,"BYTES_PER_ELEMENT",n),i(i.P,u,Xe),Y(u),i(i.P+i.F*ze,u,{set:Qe}),i(i.P+i.F*!S,u,tt),y.toString!=Me&&(y.toString=Me),i(i.P+i.F*r(function(){new f(1).slice()}),u,{slice:Ze}),i(i.P+i.F*(r(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!r(function(){y.toLocaleString.call([1,2])})),u,{toLocaleString:Ke}),G[u]=S?_:E,S||h(y,xe,E)}}else e.exports=function(){}});$o("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}}),$o("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}}),$o("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0),$o("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}}),$o("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}}),$o("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}}),$o("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}}),$o("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}}),$o("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}});var Ko=(n.Reflect||{}).apply,Xo=Function.apply;O(O.S+O.F*!a(function(){Ko(function(){})}),"Reflect",{apply:function(e,t,r){var n=E(e),i=l(r);return Ko?Ko(n,t,i):Xo.call(n,t,i)}});var Zo=(n.Reflect||{}).construct,Qo=a(function(){function e(){}return!(Zo(function(){},[],e)instanceof e)}),ea=!a(function(){Zo(function(){})});O(O.S+O.F*(Qo||ea),"Reflect",{construct:function(e,t){E(e),l(t);var r=arguments.length<3?e:E(arguments[2]);if(ea&&!Qo)return Zo(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(bt.apply(e,n))}var i=r.prototype,o=pe(c(i)?i:Object.prototype),a=Function.apply.call(e,o,t);return c(a)?a:o}}),O(O.S+O.F*a(function(){Reflect.defineProperty(m.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){l(e),t=v(t,!0),l(r);try{return m.f(e,t,r),!0}catch(e){return!1}}});var ta=we.f;O(O.S,"Reflect",{deleteProperty:function(e,t){var r=ta(l(e),t);return!(r&&!r.configurable)&&delete e[t]}});var ra=function(e){this._t=l(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};Ur(ra,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),O(O.S,"Reflect",{enumerate:function(e){return new ra(e)}}),O(O.S,"Reflect",{get:function e(t,r){var n,i,a=arguments.length<3?t:arguments[2];return l(t)===a?t[r]:(n=we.f(t,r))?o(n,"value")?n.value:void 0!==n.get?n.get.call(a):void 0:c(i=nt(t))?e(i,r,a):void 0}}),O(O.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return we.f(l(e),t)}}),O(O.S,"Reflect",{getPrototypeOf:function(e){return nt(l(e))}}),O(O.S,"Reflect",{has:function(e,t){return t in e}});var na=Object.isExtensible;O(O.S,"Reflect",{isExtensible:function(e){return l(e),!na||na(e)}});var ia=n.Reflect,oa=ia&&ia.ownKeys||function(e){var t=ve.f(l(e)),r=ie.f;return r?t.concat(r(e)):t};O(O.S,"Reflect",{ownKeys:oa});var aa=Object.preventExtensions;O(O.S,"Reflect",{preventExtensions:function(e){l(e);try{return aa&&aa(e),!0}catch(e){return!1}}}),O(O.S,"Reflect",{set:function e(t,r,n){var i,a,u=arguments.length<4?t:arguments[3],s=we.f(l(t),r);if(!s){if(c(a=nt(t)))return e(a,r,n,u);s=y(0)}if(o(s,"value")){if(!1===s.writable||!c(u))return!1;if(i=we.f(u,r)){if(i.get||i.set||!1===i.writable)return!1;i.value=n,m.f(u,r,i)}else m.f(u,r,y(0,n));return!0}return void 0!==s.set&&(s.set.call(u,n),!0)}}),ft&&O(O.S,"Reflect",{setPrototypeOf:function(e,t){ft.check(e,t);try{return ft.set(e,t),!0}catch(e){return!1}}});var ua=K(!0);O(O.P,"Array",{includes:function(e){return ua(this,e,arguments.length>1?arguments[1]:void 0)}}),Gn("includes");var sa=j("isConcatSpreadable");var ca=function e(t,r,n,i,o,a,u,s){for(var l,f,d=o,p=0,h=!!u&&T(u,s,3);p<i;){if(p in n){if(l=h?h(n[p],p,r):n[p],f=!1,c(l)&&(f=void 0!==(f=l[sa])?!!f:ae(l)),f&&a>0)d=e(t,r,l,H(l.length),d,a-1)-1;else{if(d>=9007199254740991)throw TypeError();t[d]=l}d++}p++}return d};O(O.P,"Array",{flatMap:function(e){var t,r,n=et(this);return E(e),t=H(n.length),r=Cn(n,0),ca(r,n,n,t,0,1,e,arguments[1]),r}}),Gn("flatMap"),O(O.P,"Array",{flatten:function(){var e=arguments[0],t=et(this),r=H(t.length),n=Cn(t,0);return ca(n,t,t,r,0,void 0===e?1:V(e)),n}}),Gn("flatten");var la=Lr(!0);O(O.P,"String",{at:function(e){return la(this,e)}});var fa=function(e,t,r,n){var i=String(z(e)),o=i.length,a=void 0===r?" ":String(r),u=H(t);if(u<=o||""==a)return i;var s=u-o,c=tr.call(a,Math.ceil(s/a.length));return c.length>s&&(c=c.slice(0,s)),n?c+i:i+c};O(O.P+O.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(Ji),"String",{padStart:function(e){return fa(this,e,arguments.length>1?arguments[1]:void 0,!0)}}),O(O.P+O.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(Ji),"String",{padEnd:function(e){return fa(this,e,arguments.length>1?arguments[1]:void 0,!1)}}),xt("trimLeft",function(e){return function(){return e(this,1)}},"trimStart"),xt("trimRight",function(e){return function(){return e(this,2)}},"trimEnd");var da=RegExp.prototype,pa=function(e,t){this._r=e,this._s=t};Ur(pa,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),O(O.P,"String",{matchAll:function(e){if(z(this),!Jr(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in da?String(e.flags):ti.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=H(e.lastIndex),new pa(n,t)}}),L("asyncIterator"),L("observable"),O(O.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=q(e),i=we.f,o=oa(n),a={},u=0;o.length>u;)void 0!==(r=i(n,t=o[u++]))&&gn(a,t,r);return a}});var ha=oe.f,va=function(e){return function(t){for(var r,n=q(t),i=ne(n),o=i.length,a=0,u=[];o>a;)ha.call(n,r=i[a++])&&u.push(e?[r,n[r]]:n[r]);return u}},ga=va(!1);O(O.S,"Object",{values:function(e){return ga(e)}});var ma=va(!0);O(O.S,"Object",{entries:function(e){return ma(e)}});var ya=!a(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n[e]});u&&O(O.P+ya,"Object",{__defineGetter__:function(e,t){m.f(et(this),e,{get:E(t),enumerable:!0,configurable:!0})}}),u&&O(O.P+ya,"Object",{__defineSetter__:function(e,t){m.f(et(this),e,{set:E(t),enumerable:!0,configurable:!0})}});var ba=we.f;u&&O(O.P+ya,"Object",{__lookupGetter__:function(e){var t,r=et(this),n=v(e,!0);do{if(t=ba(r,n))return t.get}while(r=nt(r))}});var _a=we.f;u&&O(O.P+ya,"Object",{__lookupSetter__:function(e){var t,r=et(this),n=v(e,!0);do{if(t=_a(r,n))return t.set}while(r=nt(r))}});var wa=function(e,t){var r=[];return _i(e,!1,r.push,r,t),r},Sa=function(e){return function(){if(ht(this)!=e)throw TypeError(e+"#toJSON isn't generic");return wa(this)}};O(O.P+O.R,"Map",{toJSON:Sa("Map")}),O(O.P+O.R,"Set",{toJSON:Sa("Set")});var ka=function(e){O(O.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})};ka("Map"),ka("Set"),ka("WeakMap"),ka("WeakSet");var Ea=function(e){O(O.S,e,{from:function(e){var t,r,n,i,o=arguments[1];return E(this),(t=void 0!==o)&&E(o),null==e?new this:(r=[],t?(n=0,i=T(o,arguments[2],2),_i(e,!1,function(e){r.push(i(e,n++))})):_i(e,!1,r.push,r),new this(r))}})};Ea("Map"),Ea("Set"),Ea("WeakMap"),Ea("WeakSet"),O(O.G,{global:n}),O(O.S,"System",{global:n}),O(O.S,"Error",{isError:function(e){return"Error"===N(e)}}),O(O.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}}),O(O.S,"Math",{DEG_PER_RAD:Math.PI/180});var Ta=180/Math.PI;O(O.S,"Math",{degrees:function(e){return e*Ta}});var Pa=Math.scale||function(e,t,r,n,i){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-n)/(r-t)+n};O(O.S,"Math",{fscale:function(e,t,r,n,i){return Mr(Pa(e,t,r,n,i))}}),O(O.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,o=r>>>0;return(t>>>0)+(n>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}}),O(O.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,o=r>>>0;return(t>>>0)-(n>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}}),O(O.S,"Math",{imulh:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n,a=r>>16,u=n>>16,s=(a*o>>>0)+(i*o>>>16);return a*u+(s>>16)+((i*u>>>0)+(65535&s)>>16)}}),O(O.S,"Math",{RAD_PER_DEG:180/Math.PI});var Oa=Math.PI/180;O(O.S,"Math",{radians:function(e){return e*Oa}}),O(O.S,"Math",{scale:Pa}),O(O.S,"Math",{umulh:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n,a=r>>>16,u=n>>>16,s=(a*o>>>0)+(i*o>>>16);return a*u+(s>>>16)+((i*u>>>0)+(65535&s)>>>16)}}),O(O.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}}),O(O.P+O.R,"Promise",{finally:function(e){var t=Si(this,s.Promise||n.Promise),r="function"==typeof e;return this.then(r?function(r){return Yi(t,e()).then(function(){return r})}:e,r?function(r){return Yi(t,e()).then(function(){throw r})}:e)}}),O(O.S,"Promise",{try:function(e){var t=Vi.f(this),r=Gi(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}});var Ca=M("metadata"),Ma=Ca.store||(Ca.store=new Ro),ja=function(e,t,r){var n=Ma.get(e);if(!n){if(!r)return;Ma.set(e,n=new So)}var i=n.get(t);if(!i){if(!r)return;n.set(t,i=new So)}return i},xa={store:Ma,map:ja,has:function(e,t,r){var n=ja(t,r,!1);return void 0!==n&&n.has(e)},get:function(e,t,r){var n=ja(t,r,!1);return void 0===n?void 0:n.get(e)},set:function(e,t,r,n){ja(r,n,!0).set(e,t)},keys:function(e,t){var r=ja(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){O(O.S,"Reflect",e)}},Ra=xa.key,Aa=xa.set;xa.exp({defineMetadata:function(e,t,r,n){Aa(e,t,l(r),Ra(n))}});var Ia=xa.key,Da=xa.map,La=xa.store;xa.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:Ia(arguments[2]),n=Da(l(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var i=La.get(t);return i.delete(r),!!i.size||La.delete(t)}});var Fa=xa.has,Na=xa.get,Ua=xa.key,za=function(e,t,r){if(Fa(e,t,r))return Na(e,t,r);var n=nt(t);return null!==n?za(e,n,r):void 0};xa.exp({getMetadata:function(e,t){return za(e,l(t),arguments.length<3?void 0:Ua(arguments[2]))}});var qa=xa.keys,Ba=xa.key,Wa=function(e,t){var r=qa(e,t),n=nt(e);if(null===n)return r;var i=Wa(n,t);return i.length?r.length?wa(new ko(r.concat(i))):i:r};xa.exp({getMetadataKeys:function(e){return Wa(l(e),arguments.length<2?void 0:Ba(arguments[1]))}});var Va=xa.get,Ga=xa.key;xa.exp({getOwnMetadata:function(e,t){return Va(e,l(t),arguments.length<3?void 0:Ga(arguments[2]))}});var Ha=xa.keys,Ja=xa.key;xa.exp({getOwnMetadataKeys:function(e){return Ha(l(e),arguments.length<2?void 0:Ja(arguments[1]))}});var Ya=xa.has,$a=xa.key,Ka=function(e,t,r){if(Ya(e,t,r))return!0;var n=nt(t);return null!==n&&Ka(e,n,r)};xa.exp({hasMetadata:function(e,t){return Ka(e,l(t),arguments.length<3?void 0:$a(arguments[2]))}});var Xa=xa.has,Za=xa.key;xa.exp({hasOwnMetadata:function(e,t){return Xa(e,l(t),arguments.length<3?void 0:Za(arguments[2]))}});var Qa=xa.key,eu=xa.set;xa.exp({metadata:function(e,t){return function(r,n){eu(e,t,(void 0!==n?l:E)(r),Qa(n))}}});var tu=Ni(),ru=n.process,nu="process"==N(ru);O(O.G,{asap:function(e){var t=nu&&ru.domain;tu(t?t.bind(e):e)}});var iu=Ni(),ou=j("observable"),au=_i.RETURN,uu=function(e){return null==e?void 0:E(e)},su=function(e){var t=e._c;t&&(e._c=void 0,t())},cu=function(e){return void 0===e._o},lu=function(e){cu(e)||(e._o=void 0,su(e))},fu=function(e,t){l(e),this._c=void 0,this._o=e,e=new du(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:E(r),this._c=r)}catch(t){return void e.error(t)}cu(this)&&su(this)};fu.prototype=$i({},{unsubscribe:function(){lu(this)}});var du=function(e){this._s=e};du.prototype=$i({},{next:function(e){var t=this._s;if(!cu(t)){var r=t._o;try{var n=uu(r.next);if(n)return n.call(r,e)}catch(e){try{lu(t)}finally{throw e}}}},error:function(e){var t=this._s;if(cu(t))throw e;var r=t._o;t._o=void 0;try{var n=uu(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{su(t)}finally{throw e}}return su(t),e},complete:function(e){var t=this._s;if(!cu(t)){var r=t._o;t._o=void 0;try{var n=uu(r.complete);e=n?n.call(r,e):void 0}catch(e){try{su(t)}finally{throw e}}return su(t),e}}});var pu=function(e){bi(this,pu,"Observable","_f")._f=E(e)};$i(pu.prototype,{subscribe:function(e){return new fu(e,this._f)},forEach:function(e){var t=this;return new(s.Promise||n.Promise)(function(r,n){E(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r})})}}),$i(pu,{from:function(e){var t="function"==typeof this?this:pu,r=uu(l(e)[ou]);if(r){var n=l(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return iu(function(){if(!r){try{if(_i(e,!1,function(e){if(t.next(e),r)return au})===au)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=new Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:pu)(function(e){var t=!1;return iu(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),b(pu.prototype,ou,function(){return this}),O(O.G,{Observable:pu}),Zn("Observable");var hu=[].slice,vu=/MSIE .\./.test(Ji),gu=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&hu.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};O(O.G+O.B+O.F*vu,{setTimeout:gu(n.setTimeout),setInterval:gu(n.setInterval)}),O(O.G+O.B,{setImmediate:Ri.set,clearImmediate:Ri.clear});for(var mu=j("iterator"),yu=j("toStringTag"),bu=Fr.Array,_u={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},wu=ne(_u),Su=0;Su<wu.length;Su++){var ku,Eu=wu[Su],Tu=_u[Eu],Pu=n[Eu],Ou=Pu&&Pu.prototype;if(Ou&&(Ou[mu]||b(Ou,mu,bu),Ou[yu]||b(Ou,yu,Eu),Fr[Eu]=bu,Tu))for(ku in ei)Ou[ku]||k(Ou,ku,ei[ku],!0)}r(function(t){!function(e){var r,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag",c=e.regeneratorRuntime;if(c)t.exports=c;else{(c=e.regeneratorRuntime=t.exports).wrap=b;var l="suspendedStart",f="suspendedYield",d="executing",p="completed",h={},v={};v[a]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(j([])));m&&m!==n&&i.call(m,a)&&(v=m);var y=k.prototype=w.prototype=Object.create(v);S.prototype=y.constructor=k,k.constructor=S,k[s]=S.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(y),e},c.awrap=function(e){return{__await:e}},E(T.prototype),T.prototype[u]=function(){return this},c.AsyncIterator=T,c.async=function(e,t,r,n){var i=new T(b(e,t,r,n));return c.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},E(y),y[s]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=j,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return u.type="throw",u.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),h}}}function b(e,t,r,n){var i=t&&t.prototype instanceof w?t:w,o=Object.create(i.prototype),a=new M(n||[]);return o._invoke=function(e,t,r){var n=l;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return x()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=P(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var s=_(e,t,r);if("normal"===s.type){if(n=r.done?p:f,s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=p,r.method="throw",r.arg=s.arg)}}}(e,r,a),o}function _(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function w(){}function S(){}function k(){}function E(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function T(t){function r(e,n,o,a){var u=_(t[e],t,n);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){r("next",e,o,a)},function(e){r("throw",e,o,a)}):Promise.resolve(c).then(function(e){s.value=e,o(s)},a)}a(u.arg)}var n;"object"==typeof e.process&&e.process.domain&&(r=e.process.domain.bind(r)),this._invoke=function(e,t){function i(){return new Promise(function(n,i){r(e,t,n,i)})}return n=n?n.then(i,i):i()}}function P(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,P(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=_(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:r,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:e)});var Cu=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}(/[\\^$*+?.()|[\]{}]/g,"\\$&");O(O.S,"RegExp",{escape:function(e){return Cu(e)}});s.RegExp.escape;if(e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var Mu="defineProperty";function ju(e,t,r){e[t]||Object[Mu](e,t,{writable:!0,configurable:!0,value:r})}ju(String.prototype,"padLeft","".padStart),ju(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&ju(Array,e,Function.call.bind([][e]))});var xu="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Ru(){throw new Error("setTimeout has not been defined")}function Au(){throw new Error("clearTimeout has not been defined")}var Iu=Ru,Du=Au;function Lu(e){if(Iu===setTimeout)return setTimeout(e,0);if((Iu===Ru||!Iu)&&setTimeout)return Iu=setTimeout,setTimeout(e,0);try{return Iu(e,0)}catch(t){try{return Iu.call(null,e,0)}catch(t){return Iu.call(this,e,0)}}}"function"==typeof xu.setTimeout&&(Iu=setTimeout),"function"==typeof xu.clearTimeout&&(Du=clearTimeout);var Fu,Nu=[],Uu=!1,zu=-1;function qu(){Uu&&Fu&&(Uu=!1,Fu.length?Nu=Fu.concat(Nu):zu=-1,Nu.length&&Bu())}function Bu(){if(!Uu){var e=Lu(qu);Uu=!0;for(var t=Nu.length;t;){for(Fu=Nu,Nu=[];++zu<t;)Fu&&Fu[zu].run();zu=-1,t=Nu.length}Fu=null,Uu=!1,function(e){if(Du===clearTimeout)return clearTimeout(e);if((Du===Au||!Du)&&clearTimeout)return Du=clearTimeout,clearTimeout(e);try{Du(e)}catch(t){try{return Du.call(null,e)}catch(t){return Du.call(this,e)}}}(e)}}function Wu(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Nu.push(new Vu(e,t)),1!==Nu.length||Uu||Lu(Bu)}function Vu(e,t){this.fun=e,this.array=t}Vu.prototype.run=function(){this.fun.apply(null,this.array)};function Gu(){}var Hu=Gu,Ju=Gu,Yu=Gu,$u=Gu,Ku=Gu,Xu=Gu,Zu=Gu;var Qu=xu.performance||{},es=Qu.now||Qu.mozNow||Qu.msNow||Qu.oNow||Qu.webkitNow||function(){return(new Date).getTime()};var ts=new Date;var rs={nextTick:Wu,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Hu,addListener:Ju,once:Yu,off:$u,removeListener:Ku,removeAllListeners:Xu,emit:Zu,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*es.call(Qu),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-ts)/1e3}},ns={}.toString,is=function(e){return ns.call(e).slice(8,-1)},os=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==is(e)?e.split(""):Object(e)},as=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},us=function(e){return os(as(e))},ss={f:{}.propertyIsEnumerable},cs=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},ls=function(e){return"object"==typeof e?null!==e:"function"==typeof e},fs=function(e,t){if(!ls(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!ls(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!ls(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!ls(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},ds={}.hasOwnProperty,ps=function(e,t){return ds.call(e,t)},hs=function(e){try{return!!e()}catch(e){return!0}},vs=!hs(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),gs=r(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),ms=gs.document,ys=ls(ms)&&ls(ms.createElement),bs=function(e){return ys?ms.createElement(e):{}},_s=!vs&&!hs(function(){return 7!=Object.defineProperty(bs("div"),"a",{get:function(){return 7}}).a}),ws=Object.getOwnPropertyDescriptor,Ss={f:vs?ws:function(e,t){if(e=us(e),t=fs(t,!0),_s)try{return ws(e,t)}catch(e){}if(ps(e,t))return cs(!ss.f.call(e,t),e[t])}},ks=r(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),Es=(ks.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),Ts=function(e,t,r){if(Es(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},Ps=function(e){if(!ls(e))throw TypeError(e+" is not an object!");return e},Os=Object.defineProperty,Cs={f:vs?Object.defineProperty:function(e,t,r){if(Ps(e),t=fs(t,!0),Ps(r),_s)try{return Os(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},Ms=vs?function(e,t,r){return Cs.f(e,t,cs(1,r))}:function(e,t,r){return e[t]=r,e},js=function(e,t,r){var n,i,o,a=e&js.F,u=e&js.G,s=e&js.S,c=e&js.P,l=e&js.B,f=e&js.W,d=u?ks:ks[t]||(ks[t]={}),p=d.prototype,h=u?gs:s?gs[t]:(gs[t]||{}).prototype;for(n in u&&(r=t),r)(i=!a&&h&&void 0!==h[n])&&ps(d,n)||(o=i?h[n]:r[n],d[n]=u&&"function"!=typeof h[n]?r[n]:l&&i?Ts(o,gs):f&&h[n]==o?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(o):c&&"function"==typeof o?Ts(Function.call,o):o,c&&((d.virtual||(d.virtual={}))[n]=o,e&js.R&&p&&!p[n]&&Ms(p,n,o)))};js.F=1,js.G=2,js.S=4,js.P=8,js.B=16,js.W=32,js.U=64,js.R=128;var xs=js,Rs=function(e,t){var r=(ks.Object||{})[e]||Object[e],n={};n[e]=t(r),xs(xs.S+xs.F*hs(function(){r(1)}),"Object",n)},As=Ss.f;Rs("getOwnPropertyDescriptor",function(){return function(e,t){return As(us(e),t)}});var Is=ks.Object,Ds=function(e,t){return Is.getOwnPropertyDescriptor(e,t)},Ls=r(function(e){e.exports={default:Ds,__esModule:!0}});t(Ls);var Fs=Ss.f;xs(xs.S,"Reflect",{deleteProperty:function(e,t){var r=Fs(Ps(e),t);return!(r&&!r.configurable)&&delete e[t]}});var Ns=ks.Reflect.deleteProperty,Us=r(function(e){e.exports={default:Ns,__esModule:!0}});t(Us);var zs,qs=Math.ceil,Bs=Math.floor,Ws=function(e){return isNaN(e=+e)?0:(e>0?Bs:qs)(e)},Vs=Ms,Gs={},Hs=Math.min,Js=function(e){return e>0?Hs(Ws(e),9007199254740991):0},Ys=Math.max,$s=Math.min,Ks=r(function(e){var t=gs["__core-js_shared__"]||(gs["__core-js_shared__"]={});(e.exports=function(e,r){return t[e]||(t[e]=void 0!==r?r:{})})("versions",[]).push({version:ks.version,mode:"pure",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})}),Xs=0,Zs=Math.random(),Qs=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++Xs+Zs).toString(36))},ec=Ks("keys"),tc=function(e){return ec[e]||(ec[e]=Qs(e))},rc=(zs=!1,function(e,t,r){var n,i=us(e),o=Js(i.length),a=function(e,t){return(e=Ws(e))<0?Ys(e+t,0):$s(e,t)}(r,o);if(zs&&t!=t){for(;o>a;)if((n=i[a++])!=n)return!0}else for(;o>a;a++)if((zs||a in i)&&i[a]===t)return zs||a||0;return!zs&&-1}),nc=tc("IE_PROTO"),ic=function(e,t){var r,n=us(e),i=0,o=[];for(r in n)r!=nc&&ps(n,r)&&o.push(r);for(;t.length>i;)ps(n,r=t[i++])&&(~rc(o,r)||o.push(r));return o},oc="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ac=Object.keys||function(e){return ic(e,oc)},uc=vs?Object.defineProperties:function(e,t){Ps(e);for(var r,n=ac(t),i=n.length,o=0;i>o;)Cs.f(e,r=n[o++],t[r]);return e},sc=gs.document,cc=sc&&sc.documentElement,lc=tc("IE_PROTO"),fc=function(){},dc=function(){var e,t=bs("iframe"),r=oc.length;for(t.style.display="none",cc.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),dc=e.F;r--;)delete dc.prototype[oc[r]];return dc()},pc=Object.create||function(e,t){var r;return null!==e?(fc.prototype=Ps(e),r=new fc,fc.prototype=null,r[lc]=e):r=dc(),void 0===t?r:uc(r,t)},hc=r(function(e){var t=Ks("wks"),r=gs.Symbol,n="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=n&&r[e]||(n?r:Qs)("Symbol."+e))}).store=t}),vc=Cs.f,gc=hc("toStringTag"),mc=function(e,t,r){e&&!ps(e=r?e:e.prototype,gc)&&vc(e,gc,{configurable:!0,value:t})},yc={};Ms(yc,hc("iterator"),function(){return this});var bc=function(e){return Object(as(e))},_c=tc("IE_PROTO"),wc=Object.prototype,Sc=Object.getPrototypeOf||function(e){return e=bc(e),ps(e,_c)?e[_c]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?wc:null},kc=hc("iterator"),Ec=!([].keys&&"next"in[].keys()),Tc=function(){return this},Pc=function(e,t,r,n,i,o,a){!function(e,t,r){e.prototype=pc(yc,{next:cs(1,r)}),mc(e,t+" Iterator")}(r,t,n);var u,s,c,l=function(e){if(!Ec&&e in h)return h[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},f=t+" Iterator",d="values"==i,p=!1,h=e.prototype,v=h[kc]||h["@@iterator"]||i&&h[i],g=v||l(i),m=i?d?l("entries"):g:void 0,y="Array"==t&&h.entries||v;if(y&&(c=Sc(y.call(new e)))!==Object.prototype&&c.next&&mc(c,f,!0),d&&v&&"values"!==v.name&&(p=!0,g=function(){return v.call(this)}),a&&(Ec||p||!h[kc])&&Ms(h,kc,g),Gs[t]=g,Gs[f]=Tc,i)if(u={values:d?g:l("values"),keys:o?g:l("keys"),entries:m},a)for(s in u)s in h||Vs(h,s,u[s]);else xs(xs.P+xs.F*(Ec||p),t,u);return u},Oc=function(e){return function(t,r){var n,i,o=String(as(t)),a=Ws(r),u=o.length;return a<0||a>=u?e?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):n:e?o.slice(a,a+2):i-56320+(n-55296<<10)+65536}}(!0);Pc(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=Oc(t,r),this._i+=e.length,{value:e,done:!1})});var Cc=function(e,t){return{value:t,done:!!e}};Pc(Array,"Array",function(e,t){this._t=us(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,Cc(1)):Cc(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");Gs.Arguments=Gs.Array;for(var Mc=hc("toStringTag"),jc="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),xc=0;xc<jc.length;xc++){var Rc=jc[xc],Ac=gs[Rc],Ic=Ac&&Ac.prototype;Ic&&!Ic[Mc]&&Ms(Ic,Mc,Rc),Gs[Rc]=Gs.Array}var Dc,Lc,Fc,Nc=hc("toStringTag"),Uc="Arguments"==is(function(){return arguments}()),zc=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Nc))?r:Uc?is(t):"Object"==(n=is(t))&&"function"==typeof t.callee?"Arguments":n},qc=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},Bc=function(e,t,r,n){try{return n?t(Ps(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&Ps(i.call(e)),t}},Wc=hc("iterator"),Vc=Array.prototype,Gc=function(e){return void 0!==e&&(Gs.Array===e||Vc[Wc]===e)},Hc=hc("iterator"),Jc=ks.getIteratorMethod=function(e){if(null!=e)return e[Hc]||e["@@iterator"]||Gs[zc(e)]},Yc=r(function(e){var t={},r={},n=e.exports=function(e,n,i,o,a){var u,s,c,l,f=a?function(){return e}:Jc(e),d=Ts(i,o,n?2:1),p=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(Gc(f)){for(u=Js(e.length);u>p;p++)if((l=n?d(Ps(s=e[p])[0],s[1]):d(e[p]))===t||l===r)return l}else for(c=f.call(e);!(s=c.next()).done;)if((l=Bc(c,d,s.value,n))===t||l===r)return l};n.BREAK=t,n.RETURN=r}),$c=hc("species"),Kc=function(e,t){var r,n=Ps(e).constructor;return void 0===n||null==(r=Ps(n)[$c])?t:Es(r)},Xc=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},Zc=gs.process,Qc=gs.setImmediate,el=gs.clearImmediate,tl=gs.MessageChannel,rl=gs.Dispatch,nl=0,il={},ol=function(){var e=+this;if(il.hasOwnProperty(e)){var t=il[e];delete il[e],t()}},al=function(e){ol.call(e.data)};Qc&&el||(Qc=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return il[++nl]=function(){Xc("function"==typeof e?e:Function(e),t)},Dc(nl),nl},el=function(e){delete il[e]},"process"==is(Zc)?Dc=function(e){Zc.nextTick(Ts(ol,e,1))}:rl&&rl.now?Dc=function(e){rl.now(Ts(ol,e,1))}:tl?(Fc=(Lc=new tl).port2,Lc.port1.onmessage=al,Dc=Ts(Fc.postMessage,Fc,1)):gs.addEventListener&&"function"==typeof postMessage&&!gs.importScripts?(Dc=function(e){gs.postMessage(e+"","*")},gs.addEventListener("message",al,!1)):Dc="onreadystatechange"in bs("script")?function(e){cc.appendChild(bs("script")).onreadystatechange=function(){cc.removeChild(this),ol.call(e)}}:function(e){setTimeout(Ts(ol,e,1),0)});var ul={set:Qc,clear:el},sl=ul.set,cl=gs.MutationObserver||gs.WebKitMutationObserver,ll=gs.process,fl=gs.Promise,dl="process"==is(ll);function pl(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=Es(t),this.reject=Es(r)}var hl={f:function(e){return new pl(e)}},vl=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},gl=gs.navigator,ml=gl&&gl.userAgent||"",yl=function(e,t){if(Ps(e),ls(t)&&t.constructor===e)return t;var r=hl.f(e);return(0,r.resolve)(t),r.promise},bl=function(e,t,r){for(var n in t)r&&e[n]?e[n]=t[n]:Ms(e,n,t[n]);return e},_l=hc("species"),wl=function(e){var t="function"==typeof ks[e]?ks[e]:gs[e];vs&&t&&!t[_l]&&Cs.f(t,_l,{configurable:!0,get:function(){return this}})},Sl=hc("iterator"),kl=!1;try{[7][Sl]().return=function(){kl=!0}}catch(e){}var El,Tl,Pl,Ol,Cl=function(e,t){if(!t&&!kl)return!1;var r=!1;try{var n=[7],i=n[Sl]();i.next=function(){return{done:r=!0}},n[Sl]=function(){return i},e(n)}catch(e){}return r},Ml=ul.set,jl=function(){var e,t,r,n=function(){var n,i;for(dl&&(n=ll.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(dl)r=function(){ll.nextTick(n)};else if(!cl||gs.navigator&&gs.navigator.standalone)if(fl&&fl.resolve){var i=fl.resolve(void 0);r=function(){i.then(n)}}else r=function(){sl.call(gs,n)};else{var o=!0,a=document.createTextNode("");new cl(n).observe(a,{characterData:!0}),r=function(){a.data=o=!o}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}(),xl=gs.TypeError,Rl=gs.process,Al=Rl&&Rl.versions,Il=Al&&Al.v8||"",Dl=gs.Promise,Ll="process"==zc(Rl),Fl=function(){},Nl=Tl=hl.f,Ul=!!function(){try{var e=Dl.resolve(1),t=(e.constructor={})[hc("species")]=function(e){e(Fl,Fl)};return(Ll||"function"==typeof PromiseRejectionEvent)&&e.then(Fl)instanceof t&&0!==Il.indexOf("6.6")&&-1===ml.indexOf("Chrome/66")}catch(e){}}(),zl=function(e){var t;return!(!ls(e)||"function"!=typeof(t=e.then))&&t},ql=function(e,t){if(!e._n){e._n=!0;var r=e._c;jl(function(){for(var n=e._v,i=1==e._s,o=0,a=function(t){var r,o,a,u=i?t.ok:t.fail,s=t.resolve,c=t.reject,l=t.domain;try{u?(i||(2==e._h&&Vl(e),e._h=1),!0===u?r=n:(l&&l.enter(),r=u(n),l&&(l.exit(),a=!0)),r===t.promise?c(xl("Promise-chain cycle")):(o=zl(r))?o.call(r,s,c):s(r)):c(n)}catch(e){l&&!a&&l.exit(),c(e)}};r.length>o;)a(r[o++]);e._c=[],e._n=!1,t&&!e._h&&Bl(e)})}},Bl=function(e){Ml.call(gs,function(){var t,r,n,i=e._v,o=Wl(e);if(o&&(t=vl(function(){Ll?Rl.emit("unhandledRejection",i,e):(r=gs.onunhandledrejection)?r({promise:e,reason:i}):(n=gs.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=Ll||Wl(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},Wl=function(e){return 1!==e._h&&0===(e._a||e._c).length},Vl=function(e){Ml.call(gs,function(){var t;Ll?Rl.emit("rejectionHandled",e):(t=gs.onrejectionhandled)&&t({promise:e,reason:e._v})})},Gl=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),ql(t,!0))},Hl=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw xl("Promise can't be resolved itself");(t=zl(e))?jl(function(){var n={_w:r,_d:!1};try{t.call(e,Ts(Hl,n,1),Ts(Gl,n,1))}catch(e){Gl.call(n,e)}}):(r._v=e,r._s=1,ql(r,!1))}catch(e){Gl.call({_w:r,_d:!1},e)}}};Ul||(Dl=function(e){qc(this,Dl,"Promise","_h"),Es(e),El.call(this);try{e(Ts(Hl,this,1),Ts(Gl,this,1))}catch(e){Gl.call(this,e)}},(El=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=bl(Dl.prototype,{then:function(e,t){var r=Nl(Kc(this,Dl));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Ll?Rl.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&ql(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Pl=function(){var e=new El;this.promise=e,this.resolve=Ts(Hl,e,1),this.reject=Ts(Gl,e,1)},hl.f=Nl=function(e){return e===Dl||e===Ol?new Pl(e):Tl(e)}),xs(xs.G+xs.W+xs.F*!Ul,{Promise:Dl}),mc(Dl,"Promise"),wl("Promise"),Ol=ks.Promise,xs(xs.S+xs.F*!Ul,"Promise",{reject:function(e){var t=Nl(this);return(0,t.reject)(e),t.promise}}),xs(xs.S+!0*xs.F,"Promise",{resolve:function(e){return yl(this===Ol?Dl:this,e)}}),xs(xs.S+xs.F*!(Ul&&Cl(function(e){Dl.all(e).catch(Fl)})),"Promise",{all:function(e){var t=this,r=Nl(t),n=r.resolve,i=r.reject,o=vl(function(){var r=[],o=0,a=1;Yc(e,!1,function(e){var u=o++,s=!1;r.push(void 0),a++,t.resolve(e).then(function(e){s||(s=!0,r[u]=e,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=Nl(t),n=r.reject,i=vl(function(){Yc(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}}),xs(xs.P+xs.R,"Promise",{finally:function(e){var t=Kc(this,ks.Promise||gs.Promise),r="function"==typeof e;return this.then(r?function(r){return yl(t,e()).then(function(){return r})}:e,r?function(r){return yl(t,e()).then(function(){throw r})}:e)}}),xs(xs.S,"Promise",{try:function(e){var t=hl.f(this),r=vl(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}});var Jl=ks.Promise,Yl=r(function(e){e.exports={default:Jl,__esModule:!0}});t(Yl);var $l={f:Object.getOwnPropertySymbols},Kl=Object.assign,Xl=!Kl||hs(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=Kl({},e)[r]||Object.keys(Kl({},t)).join("")!=n})?function(e,t){for(var r=bc(e),n=arguments.length,i=1,o=$l.f,a=ss.f;n>i;)for(var u,s=os(arguments[i++]),c=o?ac(s).concat(o(s)):ac(s),l=c.length,f=0;l>f;)a.call(s,u=c[f++])&&(r[u]=s[u]);return r}:Kl;xs(xs.S+xs.F,"Object",{assign:Xl});var Zl=ks.Object.assign,Ql=r(function(e){e.exports={default:Zl,__esModule:!0}});t(Ql);var ef=(gs.Reflect||{}).apply,tf=Function.apply;xs(xs.S+xs.F*!hs(function(){ef(function(){})}),"Reflect",{apply:function(e,t,r){var n=Es(e),i=Ps(r);return ef?ef(n,t,i):tf.call(n,t,i)}});var rf=ks.Reflect.apply,nf=r(function(e){e.exports={default:rf,__esModule:!0}});t(nf);var of=ks.JSON||(ks.JSON={stringify:JSON.stringify}),af=function(e){return of.stringify.apply(of,arguments)},uf=r(function(e){e.exports={default:af,__esModule:!0}});t(uf);var sf=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i};var cf=function(){this.__data__=[],this.size=0};var lf=function(e,t){return e===t||e!=e&&t!=t};var ff=function(e,t){for(var r=e.length;r--;)if(lf(e[r][0],t))return r;return-1},df=Array.prototype.splice;var pf=function(e){var t=this.__data__,r=ff(t,e);return!(r<0||(r==t.length-1?t.pop():df.call(t,r,1),--this.size,0))};var hf=function(e){var t=this.__data__,r=ff(t,e);return r<0?void 0:t[r][1]};var vf=function(e){return ff(this.__data__,e)>-1};var gf=function(e,t){var r=this.__data__,n=ff(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function mf(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}mf.prototype.clear=cf,mf.prototype.delete=pf,mf.prototype.get=hf,mf.prototype.has=vf,mf.prototype.set=gf;var yf=mf;var bf=function(){this.__data__=new yf,this.size=0};var _f=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var wf=function(e){return this.__data__.get(e)};var Sf=function(e){return this.__data__.has(e)},kf="object"==typeof e&&e&&e.Object===Object&&e,Ef="object"==typeof self&&self&&self.Object===Object&&self,Tf=kf||Ef||Function("return this")(),Pf=Tf.Symbol,Of=Object.prototype,Cf=Of.hasOwnProperty,Mf=Of.toString,jf=Pf?Pf.toStringTag:void 0;var xf=function(e){var t=Cf.call(e,jf),r=e[jf];try{e[jf]=void 0}catch(e){}var n=Mf.call(e);return t?e[jf]=r:delete e[jf],n},Rf=Object.prototype.toString;var Af=function(e){return Rf.call(e)},If="[object Null]",Df="[object Undefined]",Lf=Pf?Pf.toStringTag:void 0;var Ff=function(e){return null==e?void 0===e?Df:If:Lf&&Lf in Object(e)?xf(e):Af(e)};var Nf=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Uf="[object AsyncFunction]",zf="[object Function]",qf="[object GeneratorFunction]",Bf="[object Proxy]";var Wf,Vf=function(e){if(!Nf(e))return!1;var t=Ff(e);return t==zf||t==qf||t==Uf||t==Bf},Gf=Tf["__core-js_shared__"],Hf=(Wf=/[^.]+$/.exec(Gf&&Gf.keys&&Gf.keys.IE_PROTO||""))?"Symbol(src)_1."+Wf:"";var Jf=function(e){return!!Hf&&Hf in e},Yf=Function.prototype.toString;var $f=function(e){if(null!=e){try{return Yf.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Kf=/^\[object .+?Constructor\]$/,Xf=Function.prototype,Zf=Object.prototype,Qf=Xf.toString,ed=Zf.hasOwnProperty,td=RegExp("^"+Qf.call(ed).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var rd=function(e){return!(!Nf(e)||Jf(e))&&(Vf(e)?td:Kf).test($f(e))};var nd=function(e,t){return null==e?void 0:e[t]};var id=function(e,t){var r=nd(e,t);return rd(r)?r:void 0},od=id(Tf,"Map"),ad=id(Object,"create");var ud=function(){this.__data__=ad?ad(null):{},this.size=0};var sd=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},cd="__lodash_hash_undefined__",ld=Object.prototype.hasOwnProperty;var fd=function(e){var t=this.__data__;if(ad){var r=t[e];return r===cd?void 0:r}return ld.call(t,e)?t[e]:void 0},dd=Object.prototype.hasOwnProperty;var pd=function(e){var t=this.__data__;return ad?void 0!==t[e]:dd.call(t,e)},hd="__lodash_hash_undefined__";var vd=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ad&&void 0===t?hd:t,this};function gd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}gd.prototype.clear=ud,gd.prototype.delete=sd,gd.prototype.get=fd,gd.prototype.has=pd,gd.prototype.set=vd;var md=gd;var yd=function(){this.size=0,this.__data__={hash:new md,map:new(od||yf),string:new md}};var bd=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var _d=function(e,t){var r=e.__data__;return bd(t)?r["string"==typeof t?"string":"hash"]:r.map};var wd=function(e){var t=_d(this,e).delete(e);return this.size-=t?1:0,t};var Sd=function(e){return _d(this,e).get(e)};var kd=function(e){return _d(this,e).has(e)};var Ed=function(e,t){var r=_d(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Td(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Td.prototype.clear=yd,Td.prototype.delete=wd,Td.prototype.get=Sd,Td.prototype.has=kd,Td.prototype.set=Ed;var Pd=Td,Od=200;var Cd=function(e,t){var r=this.__data__;if(r instanceof yf){var n=r.__data__;if(!od||n.length<Od-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Pd(n)}return r.set(e,t),this.size=r.size,this};function Md(e){var t=this.__data__=new yf(e);this.size=t.size}Md.prototype.clear=bf,Md.prototype.delete=_f,Md.prototype.get=wf,Md.prototype.has=Sf,Md.prototype.set=Cd;var jd=Md;var xd=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},Rd=function(){try{var e=id(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Ad=function(e,t,r){"__proto__"==t&&Rd?Rd(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},Id=Object.prototype.hasOwnProperty;var Dd=function(e,t,r){var n=e[t];Id.call(e,t)&&lf(n,r)&&(void 0!==r||t in e)||Ad(e,t,r)};var Ld=function(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var u=t[o],s=n?n(r[u],e[u],u,r,e):void 0;void 0===s&&(s=e[u]),i?Ad(r,u,s):Dd(r,u,s)}return r};var Fd=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var Nd=function(e){return null!=e&&"object"==typeof e},Ud="[object Arguments]";var zd=function(e){return Nd(e)&&Ff(e)==Ud},qd=Object.prototype,Bd=qd.hasOwnProperty,Wd=qd.propertyIsEnumerable,Vd=zd(function(){return arguments}())?zd:function(e){return Nd(e)&&Bd.call(e,"callee")&&!Wd.call(e,"callee")},Gd=Array.isArray;var Hd=function(){return!1},Jd=r(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?Tf.Buffer:void 0,o=(i?i.isBuffer:void 0)||Hd;e.exports=o}),Yd=9007199254740991,$d=/^(?:0|[1-9]\d*)$/;var Kd=function(e,t){var r=typeof e;return!!(t=null==t?Yd:t)&&("number"==r||"symbol"!=r&&$d.test(e))&&e>-1&&e%1==0&&e<t},Xd=9007199254740991;var Zd=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Xd},Qd={};Qd["[object Float32Array]"]=Qd["[object Float64Array]"]=Qd["[object Int8Array]"]=Qd["[object Int16Array]"]=Qd["[object Int32Array]"]=Qd["[object Uint8Array]"]=Qd["[object Uint8ClampedArray]"]=Qd["[object Uint16Array]"]=Qd["[object Uint32Array]"]=!0,Qd["[object Arguments]"]=Qd["[object Array]"]=Qd["[object ArrayBuffer]"]=Qd["[object Boolean]"]=Qd["[object DataView]"]=Qd["[object Date]"]=Qd["[object Error]"]=Qd["[object Function]"]=Qd["[object Map]"]=Qd["[object Number]"]=Qd["[object Object]"]=Qd["[object RegExp]"]=Qd["[object Set]"]=Qd["[object String]"]=Qd["[object WeakMap]"]=!1;var ep=function(e){return Nd(e)&&Zd(e.length)&&!!Qd[Ff(e)]};var tp=function(e){return function(t){return e(t)}},rp=r(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&kf.process,o=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o}),np=rp&&rp.isTypedArray,ip=np?tp(np):ep,op=Object.prototype.hasOwnProperty;var ap=function(e,t){var r=Gd(e),n=!r&&Vd(e),i=!r&&!n&&Jd(e),o=!r&&!n&&!i&&ip(e),a=r||n||i||o,u=a?Fd(e.length,String):[],s=u.length;for(var c in e)!t&&!op.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Kd(c,s))||u.push(c);return u},up=Object.prototype;var sp=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||up)};var cp=function(e,t){return function(r){return e(t(r))}},lp=cp(Object.keys,Object),fp=Object.prototype.hasOwnProperty;var dp=function(e){if(!sp(e))return lp(e);var t=[];for(var r in Object(e))fp.call(e,r)&&"constructor"!=r&&t.push(r);return t};var pp=function(e){return null!=e&&Zd(e.length)&&!Vf(e)};var hp=function(e){return pp(e)?ap(e):dp(e)};var vp=function(e,t){return e&&Ld(t,hp(t),e)};var gp=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},mp=Object.prototype.hasOwnProperty;var yp=function(e){if(!Nf(e))return gp(e);var t=sp(e),r=[];for(var n in e)("constructor"!=n||!t&&mp.call(e,n))&&r.push(n);return r};var bp=function(e){return pp(e)?ap(e,!0):yp(e)};var _p=function(e,t){return e&&Ld(t,bp(t),e)},wp=r(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?Tf.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}});var Sp=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var kp=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o};var Ep=function(){return[]},Tp=Object.prototype.propertyIsEnumerable,Pp=Object.getOwnPropertySymbols,Op=Pp?function(e){return null==e?[]:(e=Object(e),kp(Pp(e),function(t){return Tp.call(e,t)}))}:Ep;var Cp=function(e,t){return Ld(e,Op(e),t)};var Mp=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},jp=cp(Object.getPrototypeOf,Object),xp=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Mp(t,Op(e)),e=jp(e);return t}:Ep;var Rp=function(e,t){return Ld(e,xp(e),t)};var Ap=function(e,t,r){var n=t(e);return Gd(e)?n:Mp(n,r(e))};var Ip=function(e){return Ap(e,hp,Op)};var Dp=function(e){return Ap(e,bp,xp)},Lp=id(Tf,"DataView"),Fp=id(Tf,"Promise"),Np=id(Tf,"Set"),Up=id(Tf,"WeakMap"),zp=$f(Lp),qp=$f(od),Bp=$f(Fp),Wp=$f(Np),Vp=$f(Up),Gp=Ff;(Lp&&"[object DataView]"!=Gp(new Lp(new ArrayBuffer(1)))||od&&"[object Map]"!=Gp(new od)||Fp&&"[object Promise]"!=Gp(Fp.resolve())||Np&&"[object Set]"!=Gp(new Np)||Up&&"[object WeakMap]"!=Gp(new Up))&&(Gp=function(e){var t=Ff(e),r="[object Object]"==t?e.constructor:void 0,n=r?$f(r):"";if(n)switch(n){case zp:return"[object DataView]";case qp:return"[object Map]";case Bp:return"[object Promise]";case Wp:return"[object Set]";case Vp:return"[object WeakMap]"}return t});var Hp=Gp,Jp=Object.prototype.hasOwnProperty;var Yp=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Jp.call(e,"index")&&(r.index=e.index,r.input=e.input),r},$p=Tf.Uint8Array;var Kp=function(e){var t=new e.constructor(e.byteLength);return new $p(t).set(new $p(e)),t};var Xp=function(e,t){var r=t?Kp(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},Zp=/\w*$/;var Qp=function(e){var t=new e.constructor(e.source,Zp.exec(e));return t.lastIndex=e.lastIndex,t},eh=Pf?Pf.prototype:void 0,th=eh?eh.valueOf:void 0;var rh=function(e){return th?Object(th.call(e)):{}};var nh=function(e,t){var r=t?Kp(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},ih="[object Boolean]",oh="[object Date]",ah="[object Map]",uh="[object Number]",sh="[object RegExp]",ch="[object Set]",lh="[object String]",fh="[object Symbol]",dh="[object ArrayBuffer]",ph="[object DataView]",hh="[object Float32Array]",vh="[object Float64Array]",gh="[object Int8Array]",mh="[object Int16Array]",yh="[object Int32Array]",bh="[object Uint8Array]",_h="[object Uint8ClampedArray]",wh="[object Uint16Array]",Sh="[object Uint32Array]";var kh=function(e,t,r){var n=e.constructor;switch(t){case dh:return Kp(e);case ih:case oh:return new n(+e);case ph:return Xp(e,r);case hh:case vh:case gh:case mh:case yh:case bh:case _h:case wh:case Sh:return nh(e,r);case ah:return new n;case uh:case lh:return new n(e);case sh:return Qp(e);case ch:return new n;case fh:return rh(e)}},Eh=Object.create,Th=function(){function e(){}return function(t){if(!Nf(t))return{};if(Eh)return Eh(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var Ph=function(e){return"function"!=typeof e.constructor||sp(e)?{}:Th(jp(e))},Oh="[object Map]";var Ch=function(e){return Nd(e)&&Hp(e)==Oh},Mh=rp&&rp.isMap,jh=Mh?tp(Mh):Ch,xh="[object Set]";var Rh=function(e){return Nd(e)&&Hp(e)==xh},Ah=rp&&rp.isSet,Ih=Ah?tp(Ah):Rh,Dh=1,Lh=2,Fh=4,Nh="[object Arguments]",Uh="[object Function]",zh="[object GeneratorFunction]",qh="[object Object]",Bh={};Bh[Nh]=Bh["[object Array]"]=Bh["[object ArrayBuffer]"]=Bh["[object DataView]"]=Bh["[object Boolean]"]=Bh["[object Date]"]=Bh["[object Float32Array]"]=Bh["[object Float64Array]"]=Bh["[object Int8Array]"]=Bh["[object Int16Array]"]=Bh["[object Int32Array]"]=Bh["[object Map]"]=Bh["[object Number]"]=Bh[qh]=Bh["[object RegExp]"]=Bh["[object Set]"]=Bh["[object String]"]=Bh["[object Symbol]"]=Bh["[object Uint8Array]"]=Bh["[object Uint8ClampedArray]"]=Bh["[object Uint16Array]"]=Bh["[object Uint32Array]"]=!0,Bh["[object Error]"]=Bh[Uh]=Bh["[object WeakMap]"]=!1;var Wh=function e(t,r,n,i,o,a){var u,s=r&Dh,c=r&Lh,l=r&Fh;if(n&&(u=o?n(t,i,o,a):n(t)),void 0!==u)return u;if(!Nf(t))return t;var f=Gd(t);if(f){if(u=Yp(t),!s)return Sp(t,u)}else{var d=Hp(t),p=d==Uh||d==zh;if(Jd(t))return wp(t,s);if(d==qh||d==Nh||p&&!o){if(u=c||p?{}:Ph(t),!s)return c?Rp(t,_p(u,t)):Cp(t,vp(u,t))}else{if(!Bh[d])return o?t:{};u=kh(t,d,s)}}a||(a=new jd);var h=a.get(t);if(h)return h;if(a.set(t,u),Ih(t))return t.forEach(function(i){u.add(e(i,r,n,i,t,a))}),u;if(jh(t))return t.forEach(function(i,o){u.set(o,e(i,r,n,o,t,a))}),u;var v=l?c?Dp:Ip:c?keysIn:hp,g=f?void 0:v(t);return xd(g||t,function(i,o){g&&(i=t[o=i]),Dd(u,o,e(i,r,n,o,t,a))}),u},Vh="[object Symbol]";var Gh=function(e){return"symbol"==typeof e||Nd(e)&&Ff(e)==Vh},Hh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jh=/^\w*$/;var Yh=function(e,t){if(Gd(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Gh(e))||Jh.test(e)||!Hh.test(e)||null!=t&&e in Object(t)},$h="Expected a function";function Kh(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError($h);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(Kh.Cache||Pd),r}Kh.Cache=Pd;var Xh=Kh,Zh=500;var Qh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ev=/\\(\\)?/g,tv=function(e){var t=Xh(e,function(e){return r.size===Zh&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Qh,function(e,r,n,i){t.push(n?i.replace(ev,"$1"):r||e)}),t}),rv=1/0,nv=Pf?Pf.prototype:void 0,iv=nv?nv.toString:void 0;var ov=function e(t){if("string"==typeof t)return t;if(Gd(t))return sf(t,e)+"";if(Gh(t))return iv?iv.call(t):"";var r=t+"";return"0"==r&&1/t==-rv?"-0":r};var av=function(e){return null==e?"":ov(e)};var uv=function(e,t){return Gd(e)?e:Yh(e,t)?[e]:tv(av(e))};var sv=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},cv=1/0;var lv=function(e){if("string"==typeof e||Gh(e))return e;var t=e+"";return"0"==t&&1/e==-cv?"-0":t};var fv=function(e,t){for(var r=0,n=(t=uv(t,e)).length;null!=e&&r<n;)e=e[lv(t[r++])];return r&&r==n?e:void 0};var dv=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o};var pv=function(e,t){return t.length<2?e:fv(e,dv(t,0,-1))};var hv=function(e,t){return t=uv(t,e),null==(e=pv(e,t))||delete e[lv(sv(t))]},vv="[object Object]",gv=Function.prototype,mv=Object.prototype,yv=gv.toString,bv=mv.hasOwnProperty,_v=yv.call(Object);var wv=function(e){if(!Nd(e)||Ff(e)!=vv)return!1;var t=jp(e);if(null===t)return!0;var r=bv.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&yv.call(r)==_v};var Sv=function(e){return wv(e)?void 0:e},kv=Pf?Pf.isConcatSpreadable:void 0;var Ev=function(e){return Gd(e)||Vd(e)||!!(kv&&e&&e[kv])};var Tv=function e(t,r,n,i,o){var a=-1,u=t.length;for(n||(n=Ev),o||(o=[]);++a<u;){var s=t[a];r>0&&n(s)?r>1?e(s,r-1,n,i,o):Mp(o,s):i||(o[o.length]=s)}return o};var Pv=function(e){return null!=e&&e.length?Tv(e,1):[]};var Ov=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},Cv=Math.max;var Mv=function(e,t,r){return t=Cv(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=Cv(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=n[i];return u[t]=r(a),Ov(e,this,u)}};var jv=function(e){return function(){return e}};var xv=function(e){return e},Rv=Rd?function(e,t){return Rd(e,"toString",{configurable:!0,enumerable:!1,value:jv(t),writable:!0})}:xv,Av=800,Iv=16,Dv=Date.now;var Lv=function(e){var t=0,r=0;return function(){var n=Dv(),i=Iv-(n-r);if(r=n,i>0){if(++t>=Av)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Fv=Lv(Rv);var Nv=function(e){return Fv(Mv(e,void 0,Pv),e+"")},Uv=Nv(function(e,t){var r={};if(null==e)return r;var n=!1;t=sf(t,function(t){return t=uv(t,e),n||(n=t.length>1),t}),Ld(e,Dp(e),r),n&&(r=Wh(r,7,Sv));for(var i=t.length;i--;)hv(r,t[i]);return r}),zv="[object Map]",qv="[object Set]",Bv=Object.prototype.hasOwnProperty;var Wv=function(e){if(null==e)return!0;if(pp(e)&&(Gd(e)||"string"==typeof e||"function"==typeof e.splice||Jd(e)||ip(e)||Vd(e)))return!e.length;var t=Hp(e);if(t==zv||t==qv)return!e.size;if(sp(e))return!dp(e).length;for(var r in e)if(Bv.call(e,r))return!1;return!0},Vv=1,Gv=4;var Hv=function(e){return Wh(e,Vv|Gv)};function Jv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Yv=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function $v(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function Kv(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Xv(Zv(e),function(n){var i=encodeURIComponent($v(n))+r;return Yv(e[n])?Xv(e[n],function(e){return i+encodeURIComponent($v(e))}).join(t):i+encodeURIComponent($v(e[n]))}).join(t):n?encodeURIComponent($v(n))+r+encodeURIComponent($v(e)):""}function Xv(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var Zv=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function Qv(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var s=0;s<u;++s){var c,l,f,d,p=e[s].replace(o,"%20"),h=p.indexOf(r);h>=0?(c=p.substr(0,h),l=p.substr(h+1)):(c=p,l=""),f=decodeURIComponent(c),d=decodeURIComponent(l),Jv(i,f)?Yv(i[f])?i[f].push(d):i[f]=[i[f],d]:i[f]=d}return i}var eg={encode:Kv,stringify:Kv,decode:Qv,parse:Qv},tg=2147483647,rg=36,ng=1,ig=26,og=38,ag=700,ug=72,sg=128,cg="-",lg=/[^\x20-\x7E]/,fg=/[\x2E\u3002\uFF0E\uFF61]/g,dg={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},pg=rg-ng,hg=Math.floor,vg=String.fromCharCode;function gg(e){throw new RangeError(dg[e])}function mg(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function yg(e,t,r){var n=0;for(e=r?hg(e/ag):e>>1,e+=hg(e/t);e>pg*ig>>1;n+=rg)e=hg(e/pg);return hg(n+(pg+1)*e/(e+og))}function bg(e){return function(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}((e=e.replace(fg,".")).split("."),t).join(".");return n+i}(e,function(e){return lg.test(e)?"xn--"+function(e){var t,r,n,i,o,a,u,s,c,l,f,d,p,h,v,g=[];for(d=(e=function(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}(e)).length,t=sg,r=0,o=ug,a=0;a<d;++a)(f=e[a])<128&&g.push(vg(f));for(n=i=g.length,i&&g.push(cg);n<d;){for(u=tg,a=0;a<d;++a)(f=e[a])>=t&&f<u&&(u=f);for(u-t>hg((tg-r)/(p=n+1))&&gg("overflow"),r+=(u-t)*p,t=u,a=0;a<d;++a)if((f=e[a])<t&&++r>tg&&gg("overflow"),f==t){for(s=r,c=rg;!(s<(l=c<=o?ng:c>=o+ig?ig:c-o));c+=rg)v=s-l,h=rg-l,g.push(vg(mg(l+v%h,0))),s=hg(v/h);g.push(vg(mg(s,0))),o=yg(r,p,n==i),r=0,++n}++r,++t}return g.join("")}(e):e})}var _g=[],wg=[],Sg="undefined"!=typeof Uint8Array?Uint8Array:Array,kg=!1;function Eg(){kg=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)_g[t]=e[t],wg[e.charCodeAt(t)]=t;wg["-".charCodeAt(0)]=62,wg["_".charCodeAt(0)]=63}function Tg(e,t,r){for(var n,i,o=[],a=t;a<r;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(_g[(i=n)>>18&63]+_g[i>>12&63]+_g[i>>6&63]+_g[63&i]);return o.join("")}function Pg(e){var t;kg||Eg();for(var r=e.length,n=r%3,i="",o=[],a=0,u=r-n;a<u;a+=16383)o.push(Tg(e,a,a+16383>u?u:a+16383));return 1===n?(t=e[r-1],i+=_g[t>>2],i+=_g[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=_g[t>>10],i+=_g[t>>4&63],i+=_g[t<<2&63],i+="="),o.push(i),o.join("")}function Og(e,t,r,n,i){var o,a,u=8*i-n-1,s=(1<<u)-1,c=s>>1,l=-7,f=r?i-1:0,d=r?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-l)-1,p>>=-l,l+=u;l>0;o=256*o+e[t+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+e[t+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)}function Cg(e,t,r,n,i,o){var a,u,s,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,h=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+f>=1?d/s:d*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(t*s-1)*Math.pow(2,i),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&u,p+=h,u/=256,i-=8);for(a=a<<i|u,c+=i;c>0;e[r+p]=255&a,p+=h,a/=256,c-=8);e[r+p-h]|=128*v}var Mg={}.toString,jg=Array.isArray||function(e){return"[object Array]"==Mg.call(e)};function xg(){return Ag.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Rg(e,t){if(xg()<t)throw new RangeError("Invalid typed array length");return Ag.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Ag.prototype:(null===e&&(e=new Ag(t)),e.length=t),e}function Ag(e,t,r){if(!(Ag.TYPED_ARRAY_SUPPORT||this instanceof Ag))return new Ag(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Lg(this,e)}return Ig(this,e,t,r)}function Ig(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);Ag.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Ag.prototype:e=Fg(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!Ag.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|zg(t,r),i=(e=Rg(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(Ug(t)){var r=0|Ng(t.length);return 0===(e=Rg(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?Rg(e,0):Fg(e,t);if("Buffer"===t.type&&jg(t.data))return Fg(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Dg(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Lg(e,t){if(Dg(t),e=Rg(e,t<0?0:0|Ng(t)),!Ag.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function Fg(e,t){var r=t.length<0?0:0|Ng(t.length);e=Rg(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function Ng(e){if(e>=xg())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+xg().toString(16)+" bytes");return 0|e}function Ug(e){return!(null==e||!e._isBuffer)}function zg(e,t){if(Ug(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return dm(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return pm(e).length;default:if(n)return dm(e).length;t=(""+t).toLowerCase(),n=!0}}function qg(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Bg(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=Ag.from(t,n)),Ug(t))return 0===t.length?-1:Wg(e,t,r,n,i);if("number"==typeof t)return t&=255,Ag.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Wg(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Wg(e,t,r,n,i){var o,a=1,u=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=r;o<u;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===s)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(r+s>u&&(r=u-s),o=r;o>=0;o--){for(var f=!0,d=0;d<s;d++)if(c(e,o+d)!==c(t,d)){f=!1;break}if(f)return o}return-1}function Vg(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[r+a]=u}return a}function Gg(e,t,r,n){return hm(dm(t,e.length-r),e,r,n)}function Hg(e,t,r,n){return hm(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function Jg(e,t,r,n){return Hg(e,t,r,n)}function Yg(e,t,r,n){return hm(pm(t),e,r,n)}function $g(e,t,r,n){return hm(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function Kg(e,t,r){return 0===t&&r===e.length?Pg(e):Pg(e.slice(t,r))}function Xg(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,u,s,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(s=(31&c)<<6|63&o)>127&&(l=s);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(s=(15&c)<<12|(63&o)<<6|63&a)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:o=e[i+1],a=e[i+2],u=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&u)&&(s=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=Zg)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Zg));return r}(n)}Ag.TYPED_ARRAY_SUPPORT=void 0===xu.TYPED_ARRAY_SUPPORT||xu.TYPED_ARRAY_SUPPORT,Ag.poolSize=8192,Ag._augment=function(e){return e.__proto__=Ag.prototype,e},Ag.from=function(e,t,r){return Ig(null,e,t,r)},Ag.TYPED_ARRAY_SUPPORT&&(Ag.prototype.__proto__=Uint8Array.prototype,Ag.__proto__=Uint8Array),Ag.alloc=function(e,t,r){return function(e,t,r,n){return Dg(t),t<=0?Rg(e,t):void 0!==r?"string"==typeof n?Rg(e,t).fill(r,n):Rg(e,t).fill(r):Rg(e,t)}(null,e,t,r)},Ag.allocUnsafe=function(e){return Lg(null,e)},Ag.allocUnsafeSlow=function(e){return Lg(null,e)},Ag.isBuffer=vm,Ag.compare=function(e,t){if(!Ug(e)||!Ug(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},Ag.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ag.concat=function(e,t){if(!jg(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Ag.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Ag.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!Ug(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},Ag.byteLength=zg,Ag.prototype._isBuffer=!0,Ag.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)qg(this,t,t+1);return this},Ag.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)qg(this,t,t+3),qg(this,t+1,t+2);return this},Ag.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)qg(this,t,t+7),qg(this,t+1,t+6),qg(this,t+2,t+5),qg(this,t+3,t+4);return this},Ag.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Xg(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return tm(this,t,r);case"utf8":case"utf-8":return Xg(this,t,r);case"ascii":return Qg(this,t,r);case"latin1":case"binary":return em(this,t,r);case"base64":return Kg(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rm(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},Ag.prototype.equals=function(e){if(!Ug(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Ag.compare(this,e)},Ag.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Ag.prototype.compare=function(e,t,r,n,i){if(!Ug(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),u=Math.min(o,a),s=this.slice(n,i),c=e.slice(t,r),l=0;l<u;++l)if(s[l]!==c[l]){o=s[l],a=c[l];break}return o<a?-1:a<o?1:0},Ag.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Ag.prototype.indexOf=function(e,t,r){return Bg(this,e,t,r,!0)},Ag.prototype.lastIndexOf=function(e,t,r){return Bg(this,e,t,r,!1)},Ag.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return Vg(this,e,t,r);case"utf8":case"utf-8":return Gg(this,e,t,r);case"ascii":return Hg(this,e,t,r);case"latin1":case"binary":return Jg(this,e,t,r);case"base64":return Yg(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $g(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Ag.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Zg=4096;function Qg(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function em(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function tm(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=fm(e[o]);return i}function rm(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function nm(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function im(e,t,r,n,i,o){if(!Ug(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function om(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function am(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function um(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function sm(e,t,r,n,i){return i||um(e,0,r,4),Cg(e,t,r,n,23,4),r+4}function cm(e,t,r,n,i){return i||um(e,0,r,8),Cg(e,t,r,n,52,8),r+8}Ag.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),Ag.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Ag.prototype;else{var i=t-e;r=new Ag(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},Ag.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||nm(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},Ag.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||nm(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},Ag.prototype.readUInt8=function(e,t){return t||nm(e,1,this.length),this[e]},Ag.prototype.readUInt16LE=function(e,t){return t||nm(e,2,this.length),this[e]|this[e+1]<<8},Ag.prototype.readUInt16BE=function(e,t){return t||nm(e,2,this.length),this[e]<<8|this[e+1]},Ag.prototype.readUInt32LE=function(e,t){return t||nm(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Ag.prototype.readUInt32BE=function(e,t){return t||nm(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Ag.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||nm(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},Ag.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||nm(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},Ag.prototype.readInt8=function(e,t){return t||nm(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Ag.prototype.readInt16LE=function(e,t){t||nm(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Ag.prototype.readInt16BE=function(e,t){t||nm(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Ag.prototype.readInt32LE=function(e,t){return t||nm(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Ag.prototype.readInt32BE=function(e,t){return t||nm(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Ag.prototype.readFloatLE=function(e,t){return t||nm(e,4,this.length),Og(this,e,!0,23,4)},Ag.prototype.readFloatBE=function(e,t){return t||nm(e,4,this.length),Og(this,e,!1,23,4)},Ag.prototype.readDoubleLE=function(e,t){return t||nm(e,8,this.length),Og(this,e,!0,52,8)},Ag.prototype.readDoubleBE=function(e,t){return t||nm(e,8,this.length),Og(this,e,!1,52,8)},Ag.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||im(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},Ag.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||im(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},Ag.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||im(this,e,t,1,255,0),Ag.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Ag.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||im(this,e,t,2,65535,0),Ag.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):om(this,e,t,!0),t+2},Ag.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||im(this,e,t,2,65535,0),Ag.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):om(this,e,t,!1),t+2},Ag.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||im(this,e,t,4,4294967295,0),Ag.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):am(this,e,t,!0),t+4},Ag.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||im(this,e,t,4,4294967295,0),Ag.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):am(this,e,t,!1),t+4},Ag.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);im(this,e,t,r,i-1,-i)}var o=0,a=1,u=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+r},Ag.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);im(this,e,t,r,i-1,-i)}var o=r-1,a=1,u=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+r},Ag.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||im(this,e,t,1,127,-128),Ag.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Ag.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||im(this,e,t,2,32767,-32768),Ag.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):om(this,e,t,!0),t+2},Ag.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||im(this,e,t,2,32767,-32768),Ag.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):om(this,e,t,!1),t+2},Ag.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||im(this,e,t,4,2147483647,-2147483648),Ag.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):am(this,e,t,!0),t+4},Ag.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||im(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Ag.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):am(this,e,t,!1),t+4},Ag.prototype.writeFloatLE=function(e,t,r){return sm(this,e,t,!0,r)},Ag.prototype.writeFloatBE=function(e,t,r){return sm(this,e,t,!1,r)},Ag.prototype.writeDoubleLE=function(e,t,r){return cm(this,e,t,!0,r)},Ag.prototype.writeDoubleBE=function(e,t,r){return cm(this,e,t,!1,r)},Ag.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!Ag.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},Ag.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Ag.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=Ug(e)?e:dm(new Ag(e,n).toString()),u=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%u]}return this};var lm=/[^+\/0-9A-Za-z-_]/g;function fm(e){return e<16?"0"+e.toString(16):e.toString(16)}function dm(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function pm(e){return function(e){var t,r,n,i,o,a;kg||Eg();var u=e.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[u-2]?2:"="===e[u-1]?1:0,a=new Sg(3*u/4-o),n=o>0?u-4:u;var s=0;for(t=0,r=0;t<n;t+=4,r+=3)i=wg[e.charCodeAt(t)]<<18|wg[e.charCodeAt(t+1)]<<12|wg[e.charCodeAt(t+2)]<<6|wg[e.charCodeAt(t+3)],a[s++]=i>>16&255,a[s++]=i>>8&255,a[s++]=255&i;return 2===o?(i=wg[e.charCodeAt(t)]<<2|wg[e.charCodeAt(t+1)]>>4,a[s++]=255&i):1===o&&(i=wg[e.charCodeAt(t)]<<10|wg[e.charCodeAt(t+1)]<<4|wg[e.charCodeAt(t+2)]>>2,a[s++]=i>>8&255,a[s++]=255&i),a}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(lm,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function hm(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function vm(e){return null!=e&&(!!e._isBuffer||gm(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&gm(e.slice(0,0))}(e))}function gm(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var mm="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},ym=/%[sdj%]/g;function bm(e){if(!Dm(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Em(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(ym,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<i;a=n[++r])Rm(a)||!Nm(a)?o+=" "+a:o+=" "+Em(a);return o}function _m(e,t){if(Lm(xu.process))return function(){return _m(e,t).apply(this,arguments)};var r=!1;return function(){return r||(console.error(t),r=!0),e.apply(this,arguments)}}var wm,Sm={};function km(e){if(Lm(wm)&&(wm=""),e=e.toUpperCase(),!Sm[e])if(new RegExp("\\b"+e+"\\b","i").test(wm)){Sm[e]=function(){var t=bm.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else Sm[e]=function(){};return Sm[e]}function Em(e,t){var r={seen:[],stylize:Pm};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),xm(t)?r.showHidden=t:t&&Gm(r,t),Lm(r.showHidden)&&(r.showHidden=!1),Lm(r.depth)&&(r.depth=2),Lm(r.colors)&&(r.colors=!1),Lm(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Tm),Om(r,e,r.depth)}function Tm(e,t){var r=Em.styles[t];return r?"["+Em.colors[r][0]+"m"+e+"["+Em.colors[r][1]+"m":e}function Pm(e,t){return e}function Om(e,t,r){if(e.customInspect&&t&&qm(t.inspect)&&t.inspect!==Em&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Dm(n)||(n=Om(e,n,r)),n}var i=function(e,t){if(Lm(t))return e.stylize("undefined","undefined");if(Dm(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Im(t))return e.stylize(""+t,"number");if(xm(t))return e.stylize(""+t,"boolean");if(Rm(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),a=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),zm(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Cm(t);if(0===o.length){if(qm(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(Fm(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Um(t))return e.stylize(Date.prototype.toString.call(t),"date");if(zm(t))return Cm(t)}var s,c="",l=!1,f=["{","}"];(jm(t)&&(l=!0,f=["[","]"]),qm(t))&&(c=" [Function"+(t.name?": "+t.name:"")+"]");return Fm(t)&&(c=" "+RegExp.prototype.toString.call(t)),Um(t)&&(c=" "+Date.prototype.toUTCString.call(t)),zm(t)&&(c=" "+Cm(t)),0!==o.length||l&&0!=t.length?r<0?Fm(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),s=l?function(e,t,r,n,i){for(var o=[],a=0,u=t.length;a<u;++a)Hm(t,String(a))?o.push(Mm(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(Mm(e,t,r,n,i,!0))}),o}(e,t,r,a,o):o.map(function(n){return Mm(e,t,r,a,n,l)}),e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(s,c,f)):f[0]+c+f[1]}function Cm(e){return"["+Error.prototype.toString.call(e)+"]"}function Mm(e,t,r,n,i,o){var a,u,s;if((s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(u=e.stylize("[Setter]","special")),Hm(n,i)||(a="["+i+"]"),u||(e.seen.indexOf(s.value)<0?(u=Rm(r)?Om(e,s.value,null):Om(e,s.value,r-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),Lm(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function jm(e){return Array.isArray(e)}function xm(e){return"boolean"==typeof e}function Rm(e){return null===e}function Am(e){return null==e}function Im(e){return"number"==typeof e}function Dm(e){return"string"==typeof e}function Lm(e){return void 0===e}function Fm(e){return Nm(e)&&"[object RegExp]"===Bm(e)}function Nm(e){return"object"==typeof e&&null!==e}function Um(e){return Nm(e)&&"[object Date]"===Bm(e)}function zm(e){return Nm(e)&&("[object Error]"===Bm(e)||e instanceof Error)}function qm(e){return"function"==typeof e}function Bm(e){return Object.prototype.toString.call(e)}function Wm(e){return e<10?"0"+e.toString(10):e.toString(10)}Em.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Em.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Vm=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Gm(e,t){if(!t||!Nm(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Hm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Jm={inherits:mm,_extend:Gm,log:function(){var e,t;console.log("%s - %s",(e=new Date,t=[Wm(e.getHours()),Wm(e.getMinutes()),Wm(e.getSeconds())].join(":"),[e.getDate(),Vm[e.getMonth()],t].join(" ")),bm.apply(null,arguments))},isBuffer:function(e){return vm(e)},isPrimitive:function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},isFunction:qm,isError:zm,isDate:Um,isObject:Nm,isRegExp:Fm,isUndefined:Lm,isSymbol:function(e){return"symbol"==typeof e},isString:Dm,isNumber:Im,isNullOrUndefined:Am,isNull:Rm,isBoolean:xm,isArray:jm,inspect:Em,deprecate:_m,format:bm,debuglog:km},Ym={parse:cy,resolve:function(e,t){return cy(e,!1,!0).resolve(t)},resolveObject:function(e,t){return e?cy(e,!1,!0).resolveObject(t):t},format:function(e){Dm(e)&&(e=ly({},e));return fy(e)},Url:$m};function $m(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Km=/^([a-z0-9.+-]+:)/i,Xm=/:[0-9]*$/,Zm=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Qm=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),ey=["'"].concat(Qm),ty=["%","/","?",";","#"].concat(ey),ry=["/","?","#"],ny=255,iy=/^[+a-z0-9A-Z_-]{0,63}$/,oy=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ay={javascript:!0,"javascript:":!0},uy={javascript:!0,"javascript:":!0},sy={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function cy(e,t,r){if(e&&Nm(e)&&e instanceof $m)return e;var n=new $m;return n.parse(e,t,r),n}function ly(e,t,r,n){if(!Dm(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=-1!==i&&i<t.indexOf("#")?"?":"#",a=t.split(o);a[0]=a[0].replace(/\\/g,"/");var u=t=a.join(o);if(u=u.trim(),!n&&1===t.split("#").length){var s=Zm.exec(u);if(s)return e.path=u,e.href=u,e.pathname=s[1],s[2]?(e.search=s[2],e.query=r?Qv(e.search.substr(1)):e.search.substr(1)):r&&(e.search="",e.query={}),e}var c,l,f,d,p=Km.exec(u);if(p){var h=(p=p[0]).toLowerCase();e.protocol=h,u=u.substr(p.length)}if(n||p||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var v="//"===u.substr(0,2);!v||p&&uy[p]||(u=u.substr(2),e.slashes=!0)}if(!uy[p]&&(v||p&&!sy[p])){var g,m,y=-1;for(c=0;c<ry.length;c++)-1!==(l=u.indexOf(ry[c]))&&(-1===y||l<y)&&(y=l);for(-1!==(m=-1===y?u.lastIndexOf("@"):u.lastIndexOf("@",y))&&(g=u.slice(0,m),u=u.slice(m+1),e.auth=decodeURIComponent(g)),y=-1,c=0;c<ty.length;c++)-1!==(l=u.indexOf(ty[c]))&&(-1===y||l<y)&&(y=l);-1===y&&(y=u.length),e.host=u.slice(0,y),u=u.slice(y),dy(e),e.hostname=e.hostname||"";var b="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!b){var _=e.hostname.split(/\./);for(c=0,f=_.length;c<f;c++){var w=_[c];if(w&&!w.match(iy)){for(var S="",k=0,E=w.length;k<E;k++)w.charCodeAt(k)>127?S+="x":S+=w[k];if(!S.match(iy)){var T=_.slice(0,c),P=_.slice(c+1),O=w.match(oy);O&&(T.push(O[1]),P.unshift(O[2])),P.length&&(u="/"+P.join(".")+u),e.hostname=T.join(".");break}}}}e.hostname.length>ny?e.hostname="":e.hostname=e.hostname.toLowerCase(),b||(e.hostname=bg(e.hostname)),d=e.port?":"+e.port:"";var C=e.hostname||"";e.host=C+d,e.href+=e.host,b&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!ay[h])for(c=0,f=ey.length;c<f;c++){var M=ey[c];if(-1!==u.indexOf(M)){var j=encodeURIComponent(M);j===M&&(j=escape(M)),u=u.split(M).join(j)}}var x=u.indexOf("#");-1!==x&&(e.hash=u.substr(x),u=u.slice(0,x));var R=u.indexOf("?");if(-1!==R?(e.search=u.substr(R),e.query=u.substr(R+1),r&&(e.query=Qv(e.query)),u=u.slice(0,R)):r&&(e.search="",e.query={}),u&&(e.pathname=u),sy[h]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){d=e.pathname||"";var A=e.search||"";e.path=d+A}return e.href=fy(e),e}function fy(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",o=!1,a="";e.host?o=t+e.host:e.hostname&&(o=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&Nm(e.query)&&Object.keys(e.query).length&&(a=Kv(e.query));var u=e.search||a&&"?"+a||"";return r&&":"!==r.substr(-1)&&(r+=":"),e.slashes||(!r||sy[r])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),u&&"?"!==u.charAt(0)&&(u="?"+u),r+o+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(u=u.replace("#","%23"))+i}function dy(e){var t=e.host,r=Xm.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}$m.prototype.parse=function(e,t,r){return ly(this,e,t,r)},$m.prototype.format=function(){return fy(this)},$m.prototype.resolve=function(e){return this.resolveObject(cy(e,!1,!0)).format()},$m.prototype.resolveObject=function(e){if(Dm(e)){var t=new $m;t.parse(e,!1,!0),e=t}for(var r,n=new $m,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),s=0;s<u.length;s++){var c=u[s];"protocol"!==c&&(n[c]=e[c])}return sy[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!sy[e.protocol]){for(var l=Object.keys(e),f=0;f<l.length;f++){var d=l[f];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||uy[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",h=n.search||"";n.path=p+h}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v,g=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=m||g||n.host&&e.pathname,b=y,_=n.pathname&&n.pathname.split("/")||[],w=n.protocol&&!sy[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],w&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),y=y&&(""===r[0]||""===_[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,_=r;else if(r.length)_||(_=[]),_.pop(),_=_.concat(r),n.search=e.search,n.query=e.query;else if(!Am(e.search))return w&&(n.hostname=n.host=_.shift(),(v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),n.search=e.search,n.query=e.query,Rm(n.pathname)&&Rm(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=_.slice(-1)[0],k=(n.host||e.host||_.length>1)&&("."===S||".."===S)||""===S,E=0,T=_.length;T>=0;T--)"."===(S=_[T])?_.splice(T,1):".."===S?(_.splice(T,1),E++):E&&(_.splice(T,1),E--);if(!y&&!b)for(;E--;E)_.unshift("..");!y||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),k&&"/"!==_.join("/").substr(-1)&&_.push("");var P=""===_[0]||_[0]&&"/"===_[0].charAt(0);return w&&(n.hostname=n.host=P?"":_.length?_.shift():"",(v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),(y=y||n.host&&_.length)&&!P&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),Rm(n.pathname)&&Rm(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},$m.prototype.parseHost=function(){return dy(this)};var py={version:"1.0.0",encode:function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decode:function(e){return new Ag(e=(e+=Array(5-e.length%4).join("=")).replace(/\-/g,"+").replace(/\_/g,"/"),"base64")},validate:function(e){return/^[A-Za-z0-9\-_]+$/.test(e)}},hy=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase64url=i,t.toBase64Url=o,t.encode=a,t.decode=u,t.validate=s;var r,n=(r=py)&&r.__esModule?r:{default:r};function i(e){return n.default.decode(e).toString()}function o(e){var t=e;return vm(t)||(t=Ag.from(t)),n.default.encode(t)}function a(e){return o(e)}function u(e){return i(e)}function s(e){return n.default.validate(e)}t.default={fromBase64url:i,toBase64Url:o,encode:a,decode:u,validate:s}});t(hy);hy.fromBase64url,hy.toBase64Url,hy.encode,hy.decode,hy.validate;var vy=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=nf)&&r.__esModule?r:{default:r};t.default=function(e,t,r){if(!e)throw new Error("`fn` must be a function");if(!t)throw new Error("`wait` is required");if(!(r=r||{}).maxWait)throw new Error("`options.maxWait` is required");if(!r.maxCalls)throw new Error("`options.maxCalls` is required");var i=r,o=i.maxCalls,a=i.maxWait,u=0,s=void 0,c=void 0;return function(){u+=1,clearTimeout(c),c=setTimeout(function(){return l()},t),s||(s=setTimeout(function(){return l()},a)),u>=o&&(0,n.default)(l,this,[])};function l(){clearTimeout(c),c=null,clearTimeout(s),s=null,u=0,(0,n.default)(e,this,[])}}});t(vy);var gy=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.forEach(function(e){if(!t[e])throw new Error("missing required property "+e+" from "+t)})}});t(gy);var my=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=Yl)&&r.__esModule?r:{default:r};t.default=function(){var e=this;this.promise=new n.default(function(t,r){e.resolve=t,e.reject=r})}});t(my);var yy=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e||!t)throw new Error("missing parameter for makeStateDataType");return{dataType:{set:function(r){return r instanceof e?(r.parent=this,{val:r,type:t}):{val:r?new e(r,{parent:this}):void 0,type:t}},compare:function(e,t){return e===t},onChange:function(e,t,r){t&&this.stopListening(t,"all",this._getCachedEventBubblingHandler(r)),e&&this.listenTo(e,"all",this._getCachedEventBubblingHandler(r))}},prop:{test:function(e){return!!e&&(e.parent=this,!1)},type:t}}}});t(yy);var by=r(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}});t(by),xs(xs.S+xs.F*!vs,"Object",{defineProperty:Cs.f});var _y=ks.Object,wy=function(e,t,r){return _y.defineProperty(e,t,r)},Sy=r(function(e){e.exports={default:wy,__esModule:!0}});t(Sy);var ky=r(function(e,t){t.__esModule=!0;var r,n=(r=Sy)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(e,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()});t(ky);var Ey=Array.isArray||function(e){return"Array"==is(e)},Ty=hc("species"),Py=function(e,t){return new(function(e){var t;return Ey(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Ey(t.prototype)||(t=void 0),ls(t)&&null===(t=t[Ty])&&(t=void 0)),void 0===t?Array:t}(e))(t)},Oy=function(e,t){var r=1==e,n=2==e,i=3==e,o=4==e,a=6==e,u=5==e||a,s=t||Py;return function(t,c,l){for(var f,d,p=bc(t),h=os(p),v=Ts(c,l,3),g=Js(h.length),m=0,y=r?s(t,g):n?s(t,0):void 0;g>m;m++)if((u||m in h)&&(d=v(f=h[m],m,p),e))if(r)y[m]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return m;case 2:y.push(f)}else if(o)return!1;return a?-1:i||o?o:y}},Cy=r(function(e){var t=Qs("meta"),r=Cs.f,n=0,i=Object.isExtensible||function(){return!0},o=!hs(function(){return i(Object.preventExtensions({}))}),a=function(e){r(e,t,{value:{i:"O"+ ++n,w:{}}})},u=e.exports={KEY:t,NEED:!1,fastKey:function(e,r){if(!ls(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!ps(e,t)){if(!i(e))return"F";if(!r)return"E";a(e)}return e[t].i},getWeak:function(e,r){if(!ps(e,t)){if(!i(e))return!0;if(!r)return!1;a(e)}return e[t].w},onFreeze:function(e){return o&&u.NEED&&i(e)&&!ps(e,t)&&a(e),e}}}),My=(Cy.KEY,Cy.NEED,Cy.fastKey,Cy.getWeak,Cy.onFreeze,function(e,t){if(!ls(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}),jy=Cy.getWeak,xy=Oy(5),Ry=Oy(6),Ay=0,Iy=function(e){return e._l||(e._l=new Dy)},Dy=function(){this.a=[]},Ly=function(e,t){return xy(e.a,function(e){return e[0]===t})};Dy.prototype={get:function(e){var t=Ly(this,e);if(t)return t[1]},has:function(e){return!!Ly(this,e)},set:function(e,t){var r=Ly(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=Ry(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}};var Fy={getConstructor:function(e,t,r,n){var i=e(function(e,o){qc(e,i,t,"_i"),e._t=t,e._i=Ay++,e._l=void 0,null!=o&&Yc(o,r,e[n],e)});return bl(i.prototype,{delete:function(e){if(!ls(e))return!1;var r=jy(e);return!0===r?Iy(My(this,t)).delete(e):r&&ps(r,this._i)&&delete r[this._i]},has:function(e){if(!ls(e))return!1;var r=jy(e);return!0===r?Iy(My(this,t)).has(e):r&&ps(r,this._i)}}),i},def:function(e,t,r){var n=jy(Ps(t),!0);return!0===n?Iy(e).set(t,r):n[e._i]=r,e},ufstore:Iy},Ny=Cs.f,Uy=Oy(0),zy=function(e,t,r,n,i,o){var a=gs[e],u=a,s=i?"set":"add",c=u&&u.prototype,l={};return vs&&"function"==typeof u&&(o||c.forEach&&!hs(function(){(new u).entries().next()}))?(u=t(function(t,r){qc(t,u,e,"_c"),t._c=new a,null!=r&&Yc(r,i,t[s],t)}),Uy("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in c&&(!o||"clear"!=e)&&Ms(u.prototype,e,function(r,n){if(qc(this,u,e),!t&&o&&!ls(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i})}),o||Ny(u.prototype,"size",{get:function(){return this._c.size}})):(u=n.getConstructor(t,e,i,s),bl(u.prototype,r),Cy.NEED=!0),mc(u,e),l[e]=u,xs(xs.G+xs.W+xs.F,l),o||n.setStrong(u,e,i),u},qy=(r(function(e){var t,r=Oy(0),n=Cy.getWeak,i=Object.isExtensible,o=Fy.ufstore,a={},u=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},s={get:function(e){if(ls(e)){var t=n(e);return!0===t?o(My(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return Fy.def(My(this,"WeakMap"),e,t)}},c=e.exports=zy("WeakMap",u,s,Fy,!0,!0);hs(function(){return 7!=(new c).set((Object.freeze||Object)(a),7).get(a)})&&(t=Fy.getConstructor(u,"WeakMap"),Xl(t.prototype,s),Cy.NEED=!0,r(["delete","has","get","set"],function(e){var r=c.prototype,n=r[e];Vs(r,e,function(r,o){if(ls(r)&&!i(r)){this._f||(this._f=new t);var a=this._f[e](r,o);return"set"==e?this:a}return n.call(this,r,o)})}))}),function(e){xs(xs.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})});qy("WeakMap");var By=function(e){xs(xs.S,e,{from:function(e){var t,r,n,i,o=arguments[1];return Es(this),(t=void 0!==o)&&Es(o),null==e?new this:(r=[],t?(n=0,i=Ts(o,arguments[2],2),Yc(e,!1,function(e){r.push(i(e,n++))})):Yc(e,!1,r.push,r),new this(r))}})};By("WeakMap");var Wy=ks.WeakMap,Vy=r(function(e){e.exports={default:Wy,__esModule:!0}});t(Vy);var Gy=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(by),n=a(ky),i=a(Vy),o=a(Jm);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(e.add)e.add.apply(e,r);else if(e.set)e.set.apply(e,r);else{if(!e.push)throw new TypeError("Could not determine how to insert into the specified container");e.push.apply(e,r)}}t.default=function e(){for(var t=arguments.length,a=Array(t),s=0;s<t;s++)a[s]=arguments[s];var c=a.shift(),l=new i.default,f=new i.default,d=a.length>1?e.apply(void 0,a):a[0],p="("+[c.name].concat(a.map(function(e){return e.name})).join(", ")+")";return function(){function e(){(0,r.default)(this,e);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];l.set(this,new(Function.prototype.bind.apply(c,[null].concat(n)))),f.set(this,0)}return(0,n.default)(e,[{key:"add",value:function(){return this.set.apply(this,arguments)}},{key:"clear",value:function(){var e=l.get(this).clear();return f.set(this,0),e}},{key:"delete",value:function(e){for(var t=l.get(this),r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t.delete(e);var o=t.get(e);if(!o)return!1;var a=o.delete.apply(o,n);return a&&f.set(this,f.get(this)-1),0===o.size&&t.delete(e),a}},{key:"get",value:function(e){var t=l.get(this);if(!t.get)return t;for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t.get(e);var o=t.get(e);return o?o.get?o.get.apply(o,n):o:void 0}},{key:"has",value:function(){return void 0!==this.get.apply(this,arguments)}},{key:"set",value:function(){for(var e=!1,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];this.has.apply(this,r)&&(e=!0);var i=l.get(this),o=r.shift();if(!i.get)return u.apply(void 0,[i,o].concat(r)),this;var a=i.get(o);if(!a){if(!d)return u.apply(void 0,[i,o].concat(r)),this;u(i,o,a=new d)}return u.apply(void 0,[a].concat(r)),e||f.set(this,f.get(this)+1),this}},{key:"inspect",value:function(){return"Container"+p+" {\n  "+o.default.inspect(l.get(this),{depth:null})+"\n}"}},{key:"size",get:function(){return f.get(this)}}]),e}()}});t(Gy);var Hy={f:hc},Jy=Hy.f("iterator"),Yy=r(function(e){e.exports={default:Jy,__esModule:!0}});t(Yy);var $y=Cs.f,Ky=function(e){var t=ks.Symbol||(ks.Symbol={});"_"==e.charAt(0)||e in t||$y(t,e,{value:Hy.f(e)})},Xy=oc.concat("length","prototype"),Zy={f:Object.getOwnPropertyNames||function(e){return ic(e,Xy)}},Qy=Zy.f,eb={}.toString,tb="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],rb={f:function(e){return tb&&"[object Window]"==eb.call(e)?function(e){try{return Qy(e)}catch(e){return tb.slice()}}(e):Qy(us(e))}},nb=Cy.KEY,ib=Ss.f,ob=Cs.f,ab=rb.f,ub=gs.Symbol,sb=gs.JSON,cb=sb&&sb.stringify,lb=hc("_hidden"),fb=hc("toPrimitive"),db={}.propertyIsEnumerable,pb=Ks("symbol-registry"),hb=Ks("symbols"),vb=Ks("op-symbols"),gb=Object.prototype,mb="function"==typeof ub,yb=gs.QObject,bb=!yb||!yb.prototype||!yb.prototype.findChild,_b=vs&&hs(function(){return 7!=pc(ob({},"a",{get:function(){return ob(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=ib(gb,t);n&&delete gb[t],ob(e,t,r),n&&e!==gb&&ob(gb,t,n)}:ob,wb=function(e){var t=hb[e]=pc(ub.prototype);return t._k=e,t},Sb=mb&&"symbol"==typeof ub.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof ub},kb=function(e,t,r){return e===gb&&kb(vb,t,r),Ps(e),t=fs(t,!0),Ps(r),ps(hb,t)?(r.enumerable?(ps(e,lb)&&e[lb][t]&&(e[lb][t]=!1),r=pc(r,{enumerable:cs(0,!1)})):(ps(e,lb)||ob(e,lb,cs(1,{})),e[lb][t]=!0),_b(e,t,r)):ob(e,t,r)},Eb=function(e,t){Ps(e);for(var r,n=function(e){var t=ac(e),r=$l.f;if(r)for(var n,i=r(e),o=ss.f,a=0;i.length>a;)o.call(e,n=i[a++])&&t.push(n);return t}(t=us(t)),i=0,o=n.length;o>i;)kb(e,r=n[i++],t[r]);return e},Tb=function(e){var t=db.call(this,e=fs(e,!0));return!(this===gb&&ps(hb,e)&&!ps(vb,e))&&(!(t||!ps(this,e)||!ps(hb,e)||ps(this,lb)&&this[lb][e])||t)},Pb=function(e,t){if(e=us(e),t=fs(t,!0),e!==gb||!ps(hb,t)||ps(vb,t)){var r=ib(e,t);return!r||!ps(hb,t)||ps(e,lb)&&e[lb][t]||(r.enumerable=!0),r}},Ob=function(e){for(var t,r=ab(us(e)),n=[],i=0;r.length>i;)ps(hb,t=r[i++])||t==lb||t==nb||n.push(t);return n},Cb=function(e){for(var t,r=e===gb,n=ab(r?vb:us(e)),i=[],o=0;n.length>o;)!ps(hb,t=n[o++])||r&&!ps(gb,t)||i.push(hb[t]);return i};mb||(Vs((ub=function(){if(this instanceof ub)throw TypeError("Symbol is not a constructor!");var e=Qs(arguments.length>0?arguments[0]:void 0),t=function(r){this===gb&&t.call(vb,r),ps(this,lb)&&ps(this[lb],e)&&(this[lb][e]=!1),_b(this,e,cs(1,r))};return vs&&bb&&_b(gb,e,{configurable:!0,set:t}),wb(e)}).prototype,"toString",function(){return this._k}),Ss.f=Pb,Cs.f=kb,Zy.f=rb.f=Ob,ss.f=Tb,$l.f=Cb,Hy.f=function(e){return wb(hc(e))}),xs(xs.G+xs.W+xs.F*!mb,{Symbol:ub});for(var Mb="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),jb=0;Mb.length>jb;)hc(Mb[jb++]);for(var xb=ac(hc.store),Rb=0;xb.length>Rb;)Ky(xb[Rb++]);xs(xs.S+xs.F*!mb,"Symbol",{for:function(e){return ps(pb,e+="")?pb[e]:pb[e]=ub(e)},keyFor:function(e){if(!Sb(e))throw TypeError(e+" is not a symbol!");for(var t in pb)if(pb[t]===e)return t},useSetter:function(){bb=!0},useSimple:function(){bb=!1}}),xs(xs.S+xs.F*!mb,"Object",{create:function(e,t){return void 0===t?pc(e):Eb(pc(e),t)},defineProperty:kb,defineProperties:Eb,getOwnPropertyDescriptor:Pb,getOwnPropertyNames:Ob,getOwnPropertySymbols:Cb}),sb&&xs(xs.S+xs.F*(!mb||hs(function(){var e=ub();return"[null]"!=cb([e])||"{}"!=cb({a:e})||"{}"!=cb(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(ls(t)||void 0!==e)&&!Sb(e))return Ey(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Sb(t))return t}),n[1]=t,cb.apply(sb,n)}}),ub.prototype[fb]||Ms(ub.prototype,fb,ub.prototype.valueOf),mc(ub,"Symbol"),mc(Math,"Math",!0),mc(gs.JSON,"JSON",!0),Ky("asyncIterator"),Ky("observable");var Ab=ks.Symbol,Ib=r(function(e){e.exports={default:Ab,__esModule:!0}});t(Ib);var Db=r(function(e,t){t.__esModule=!0;var r=o(Yy),n=o(Ib),i="function"==typeof n.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof n.default&&"symbol"===i(r.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":void 0===e?"undefined":i(e)}});t(Db);var Lb=Cs.f,Fb=Cy.fastKey,Nb=vs?"_s":"size",Ub=function(e,t){var r,n=Fb(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r},zb={getConstructor:function(e,t,r,n){var i=e(function(e,o){qc(e,i,t,"_i"),e._t=t,e._i=pc(null),e._f=void 0,e._l=void 0,e[Nb]=0,null!=o&&Yc(o,r,e[n],e)});return bl(i.prototype,{clear:function(){for(var e=My(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[Nb]=0},delete:function(e){var r=My(this,t),n=Ub(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[Nb]--}return!!n},forEach:function(e){My(this,t);for(var r,n=Ts(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!Ub(My(this,t),e)}}),vs&&Lb(i.prototype,"size",{get:function(){return My(this,t)[Nb]}}),i},def:function(e,t,r){var n,i,o=Ub(e,t);return o?o.v=r:(e._l=o={i:i=Fb(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[Nb]++,"F"!==i&&(e._i[i]=o)),e},getEntry:Ub,setStrong:function(e,t,r){Pc(e,t,function(e,r){this._t=My(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?Cc(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,Cc(1))},r?"entries":"values",!r,!0),wl(t)}},qb=(zy("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=zb.getEntry(My(this,"Map"),e);return t&&t.v},set:function(e,t){return zb.def(My(this,"Map"),0===e?0:e,t)}},zb,!0),function(e){return function(){if(zc(this)!=e)throw TypeError(e+"#toJSON isn't generic");return Yc(this,!1,(r=[]).push,r,t),r;var t,r}});xs(xs.P+xs.R,"Map",{toJSON:qb("Map")}),qy("Map"),By("Map");var Bb=ks.Map,Wb=r(function(e){e.exports={default:Bb,__esModule:!0}});t(Wb);var Vb=function(e){return"function"==typeof e?e:xv};var Gb=function(e,t){return Fv(Mv(e,t,xv),e+"")},Hb=Up&&new Up,Jb=Hb?function(e,t){return Hb.set(e,t),e}:xv;var Yb=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Th(e.prototype),n=e.apply(r,t);return Nf(n)?n:r}},$b=1;var Kb=function(e,t,r){var n=t&$b,i=Yb(e);return function t(){return(this&&this!==Tf&&this instanceof t?i:e).apply(n?r:this,arguments)}},Xb=Math.max;var Zb=function(e,t,r,n){for(var i=-1,o=e.length,a=r.length,u=-1,s=t.length,c=Xb(o-a,0),l=Array(s+c),f=!n;++u<s;)l[u]=t[u];for(;++i<a;)(f||i<o)&&(l[r[i]]=e[i]);for(;c--;)l[u++]=e[i++];return l},Qb=Math.max;var e_=function(e,t,r,n){for(var i=-1,o=e.length,a=-1,u=r.length,s=-1,c=t.length,l=Qb(o-u,0),f=Array(l+c),d=!n;++i<l;)f[i]=e[i];for(var p=i;++s<c;)f[p+s]=t[s];for(;++a<u;)(d||i<o)&&(f[p+r[a]]=e[i++]);return f};var t_=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n};var r_=function(){},n_=4294967295;function i_(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=n_,this.__views__=[]}i_.prototype=Th(r_.prototype),i_.prototype.constructor=i_;var o_=i_;var a_=function(){},u_=Hb?function(e){return Hb.get(e)}:a_,s_={},c_=Object.prototype.hasOwnProperty;var l_=function(e){for(var t=e.name+"",r=s_[t],n=c_.call(s_,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t};function f_(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}f_.prototype=Th(r_.prototype),f_.prototype.constructor=f_;var d_=f_;var p_=function(e){if(e instanceof o_)return e.clone();var t=new d_(e.__wrapped__,e.__chain__);return t.__actions__=Sp(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},h_=Object.prototype.hasOwnProperty;function v_(e){if(Nd(e)&&!Gd(e)&&!(e instanceof o_)){if(e instanceof d_)return e;if(h_.call(e,"__wrapped__"))return p_(e)}return new d_(e)}v_.prototype=r_.prototype,v_.prototype.constructor=v_;var g_=v_;var m_=function(e){var t=l_(e),r=g_[t];if("function"!=typeof r||!(t in o_.prototype))return!1;if(e===r)return!0;var n=u_(r);return!!n&&e===n[0]},y_=Lv(Jb),b_=/\{\n\/\* \[wrapped with (.+)\] \*/,__=/,? & /;var w_=function(e){var t=e.match(b_);return t?t[1].split(__):[]},S_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var k_=function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(S_,"{\n/* [wrapped with "+t+"] */\n")};var E_=function(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1};var T_=function(e){return e!=e};var P_=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1};var O_=function(e,t,r){return t==t?P_(e,t,r):E_(e,T_,r)};var C_=function(e,t){return!(null==e||!e.length)&&O_(e,t,0)>-1},M_=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var j_=function(e,t){return xd(M_,function(r){var n="_."+r[0];t&r[1]&&!C_(e,n)&&e.push(n)}),e.sort()};var x_=function(e,t,r){var n=t+"";return Fv(e,k_(n,j_(w_(n),r)))},R_=1,A_=2,I_=4,D_=8,L_=32,F_=64;var N_=function(e,t,r,n,i,o,a,u,s,c){var l=t&D_;t|=l?L_:F_,(t&=~(l?F_:L_))&I_||(t&=~(R_|A_));var f=[e,t,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,u,s,c],d=r.apply(void 0,f);return m_(e)&&y_(d,f),d.placeholder=n,x_(d,e,t)};var U_=function(e){return e.placeholder},z_=Math.min;var q_=function(e,t){for(var r=e.length,n=z_(t.length,r),i=Sp(e);n--;){var o=t[n];e[n]=Kd(o,r)?i[o]:void 0}return e},B_="__lodash_placeholder__";var W_=function(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r];a!==t&&a!==B_||(e[r]=B_,o[i++]=r)}return o},V_=1,G_=2,H_=8,J_=16,Y_=128,$_=512;var K_=function e(t,r,n,i,o,a,u,s,c,l){var f=r&Y_,d=r&V_,p=r&G_,h=r&(H_|J_),v=r&$_,g=p?void 0:Yb(t);return function m(){for(var y=arguments.length,b=Array(y),_=y;_--;)b[_]=arguments[_];if(h)var w=U_(m),S=t_(b,w);if(i&&(b=Zb(b,i,o,h)),a&&(b=e_(b,a,u,h)),y-=S,h&&y<l){var k=W_(b,w);return N_(t,r,e,m.placeholder,n,b,k,s,c,l-y)}var E=d?n:this,T=p?E[t]:t;return y=b.length,s?b=q_(b,s):v&&y>1&&b.reverse(),f&&c<y&&(b.length=c),this&&this!==Tf&&this instanceof m&&(T=g||Yb(T)),T.apply(E,b)}};var X_=function(e,t,r){var n=Yb(e);return function i(){for(var o=arguments.length,a=Array(o),u=o,s=U_(i);u--;)a[u]=arguments[u];var c=o<3&&a[0]!==s&&a[o-1]!==s?[]:W_(a,s);return(o-=c.length)<r?N_(e,t,K_,i.placeholder,void 0,a,c,void 0,void 0,r-o):Ov(this&&this!==Tf&&this instanceof i?n:e,this,a)}},Z_=1;var Q_=function(e,t,r,n){var i=t&Z_,o=Yb(e);return function t(){for(var a=-1,u=arguments.length,s=-1,c=n.length,l=Array(c+u),f=this&&this!==Tf&&this instanceof t?o:e;++s<c;)l[s]=n[s];for(;u--;)l[s++]=arguments[++a];return Ov(f,i?r:this,l)}},ew="__lodash_placeholder__",tw=1,rw=2,nw=4,iw=8,ow=128,aw=256,uw=Math.min;var sw=function(e,t){var r=e[1],n=t[1],i=r|n,o=i<(tw|rw|ow),a=n==ow&&r==iw||n==ow&&r==aw&&e[7].length<=t[8]||n==(ow|aw)&&t[7].length<=t[8]&&r==iw;if(!o&&!a)return e;n&tw&&(e[2]=t[2],i|=r&tw?0:nw);var u=t[3];if(u){var s=e[3];e[3]=s?Zb(s,u,t[4]):u,e[4]=s?W_(e[3],ew):t[4]}return(u=t[5])&&(s=e[5],e[5]=s?e_(s,u,t[6]):u,e[6]=s?W_(e[5],ew):t[6]),(u=t[7])&&(e[7]=u),n&ow&&(e[8]=null==e[8]?t[8]:uw(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e},cw=NaN,lw=/^\s+|\s+$/g,fw=/^[-+]0x[0-9a-f]+$/i,dw=/^0b[01]+$/i,pw=/^0o[0-7]+$/i,hw=parseInt;var vw=function(e){if("number"==typeof e)return e;if(Gh(e))return cw;if(Nf(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Nf(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(lw,"");var r=dw.test(e);return r||pw.test(e)?hw(e.slice(2),r?2:8):fw.test(e)?cw:+e},gw=1/0,mw=1.7976931348623157e308;var yw=function(e){return e?(e=vw(e))===gw||e===-gw?(e<0?-1:1)*mw:e==e?e:0:0===e?e:0};var bw=function(e){var t=yw(e),r=t%1;return t==t?r?t-r:t:0},_w="Expected a function",ww=1,Sw=2,kw=8,Ew=16,Tw=32,Pw=64,Ow=Math.max;var Cw=function(e,t,r,n,i,o,a,u){var s=t&Sw;if(!s&&"function"!=typeof e)throw new TypeError(_w);var c=n?n.length:0;if(c||(t&=~(Tw|Pw),n=i=void 0),a=void 0===a?a:Ow(bw(a),0),u=void 0===u?u:bw(u),c-=i?i.length:0,t&Pw){var l=n,f=i;n=i=void 0}var d=s?void 0:u_(e),p=[e,t,r,n,i,l,f,o,a,u];if(d&&sw(p,d),e=p[0],t=p[1],r=p[2],n=p[3],i=p[4],!(u=p[9]=void 0===p[9]?s?0:e.length:Ow(p[9]-c,0))&&t&(kw|Ew)&&(t&=~(kw|Ew)),t&&t!=ww)h=t==kw||t==Ew?X_(e,t,u):t!=Tw&&t!=(ww|Tw)||i.length?K_.apply(void 0,p):Q_(e,t,r,n);else var h=Kb(e,t,r);return x_((d?Jb:y_)(h,p),e,t)},Mw=Gb(function(e,t){var r=W_(t,U_(Mw));return Cw(e,32,void 0,t,r)});Mw.placeholder={};var jw=Mw;var xw=function(e,t){return jw(Vb(t),e)},Rw=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=c(Db),n=c(Yl),i=c(nf),o=c(Wb),a=c(Vy),u=c(xw);t.default=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];if(3===t.length)return(0,i.default)(f,null,t);var a=t[0]||{},s=a.cacheFailures,c=a.cacheSuccesses,l=a.keyFactory;return f;function f(e,t,o){var a=t;return o.value=(0,u.default)(o.value,function(t){for(var r=this,o=a,u=arguments.length,f=Array(u>1?u-1:0),p=1;p<u;p++)f[p-1]=arguments[p];l&&(o=o+"_"+l.apply(void 0,f));var h=d.get(this,e,o);return h||(h=(0,i.default)(t,this,f),!s&&h&&h.catch&&(h=h.catch(function(t){return d.delete(r,e,o),n.default.reject(t)})),!c&&h&&h.then&&(h=h.then(function(t){return d.delete(r,e,o),t})),d.set(this,e,o,h),h)}),"object"!==(void 0===e?"undefined":(0,r.default)(e))||e.prototype||(e[t]=o.value),o}};var s=c(Gy);function c(e){return e&&e.__esModule?e:{default:e}}var l=a.default,f=o.default,d=new((0,s.default)(l,f,f))});t(Rw);var Aw=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={email:/^[^\s]+?@[^\s]+?$/,uuid:/^[a-f\d]{8}(?:-[a-f\d]{4}){3}-[a-f\d]{12}$/,execEmail:/[^\s]+?@[^\s]+?/,execUuid:/[a-f\d]{8}(?:-[a-f\d]{4}){3}-[a-f\d]{12}/}});t(Aw);var Iw=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(nf),n=i(Gd);function i(e){return e&&e.__esModule?e:{default:e}}t.proxyEvents=function(e,t){return["on","once"].forEach(function(r){t[r]=function(){return e[r].apply(e,arguments),t}}),e},t.transferEvents=function(e,t,i){(e=(0,n.default)(e)?e:[e]).forEach(function(e){t.on&&t.on(e,function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return function(e){var t=e.trigger||e.emit;if(!t)throw new Error("count not determine emit method");for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return(0,r.default)(t,e,i)}.apply(void 0,[i,e].concat(n))})})}});t(Iw);Iw.proxyEvents,Iw.transferEvents;var Dw=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=Yl)&&r.__esModule?r:{default:r};t.default=function(e){return function(){return n.default.resolve(e)}}});t(Dw);var Lw=function(e,t,r){if(!Nf(r))return!1;var n=typeof t;return!!("number"==n?pp(r)&&Kd(t,r.length):"string"==n&&t in r)&&lf(r[t],e)},Fw=Object.prototype,Nw=Fw.hasOwnProperty,Uw=Gb(function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&Lw(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],a=bp(o),u=-1,s=a.length;++u<s;){var c=a[u],l=e[c];(void 0===l||lf(l,Fw[c])&&!Nw.call(e,c))&&(e[c]=o[c])}return e});function zw(){}function qw(){qw.init.call(this)}function Bw(e){return void 0===e._maxListeners?qw.defaultMaxListeners:e._maxListeners}function Ww(e,t,r,n){var i,o,a,u;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]):(o=e._events=new zw,e._eventsCount=0),a){if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),!a.warned&&(i=Bw(e))&&i>0&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,u=s,"function"==typeof console.warn?console.warn(u):console.log(u)}}else a=o[t]=r,++e._eventsCount;return e}function Vw(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function Gw(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function Hw(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function Jw(e){Error.call(this,e),this.message=e}function Yw(e){Error.call(this,e),this.message=e}zw.prototype=Object.create(null),qw.EventEmitter=qw,qw.usingDomains=!1,qw.prototype.domain=void 0,qw.prototype._events=void 0,qw.prototype._maxListeners=void 0,qw.defaultMaxListeners=10,qw.init=function(){this.domain=null,qw.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new zw,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},qw.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},qw.prototype.getMaxListeners=function(){return Bw(this)},qw.prototype.emit=function(e){var t,r,n,i,o,a,u,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(u=this.domain,s){if(t=arguments[1],!u){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=u,t.domainThrown=!1,u.emit("error",t),!1}if(!(r=a[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var n=e.length,i=Hw(e,n),o=0;o<n;++o)i[o].call(r)}(r,l,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=Hw(e,i),a=0;a<i;++a)o[a].call(r,n)}(r,l,this,arguments[1]);break;case 3:!function(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,a=Hw(e,o),u=0;u<o;++u)a[u].call(r,n,i)}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var a=e.length,u=Hw(e,a),s=0;s<a;++s)u[s].call(r,n,i,o)}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=Hw(e,i),a=0;a<i;++a)o[a].apply(r,n)}(r,l,this,i)}return!0},qw.prototype.addListener=function(e,t){return Ww(this,e,t,!1)},qw.prototype.on=qw.prototype.addListener,qw.prototype.prependListener=function(e,t){return Ww(this,e,t,!0)},qw.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,Vw(this,e,t)),this},qw.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Vw(this,e,t)),this},qw.prototype.removeListener=function(e,t){var r,n,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new zw:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new zw,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,a||t)}return this},qw.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new zw,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new zw:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new zw,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},qw.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},qw.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Gw.call(e,t)},qw.prototype.listenerCount=Gw,qw.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},Jm.inherits(Jw,Error),Jw.prototype.name="IllegalArgumentError",Jm.inherits(Yw,Error),Yw.prototype.name="IllegalStateError";var $w={IllegalStateError:Yw,IllegalArgumentError:Jw},Kw=r(function(e){var t=e.exports=$w;function r(e,t,r,n){r=r||"";var i=new e(Jm.format.apply(this,[r].concat(n)));throw Error.captureStackTrace(i,t),i}function n(e,n,i){r(t.IllegalArgumentError,e,n,i)}function i(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function o(e){return function(t,r){var o=i(t);if(o==e)return t;n(arguments.callee,r||'Expected "'+e+'" but got "'+o+'".',Array.prototype.slice.call(arguments,2))}}e.exports.checkArgument=function(e,t){e||n(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkState=function(e,n){e||function(e,n,i){r(t.IllegalStateError,e,n,i)}(arguments.callee,n,Array.prototype.slice.call(arguments,2))},e.exports.checkIsDef=function(e,t){if(void 0!==e)return e;n(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},e.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;n(arguments.callee,t||'Expected value to be defined and not null but got "'+i(e)+'".',Array.prototype.slice.call(arguments,2))},e.exports.checkIsString=o("string"),e.exports.checkIsArray=o("array"),e.exports.checkIsNumber=o("number"),e.exports.checkIsBoolean=o("boolean"),e.exports.checkIsFunction=o("function"),e.exports.checkIsObject=o("object")}),Xw=(Kw.checkArgument,Kw.checkState,Kw.checkIsDef,Kw.checkIsDefAndNotNull,Kw.checkIsString,Kw.checkIsArray,Kw.checkIsNumber,Kw.checkIsBoolean,Kw.checkIsFunction,Kw.checkIsObject,Kw);function Zw(e){qw.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}Jm.inherits(Zw,qw.EventEmitter),Zw.prototype.failAfter=function(e){Xw.checkArgument(e>0,"Expected a maximum number of retry greater than 0 but got %s.",e),this.maxNumberOfRetry_=e},Zw.prototype.backoff=function(e){Xw.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},Zw.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},Zw.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1};var Qw=Zw;function eS(e){return null!=e}function tS(e){if(eS((e=e||{}).initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(eS(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(eS(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}tS.prototype.getMaxDelay=function(){return this.maxDelay_},tS.prototype.getInitialDelay=function(){return this.initialDelay_},tS.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},tS.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},tS.prototype.reset=function(){this.reset_()},tS.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")};var rS=tS;function nS(e){rS.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=nS.DEFAULT_FACTOR,e&&void 0!==e.factor&&(Xw.checkArgument(e.factor>1,"Exponential factor should be greater than 1 but got %s.",e.factor),this.factor_=e.factor)}Jm.inherits(nS,rS),nS.DEFAULT_FACTOR=2,nS.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},nS.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()};var iS=nS;function oS(e){rS.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}Jm.inherits(oS,rS),oS.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e,e},oS.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0};var aS=oS;function uS(e,t,r){qw.EventEmitter.call(this),Xw.checkIsFunction(e,"Expected fn to be a function."),Xw.checkIsArray(t,"Expected args to be an array."),Xw.checkIsFunction(r,"Expected callback to be a function."),this.function_=e,this.arguments_=t,this.callback_=r,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=uS.DEFAULT_RETRY_PREDICATE_,this.state_=uS.State_.PENDING}Jm.inherits(uS,qw.EventEmitter),uS.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},uS.DEFAULT_RETRY_PREDICATE_=function(e){return!0},uS.prototype.isPending=function(){return this.state_==uS.State_.PENDING},uS.prototype.isRunning=function(){return this.state_==uS.State_.RUNNING},uS.prototype.isCompleted=function(){return this.state_==uS.State_.COMPLETED},uS.prototype.isAborted=function(){return this.state_==uS.State_.ABORTED},uS.prototype.setStrategy=function(e){return Xw.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=e,this},uS.prototype.retryIf=function(e){return Xw.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=e,this},uS.prototype.getLastResult=function(){return this.lastResult_.concat()},uS.prototype.getNumRetries=function(){return this.numRetries_},uS.prototype.failAfter=function(e){return Xw.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=e,this},uS.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=uS.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},uS.prototype.start=function(e){Xw.checkState(!this.isAborted(),"FunctionCall is aborted."),Xw.checkState(this.isPending(),"FunctionCall already started.");var t=this.strategy_||new aS;this.backoff_=e?e(t):new Qw(t),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=uS.State_.RUNNING,this.doCall_(!1)},uS.prototype.doCall_=function(e){e&&this.numRetries_++;var t=["call"].concat(this.arguments_);qw.EventEmitter.prototype.emit.apply(this,t);var r=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(r))},uS.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},uS.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.lastResult_=e,qw.EventEmitter.prototype.emit.apply(this,["callback"].concat(e));var t=e[0];t&&this.retryPredicate_(t)?this.backoff_.backoff(t):(this.state_=uS.State_.COMPLETED,this.doCallback_())}},uS.prototype.handleBackoff_=function(e,t,r){this.emit("backoff",e,t,r)};var sS=uS,cS={Backoff:Qw,FunctionCall:sS,FibonacciStrategy:aS,ExponentialStrategy:iS,fibonacci:function(e){return new Qw(new aS(e))},exponential:function(e){return new Qw(new iS(e))},call:function(e,t,r){var n=Array.prototype.slice.call(arguments);return e=n[0],t=n.slice(1,n.length-1),r=n[n.length-1],new sS(e,t,r)}},lS=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(Db),n=l(Yl),i=l(nf),o=l(Ql),a=l(xw),u=l(Vf),s=l(Uw);t.default=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];var f=t[0]||{};f=(0,o.default)({},f),(0,s.default)(f,{backoff:!0,delay:1,maxAttempts:3});var d=void 0;d=f.backoff?{initialDelay:f.delay,maxDelay:f.maxDelay}:{initialDelay:1,maxDelay:1};if(3===t.length)return(0,i.default)(p,null,t);return p;function p(e,t,o){return o.value=(0,a.default)(o.value,function(e){for(var t=this,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];var s=new qw.EventEmitter,l=new n.default(function(r,n){var a=c.default.call(function(r){var n=(0,i.default)(e,t,o);return(0,u.default)(n.on)&&(n.on("progress",s.emit.bind(s,"progress")),n.on("upload-progress",s.emit.bind(s,"upload-progress")),n.on("download-progress",s.emit.bind(s,"download-progress"))),n.then(function(e){r(null,e)}).catch(function(e){e||(e=new Error("retryable method failed without providing an error object")),r(e)})},function(e,t){return e?n(e):r(t)});a.setStrategy(new c.default.ExponentialStrategy(d)),f.maxAttempts&&a.failAfter(f.maxAttempts-1),a.start()});return l.on=function(e,t){return s.on(e,t),l},l}),"object"!==(void 0===e?"undefined":(0,r.default)(e))||e.prototype||(e[t]=o.value),o}};var c=l(cS);function l(e){return e&&e.__esModule?e:{default:e}}});t(lS);var fS=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=Yl)&&r.__esModule?r:{default:r};t.default=function(e){return function(t){return new n.default(function(r){r(e(t))}).then(function(){return t}).catch(function(){return t})}}});t(fS);var dS=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(nf),n=a(Yl),i=a(xw);t.default=function(e){return function(t,a,u){u.value=(0,i.default)(u.value,function(t){for(var i=this,a=arguments.length,u=Array(a>1?a-1:0),s=1;s<a;s++)u[s-1]=arguments[s];return new n.default(function(a){i[e]=!0,a((0,r.default)(t,i,u).then((0,o.default)(function(){i[e]=!1})).catch(function(t){return i[e]=!1,n.default.reject(t)}))})})}};var o=a(fS);function a(e){return e&&e.__esModule?e:{default:e}}});t(dS),xs(xs.S,"Object",{create:pc});var pS=ks.Object,hS=function(e,t){return pS.create(e,t)},vS=r(function(e){e.exports={default:hS,__esModule:!0}});t(vS);var gS=function(e,t){if(Ps(e),!ls(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},mS={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=Ts(Function.call,Ss.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return gS(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:gS};xs(xs.S,"Object",{setPrototypeOf:mS.set});var yS=ks.Object.setPrototypeOf,bS=r(function(e){e.exports={default:yS,__esModule:!0}});t(bS);var _S=function(e,t,r){t in e?Cs.f(e,t,cs(0,r)):e[t]=r};xs(xs.S+xs.F*!Cl(function(e){}),"Array",{from:function(e){var t,r,n,i,o=bc(e),a="function"==typeof this?this:Array,u=arguments.length,s=u>1?arguments[1]:void 0,c=void 0!==s,l=0,f=Jc(o);if(c&&(s=Ts(s,u>2?arguments[2]:void 0,2)),null==f||a==Array&&Gc(f))for(r=new a(t=Js(o.length));t>l;l++)_S(r,l,c?s(o[l],l):o[l]);else for(i=f.call(o),r=new a;!(n=i.next()).done;l++)_S(r,l,c?Bc(i,s,[n.value,l],!0):n.value);return r.length=l,r}});var wS=ks.Array.from,SS=r(function(e){e.exports={default:wS,__esModule:!0}});t(SS);var kS=[].slice,ES={},TS=Function.bind||function(e){var t=Es(this),r=kS.call(arguments,1),n=function(){var i=r.concat(kS.call(arguments));return this instanceof n?function(e,t,r){if(!(t in ES)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";ES[t]=Function("F,a","return new F("+n.join(",")+")")}return ES[t](e,r)}(t,i.length,i):Xc(t,i,e)};return ls(t.prototype)&&(n.prototype=t.prototype),n},PS=(gs.Reflect||{}).construct,OS=hs(function(){function e(){}return!(PS(function(){},[],e)instanceof e)}),CS=!hs(function(){PS(function(){})});xs(xs.S+xs.F*(OS||CS),"Reflect",{construct:function(e,t){Es(e),Ps(t);var r=arguments.length<3?e:Es(arguments[2]);if(CS&&!OS)return PS(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(TS.apply(e,n))}var i=r.prototype,o=pc(ls(i)?i:Object.prototype),a=Function.apply.call(e,o,t);return ls(a)?a:o}});var MS=ks.Reflect.construct,jS=r(function(e){e.exports={default:MS,__esModule:!0}});t(jS),Rs("getPrototypeOf",function(){return function(e){return Sc(bc(e))}});var xS=ks.Object.getPrototypeOf,RS=r(function(e){e.exports={default:xS,__esModule:!0}});t(RS);var AS=r(function(e,t){t.__esModule=!0;var r,n=(r=Db)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n.default)(t))&&"function"!=typeof t?e:t}});t(AS);var IS=r(function(e,t){t.__esModule=!0;var r=o(bS),n=o(vS),i=o(Db);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,i.default)(t)));e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}});t(IS);var DS=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=p(vS),o=p(bS),a=p(SS),u=p(jS),s=p(RS),c=p(by),l=p(ky),f=p(AS),d=p(IS);function p(e){return e&&e.__esModule?e:{default:e}}var h=(n=r=function(e){function t(){var e;(0,c.default)(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,f.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(n))),a=void 0;if(o.parse)a=o.parse.apply(o,n);else if(o.constructor.parse){var u;a=(u=o.constructor).parse.apply(u,n)}return a||(a=o.constructor.defaultMessage),o.name=o.constructor.name,o.message=a,o}return(0,d.default)(t,e),(0,l.default)(t,null,[{key:"parse",value:function(){return arguments.length<=0?void 0:arguments[0]}}]),t}(function(e){function t(){var t=(0,u.default)(e,(0,a.default)(arguments));return(0,o.default)(t,(0,s.default)(this)),t}return t.prototype=(0,i.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o.default?(0,o.default)(t,e):t.__proto__=e,t}(Error)),r.defaultMessage="An error occurred",n);t.default=h});t(DS);var LS=Object.defineProperty;function FS(e,t,r){var n=r.configurable,i=r.enumerable,o=r.initializer,a=r.value;return{configurable:n,enumerable:i,get:function(){if(this!==e){var r=o?o.call(this):a;return LS(this,t,{configurable:n,enumerable:i,writable:!0,value:r}),r}},set:ok(t)}}function NS(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(FS,t)}var US,zS,qS,BS,WS,VS,GS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function HS(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function JS(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function YS(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var $S=Object.defineProperty,KS=Object.getOwnPropertyDescriptor,XS=Object.getOwnPropertyNames,ZS=Object.getOwnPropertySymbols;function QS(e,t){return function(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],r=0,n=t.length;r<n;r++)if(e.hasOwnProperty(t[r]))return!0;return!1}(t[t.length-1])?e.apply(void 0,YS(t).concat([[]])):function(){return e.apply(void 0,YS(Array.prototype.slice.call(arguments)).concat([t]))}}var ek=(zS=JS((US=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),HS(this,"debounceTimeoutIds",zS,this),HS(this,"throttleTimeoutIds",qS,this),HS(this,"throttlePreviousTimestamps",BS,this),HS(this,"throttleTrailingArgs",WS,this),HS(this,"profileLastRan",VS,this)}).prototype,"debounceTimeoutIds",[NS],{enumerable:!0,initializer:function(){return{}}}),qS=JS(US.prototype,"throttleTimeoutIds",[NS],{enumerable:!0,initializer:function(){return{}}}),BS=JS(US.prototype,"throttlePreviousTimestamps",[NS],{enumerable:!0,initializer:function(){return{}}}),WS=JS(US.prototype,"throttleTrailingArgs",[NS],{enumerable:!0,initializer:function(){return null}}),VS=JS(US.prototype,"profileLastRan",[NS],{enumerable:!0,initializer:function(){return null}}),US),tk="function"==typeof Symbol?Symbol("__core_decorators__"):"__core_decorators__";function rk(e){return!1===e.hasOwnProperty(tk)&&$S(e,tk,{value:new ek}),e[tk]}var nk=ZS?function(e){return XS(e).concat(ZS(e))}:XS;function ik(e){var t={};return nk(e).forEach(function(r){return t[r]=KS(e,r)}),t}function ok(e){return function(t){return Object.defineProperty(this,e,{configurable:!0,writable:!0,enumerable:!0,value:t}),t}}function ak(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}}var uk="object"===("undefined"==typeof console?"undefined":GS(console))&&console&&"function"==typeof console.warn?ak(console.warn,console):function(){},sk={};function ck(e){!0!==sk[e]&&(sk[e]=!0,uk("DEPRECATION: "+e))}var lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fk=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var dk=/^function ([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?(\([^\)]*\))[\s\S]+$/,pk=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentKlass=t,this.childKlass=r,this.parentDescriptor=n,this.childDescriptor=i}return fk(e,[{key:"_getTopic",value:function(e){return void 0===e?null:"value"in e?e.value:"get"in e?e.get:"set"in e?e.set:void 0}},{key:"_extractTopicSignature",value:function(e){switch(void 0===e?"undefined":lk(e)){case"function":return this._extractFunctionSignature(e);default:return this.key}}},{key:"_extractFunctionSignature",value:function(e){var t=this;return e.toString().replace(dk,function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.key)+arguments[2]})}},{key:"key",get:function(){return this.childDescriptor.key}},{key:"parentNotation",get:function(){return this.parentKlass.constructor.name+"#"+this.parentPropertySignature}},{key:"childNotation",get:function(){return this.childKlass.constructor.name+"#"+this.childPropertySignature}},{key:"parentTopic",get:function(){return this._getTopic(this.parentDescriptor)}},{key:"childTopic",get:function(){return this._getTopic(this.childDescriptor)}},{key:"parentPropertySignature",get:function(){return this._extractTopicSignature(this.parentTopic)}},{key:"childPropertySignature",get:function(){return this._extractTopicSignature(this.childTopic)}}]),fk(e,[{key:"assert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!0!==e&&this.error("{child} does not properly override {parent}"+t)}},{key:"error",value:function(e){var t=this;throw e=e.replace("{parent}",function(e){return t.parentNotation}).replace("{child}",function(e){return t.childNotation}),new SyntaxError(e)}}]),e}();function hk(e){return e.hasOwnProperty("value")?"data":e.hasOwnProperty("get")||e.hasOwnProperty("set")?"accessor":"data"}function vk(e,t,r){r.assert(e.length===t.length)}function gk(e,t,r){var n=hk(e),i=hk(t);switch(n!==i&&r.error('descriptor types do not match. {parent} is "'+n+'", {child} is "'+i+'"'),i){case"data":!function(e,t,r){var n=lk(e.value),i=lk(t.value);switch("undefined"===n&&"undefined"===i&&r.error("descriptor values are both undefined. (class properties are are not currently supported)'"),n!==i&&("function"===i&&void 0===n||void 0!==n)&&r.error('value types do not match. {parent} is "'+n+'", {child} is "'+i+'"'),i){case"function":vk(e.value,t.value,r);break;default:r.error('Unexpected error. Please file a bug with: {parent} is "'+n+'", {child} is "'+i+'"')}}(e,t,r);break;case"accessor":!function(e,t,r){var n="function"==typeof e.get,i="function"==typeof t.get,o="function"==typeof e.set,a="function"==typeof t.set;(n||i)&&(!n&&o&&r.error("{parent} is setter but {child} is getter"),!i&&a&&r.error("{parent} is getter but {child} is setter"),vk(e.get,t.get,r)),(o||a)&&(!o&&n&&r.error("{parent} is getter but {child} is setter"),!a&&i&&r.error("{parent} is setter but {child} is getter"),vk(e.set,t.set,r))}(e,t,r)}}var mk=[function(e){return e.toLowerCase()},function(e){return e.toUpperCase()},function(e){return e+"s"},function(e){return e.slice(0,-1)},function(e){return e.slice(1,e.length)}];function yk(e,t,r){r.key=t;var n=Object.getPrototypeOf(e),i=Object.getOwnPropertyDescriptor(n,t),o=new pk(n,e,i,r);if(void 0===i){var a=function(e,t){for(var r=0,n=mk.length;r<n;r++){var i=(0,mk[r])(t);if(i in e)return i}return null}(n,t),u=a?'\n\n  Did you mean "'+a+'"?':"";o.error("No descriptor matching {child} was found on the prototype chain."+u)}return gk(i,r,o),r}var bk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_k=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),wk="This function will be removed in future versions.";function Sk(e,t,r,n){var i=_k(n,2),o=i[0],a=void 0===o?wk:o,u=i[1],s=void 0===u?{}:u;if("function"!=typeof r.value)throw new SyntaxError("Only functions can be marked as deprecated");var c=e.constructor.name+"#"+t;return s.url&&(a+="\n\n    See "+s.url+" for more details.\n\n"),bk({},r,{value:function(){return uk("DEPRECATION "+c+": "+a),r.value.apply(this,arguments)}})}function kk(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(Sk,t)}var Ek=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Pk(){}function Ok(e,t,r){return Ek({},r,{value:function(){return function(e,t,r){if("object"===("undefined"==typeof console?"undefined":Tk(console))){var n=console.warn;console.warn=Pk;var i=t.apply(e,r);return console.warn=n,i}return t.apply(e,r)}(this,r.value,arguments)}})}var Ck=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function Mk(e,t,r){var n=function(e){var t=void 0,r=void 0;return e.value?(t=e.value,r="value"):e.get?(t=e.get,r="get"):e.set&&(t=e.set,r="set"),{fn:t,wrapKey:r}}(r),i=n.fn,o=n.wrapKey,a=new WeakMap,u=Object.create(null),s=Object.create(null),c=0;return Ck({},r,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},o,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n,o,l="0",f=0,d=t.length;f<d;f++){var p=t[f],h=(n=s,(o=p)===Object(o)?o:n[o]||(n[o]={})),v=a.get(h);void 0===v&&(v=++c,a.set(h,v)),l+=v}return u[l]||function(e,t,r,n,i){var o=t.apply(e,r);return n[i]=o,o}(this,i,arguments,u,l)}))}function jk(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var xk=Object.defineProperty,Rk=Object.getPrototypeOf,Ak=void 0;function Ik(e,t,r){var n=r.value,i=r.configurable,o=r.enumerable;if("function"!=typeof n)throw new SyntaxError("@autobind can only be used on functions, not: "+n);var a=e.constructor;return{configurable:i,enumerable:o,get:function(){if(this===e)return n;if(this.constructor!==a&&Rk(this).constructor===a)return n;if(this.constructor!==a&&t in this.constructor.prototype)return function(e,t){if("undefined"==typeof WeakMap)throw new Error("Using @autobind on "+t.name+"() requires WeakMap support due to its use of super."+t.name+"()\n      See https://github.com/jayphelps/core-decorators.js/issues/20");Ak||(Ak=new WeakMap),!1===Ak.has(e)&&Ak.set(e,new WeakMap);var r=Ak.get(e);return!1===r.has(t)&&r.set(t,ak(t,e)),r.get(t)}(this,n);var r=ak(n,this);return xk(this,t,{configurable:!0,writable:!0,enumerable:!1,value:r}),r},set:ok(t)}}function Dk(e){return 1===e.length?function(e){for(var t=ik(e.prototype),r=nk(t),n=0,i=r.length;n<i;n++){var o=r[n],a=t[o];"function"==typeof a.value&&"constructor"!==o&&xk(e.prototype,o,Ik(e.prototype,o,a))}}.apply(void 0,jk(e)):Ik.apply(void 0,jk(e))}function Lk(e,t,r){return r.writable=!1,r}function Fk(e,t,r){return r.enumerable=!0,r}function Nk(e,t,r){return r.enumerable=!1,r}function Uk(e,t,r){return r.configurable=!1,r}var zk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qk=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Bk=300;function Wk(e,t,r,n){var i=qk(n,2),o=i[0],a=void 0===o?Bk:o,u=i[1],s=void 0!==u&&u,c=r.value;if("function"!=typeof c)throw new SyntaxError("Only functions can be debounced");return zk({},r,{value:function(){var e=this,r=rk(this).debounceTimeoutIds,n=r[t],i=s&&!n,o=arguments;clearTimeout(n),r[t]=setTimeout(function(){delete r[t],s||c.apply(e,o)},a),i&&c.apply(this,o)}})}var Vk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gk=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Hk=300;function Jk(e,t,r,n){var i=Gk(n,2),o=i[0],a=void 0===o?Hk:o,u=i[1],s=void 0===u?{}:u,c=r.value;if("function"!=typeof c)throw new SyntaxError("Only functions can be throttled");return!1!==s.leading&&(s.leading=!0),!1!==s.trailing&&(s.trailing=!0),Vk({},r,{value:function(){var e=this,r=rk(this),n=r.throttleTimeoutIds,i=r.throttlePreviousTimestamps,o=n[t],u=i[t]||0,l=Date.now();s.trailing&&(r.throttleTrailingArgs=arguments),u||!1!==s.leading||(u=l);var f=a-(l-u);f<=0?(clearTimeout(o),delete n[t],i[t]=l,c.apply(this,arguments)):!o&&s.trailing&&(n[t]=setTimeout(function(){i[t]=!1===s.leading?0:Date.now(),delete n[t],c.apply(e,r.throttleTrailingArgs),r.throttleTrailingArgs=null},f))}})}var Yk=Object.defineProperty;function $k(e,t,r,n){var i,o=(i=n,Array.isArray(i)?i:Array.from(i)),a=o[0],u=o.slice(1),s=r.configurable,c=r.enumerable,l=r.writable,f=r.get,d=r.set,p=r.value,h=!!f;return{configurable:s,enumerable:c,get:function(){var e=h?f.call(this):p,r=a.call.apply(a,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(u)));if(h)return r;var n={configurable:s,enumerable:c};return n.value=r,n.writable=l,Yk(this,t,n),r},set:h?d:ok()}}var Kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xk=Object.defineProperty,Zk=Object.getPrototypeOf;function Qk(e,t){if(r=e,"[object Symbol]"===Object.prototype.toString.call(r)&&"object"===(void 0===r?"undefined":Kk(r))){do{if(t===Object.prototype)return void 0!==t[e];if(t.hasOwnProperty(e))return!0}while(t=Zk(t));return!1}return e in t;var r}function eE(e,t){if(!t.length)throw new SyntaxError("@mixin() class "+e.name+" requires at least one mixin as an argument");for(var r=0,n=t.length;r<n;r++)for(var i=ik(t[r]),o=nk(i),a=0,u=o.length;a<u;a++){var s=o[a];Qk(s,e.prototype)||Xk(e.prototype,s,i[s])}}function tE(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return ck("@mixin is deprecated and will be removed shortly. Use @mixin from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators"),"function"==typeof t[0]?eE(t[0],[]):function(e){return eE(e,t)}}var rE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nE=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),iE={},oE={time:console.time?console.time.bind(console):function(e){iE[e]=new Date},timeEnd:console.timeEnd?console.timeEnd.bind(console):function(e){var t=new Date-iE[e];delete iE[e],console.log(e+": "+t+"ms")}},aE=0;function uE(e,t,r,n){var i=nE(n,2),o=i[0],a=void 0===o?null:o,u=i[1],s=void 0===u?oE:u,c=r.value;if(null===a&&(a=e.constructor.name+"."+t),"function"!=typeof c)throw new SyntaxError("@time can only be used on functions, not: "+c);return rE({},r,{value:function(){var e=a+"-"+aE;aE++,s.time(e);try{return c.apply(this,arguments)}finally{s.timeEnd(e)}}})}var sE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cE=Object.getPrototypeOf,lE=Object.getOwnPropertyDescriptor;function fE(e,t,r){var n=cE(e),i=lE(n,t);return sE({},i,{value:r.value,initializer:r.initializer,get:r.get||i.get,set:r.set||i.set})}var dE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pE=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),hE={profile:console.profile?ak(console.profile,console):function(){},profileEnd:console.profileEnd?ak(console.profileEnd,console):function(){},warn:uk};function vE(e,t,r,n){var i=pE(n,3),o=i[0],a=void 0===o?null:o,u=i[1],s=void 0!==u&&u,c=i[2],l=void 0===c?hE:c;if(!gE.__enabled)return gE.__warned||(l.warn("console.profile is not supported. All @profile decorators are disabled."),gE.__warned=!0),r;var f=r.value;if(null===a&&(a=e.constructor.name+"."+t),"function"!=typeof f)throw new SyntaxError("@profile can only be used on functions, not: "+f);return dE({},r,{value:function(){var e=Date.now(),t=rk(this);(!0===s&&!t.profileLastRan||!1===s||"number"==typeof s&&e-t.profileLastRan>s||"function"==typeof s&&s.apply(this,arguments))&&(l.profile(a),t.profileLastRan=e);try{return f.apply(this,arguments)}finally{l.profileEnd(a)}}})}function gE(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(vE,t)}gE.__enabled=!!console.profile,gE.__warned=!1;var mE=Object.defineProperty,yE=Object.getOwnPropertyDescriptor;var bE=Object.freeze({override:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(yk,t)},deprecate:kk,deprecated:kk,suppressWarnings:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(Ok,t)},memoize:function(){ck("@memoize is deprecated and will be removed shortly. Use @memoize from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(Mk,t)},autobind:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(){return Dk(arguments)}:Dk(t)},readonly:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(Lk,t)},enumerable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(Fk,t)},nonenumerable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(Nk,t)},nonconfigurable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(Uk,t)},debounce:function(){ck("@debounce is deprecated and will be removed shortly. Use @debounce from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(Wk,t)},throttle:function(){ck("@throttle is deprecated and will be removed shortly. Use @throttle from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(Jk,t)},decorate:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS($k,t)},mixin:tE,mixins:tE,lazyInitialize:NS,time:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(uE,t)},extendDescriptor:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return QS(fE,t)},profile:gE,applyDecorators:function(e,t){var r=e.prototype;for(var n in t)for(var i=t[n],o=0,a=i.length;o<a;o++){var u=i[o];mE(r,n,u(r,n,yE(r,n)))}return e}}),_E=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=bE.deprecated;t.default=r});t(_E);var wE=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=!0});t(wE);var SE=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=wE,e&&e.__esModule?e:{default:e}).default;var e}})});t(SE);var kE=r(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"base64",{enumerable:!0,get:function(){return r(hy).default}}),Object.defineProperty(t,"cappedDebounce",{enumerable:!0,get:function(){return r(vy).default}}),Object.defineProperty(t,"checkRequired",{enumerable:!0,get:function(){return r(gy).default}}),Object.defineProperty(t,"Defer",{enumerable:!0,get:function(){return r(my).default}}),Object.defineProperty(t,"makeStateDataType",{enumerable:!0,get:function(){return r(yy).default}}),Object.defineProperty(t,"make",{enumerable:!0,get:function(){return r(Gy).default}}),Object.defineProperty(t,"oneFlight",{enumerable:!0,get:function(){return r(Rw).default}}),Object.defineProperty(t,"patterns",{enumerable:!0,get:function(){return r(Aw).default}}),Object.defineProperty(t,"proxyEvents",{enumerable:!0,get:function(){return Iw.proxyEvents}}),Object.defineProperty(t,"transferEvents",{enumerable:!0,get:function(){return Iw.transferEvents}}),Object.defineProperty(t,"resolveWith",{enumerable:!0,get:function(){return r(Dw).default}}),Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return r(lS).default}}),Object.defineProperty(t,"tap",{enumerable:!0,get:function(){return r(fS).default}}),Object.defineProperty(t,"whileInFlight",{enumerable:!0,get:function(){return r(dS).default}}),Object.defineProperty(t,"Exception",{enumerable:!0,get:function(){return r(DS).default}}),Object.defineProperty(t,"deprecated",{enumerable:!0,get:function(){return r(_E).default}}),Object.defineProperty(t,"inBrowser",{enumerable:!0,get:function(){return r(SE).default}})});t(kE),Rs("keys",function(){return function(e){return ac(bc(e))}});var EE=ks.Object.keys,TE=r(function(e){e.exports={default:EE,__esModule:!0}});t(TE);var PE=4;var OE=function(e){return Wh(e,PE)},CE=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.safeSetTimeout=function(){var e=setTimeout.apply(void 0,arguments);e.unref&&e.unref();return e},t.safeSetInterval=function(){var e=setInterval.apply(void 0,arguments);e.unref&&e.unref();return e}});t(CE);CE.safeSetTimeout,CE.safeSetInterval;var ME=0;var jE=function(e){var t=++ME;return av(e)+t};var xE=function(e){return Gb(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&Lw(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var u=r[n];u&&e(t,u,n,o)}return t})},RE=Object.prototype.hasOwnProperty,AE=xE(function(e,t){if(sp(t)||pp(t))Ld(t,hp(t),e);else for(var r in t)RE.call(t,r)&&Dd(e,r,t[r])});var IE=function(e){return function(t){return null==e?void 0:e[t]}},DE=IE({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),LE=/[&<>"']/g,FE=RegExp(LE.source);var NE=function(e){return(e=av(e))&&FE.test(e)?e.replace(LE,DE):e};var UE=function(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),u=a.length;u--;){var s=a[e?u:++i];if(!1===r(o[s],s,o))break}return t}},zE=UE();var qE=function(e,t){return e&&zE(e,t,hp)};var BE=function(e,t){return e&&qE(e,Vb(t))},WE="[object String]";var VE=function(e){return"string"==typeof e||!Gd(e)&&Nd(e)&&Ff(e)==WE};var GE=function(e,t){return sf(t,function(t){return e[t]})};var HE=function(e){return null==e?[]:GE(e,hp(e))},JE=Math.max;var YE=function(e,t,r,n){e=pp(e)?e:HE(e),r=r&&!n?bw(r):0;var i=e.length;return r<0&&(r=JE(i+r,0)),VE(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&O_(e,t,r)>-1},$E="[object Date]";var KE=function(e){return Nd(e)&&Ff(e)==$E},XE=rp&&rp.isDate,ZE=XE?tp(XE):KE,QE="__lodash_hash_undefined__";var eT=function(e){return this.__data__.set(e,QE),this};var tT=function(e){return this.__data__.has(e)};function rT(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Pd;++t<r;)this.add(e[t])}rT.prototype.add=rT.prototype.push=eT,rT.prototype.has=tT;var nT=rT;var iT=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var oT=function(e,t){return e.has(t)},aT=1,uT=2;var sT=function(e,t,r,n,i,o){var a=r&aT,u=e.length,s=t.length;if(u!=s&&!(a&&s>u))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,f=!0,d=r&uT?new nT:void 0;for(o.set(e,t),o.set(t,e);++l<u;){var p=e[l],h=t[l];if(n)var v=a?n(h,p,l,t,e,o):n(p,h,l,e,t,o);if(void 0!==v){if(v)continue;f=!1;break}if(d){if(!iT(t,function(e,t){if(!oT(d,t)&&(p===e||i(p,e,r,n,o)))return d.push(t)})){f=!1;break}}else if(p!==h&&!i(p,h,r,n,o)){f=!1;break}}return o.delete(e),o.delete(t),f};var cT=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r};var lT=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},fT=1,dT=2,pT="[object Boolean]",hT="[object Date]",vT="[object Error]",gT="[object Map]",mT="[object Number]",yT="[object RegExp]",bT="[object Set]",_T="[object String]",wT="[object Symbol]",ST="[object ArrayBuffer]",kT="[object DataView]",ET=Pf?Pf.prototype:void 0,TT=ET?ET.valueOf:void 0;var PT=function(e,t,r,n,i,o,a){switch(r){case kT:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ST:return!(e.byteLength!=t.byteLength||!o(new $p(e),new $p(t)));case pT:case hT:case mT:return lf(+e,+t);case vT:return e.name==t.name&&e.message==t.message;case yT:case _T:return e==t+"";case gT:var u=cT;case bT:var s=n&fT;if(u||(u=lT),e.size!=t.size&&!s)return!1;var c=a.get(e);if(c)return c==t;n|=dT,a.set(e,t);var l=sT(u(e),u(t),n,i,o,a);return a.delete(e),l;case wT:if(TT)return TT.call(e)==TT.call(t)}return!1},OT=1,CT=Object.prototype.hasOwnProperty;var MT=function(e,t,r,n,i,o){var a=r&OT,u=Ip(e),s=u.length;if(s!=Ip(t).length&&!a)return!1;for(var c=s;c--;){var l=u[c];if(!(a?l in t:CT.call(t,l)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var d=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<s;){var h=e[l=u[c]],v=t[l];if(n)var g=a?n(v,h,l,t,e,o):n(h,v,l,e,t,o);if(!(void 0===g?h===v||i(h,v,r,n,o):g)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var m=e.constructor,y=t.constructor;m!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(d=!1)}return o.delete(e),o.delete(t),d},jT=1,xT="[object Arguments]",RT="[object Array]",AT="[object Object]",IT=Object.prototype.hasOwnProperty;var DT=function(e,t,r,n,i,o){var a=Gd(e),u=Gd(t),s=a?RT:Hp(e),c=u?RT:Hp(t),l=(s=s==xT?AT:s)==AT,f=(c=c==xT?AT:c)==AT,d=s==c;if(d&&Jd(e)){if(!Jd(t))return!1;a=!0,l=!1}if(d&&!l)return o||(o=new jd),a||ip(e)?sT(e,t,r,n,i,o):PT(e,t,s,r,n,i,o);if(!(r&jT)){var p=l&&IT.call(e,"__wrapped__"),h=f&&IT.call(t,"__wrapped__");if(p||h){var v=p?e.value():e,g=h?t.value():t;return o||(o=new jd),i(v,g,r,n,o)}}return!!d&&(o||(o=new jd),MT(e,t,r,n,i,o))};var LT=function e(t,r,n,i,o){return t===r||(null==t||null==r||!Nd(t)&&!Nd(r)?t!=t&&r!=r:DT(t,r,n,i,e,o))};var FT=function(e,t){return LT(e,t)},NT=Object.prototype.hasOwnProperty;var UT=function(e,t){return null!=e&&NT.call(e,t)};var zT=function(e,t,r){for(var n=-1,i=(t=uv(t,e)).length,o=!1;++n<i;){var a=lv(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Zd(i)&&Kd(a,i)&&(Gd(e)||Vd(e))};var qT=function(e,t){return null!=e&&zT(e,t,UT)};var BT=function(e,t,r){var n=-1,i=(t=uv(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var o=null==e?void 0:e[lv(t[n])];void 0===o&&(n=i,o=r),e=Vf(o)?o.call(e):o}return e};var WT=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1},VT=Np&&1/lT(new Np([,-0]))[1]==1/0?function(e){return new Np(e)}:a_,GT=200;var HT=function(e,t,r){var n=-1,i=C_,o=e.length,a=!0,u=[],s=u;if(r)a=!1,i=WT;else if(o>=GT){var c=t?null:VT(e);if(c)return lT(c);a=!1,i=oT,s=new nT}else s=t?[]:u;e:for(;++n<o;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,a&&f==f){for(var d=s.length;d--;)if(s[d]===f)continue e;t&&s.push(f),u.push(l)}else i(s,f,r)||(s!==u&&s.push(f),u.push(l))}return u};var JT=function(e){return Nd(e)&&pp(e)},YT=Gb(function(e){return HT(Tv(e,1,JT,!0))}),$T="Expected a function";var KT=function(e,t){var r;if("function"!=typeof t)throw new TypeError($T);return e=bw(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}};var XT=function(e){return KT(2,e)};var ZT=function(e,t){return function(r,n){if(null==r)return r;if(!pp(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}},QT=ZT(qE);var eP=function(e,t){return(Gd(e)?xd:QT)(e,Vb(t))},tP=/\s+/,rP=function(e,t){var r,n=-1,i=e.length,o=t[0],a=t[1],u=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o,a);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o,a,u);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t);return}},nP=function(e,t,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(tP.test(r)){for(var o=r.split(tP),a=0,u=o.length;a<u;a++)e[t].apply(e,[o[a]].concat(n));return!1}return!0},iP=function(e){return function(t,r,n){if(!t)throw new Error("Trying to listenTo event: '"+r+"' but the target object is undefined");if((this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=jE("l"))]=t,n||"object"!=typeof r||(n=this),"function"!=typeof t[e])throw new Error("Trying to listenTo event: '"+r+"' on object: "+t.toString()+" but it does not have an 'on' method so is unbindable");return t[e](r,n,this),this}},oP=Array.prototype.slice,aP={on:function(e,t,r){return nP(this,"on",e,[t,r])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this}),this):this},once:function(e,t,r){if(!nP(this,"once",e,[t,r])||!t)return this;var n=this,i=XT(function(){n.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,r)},off:function(e,t,r){var n,i,o,a,u,s,c,l;if(!this._events||!nP(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(u=0,s=(a=e?[e]:hp(this._events)).length;u<s;u++)if(e=a[u],o=this._events[e]){if(this._events[e]=n=[],t||r)for(c=0,l=o.length;c<l;c++)i=o[c],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=oP.call(arguments,1);if(!nP(this,"trigger",e,t))return this;var r=this._events[e],n=this._events.all;return r&&rP(r,t),n&&rP(n,arguments),this},stopListening:function(e,t,r){var n=this._listeningTo;if(!n)return this;var i=!t&&!r;r||"object"!=typeof t||(r=this),e&&((n={})[e._listenId]=e);var o=this;return eP(n,function(e,n){e.off(t,r,o),(i||Wv(e._events))&&delete o._listeningTo[n]}),this},createEmitter:function(e){return AE(e||{},aP)},listenTo:iP("on"),listenToOnce:iP("once"),listenToAndRun:function(e,t,r){return this.listenTo.apply(this,arguments),r||"object"!=typeof t||(r=this),r.apply(this),this}};aP.bind=aP.on,aP.unbind=aP.off,aP.removeListener=aP.off,aP.removeAllListeners=aP.off,aP.emit=aP.trigger;var uP=aP,sP=Array.prototype.slice;function cP(e){if("object"!=typeof(e=e||{}))throw new TypeError("Options must be an object");this.storage={},this.separator=e.separator||"."}cP.prototype.add=function(e,t){(this.storage[e]||(this.storage[e]=[])).push(t)},cP.prototype.remove=function(e){var t,r;for(t in this.storage)(r=this.storage[t]).some(function(t,n){if(t===e)return r.splice(n,1),!0})},cP.prototype.get=function(e){var t,r=[];for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(r=r.concat(this.storage[t]));return r},cP.prototype.getGrouped=function(e){var t,r={};for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(r[t]=sP.call(this.storage[t]));return r},cP.prototype.getAll=function(e){var t,r={};for(t in this.storage)e!==t&&0!==t.indexOf(e+this.separator)||(r[t]=sP.call(this.storage[t]));return r},cP.prototype.run=function(e,t){var r=sP.call(arguments,2);this.get(e).forEach(function(e){e.apply(t||this,r)})};var lP=cP,fP=function(e){return AE({},e)},dP=/^change:/,pP=function(){};function hP(e,t){t||(t={}),this.cid||(this.cid=jE("state")),this._events={},this._values={},this._eventBubblingHandlerCache={},this._definition=Object.create(this._definition),t.parse&&(e=this.parse(e,t)),this.parent=t.parent,this.collection=t.collection,this._keyTree=new lP,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},e&&this.set(e,AE({silent:!0,initial:!0},t)),this._changed={},this._derived&&this._initDerived(),!1!==t.init&&this.initialize.apply(this,arguments)}function vP(e,t,r,n){var i,o,a=e._definition[t]={};if(VE(r))(i=e._ensureValidType(r))&&(a.type=i);else{if(Array.isArray(r)&&(r={type:(o=r)[0],required:o[1],default:o[2]}),(i=e._ensureValidType(r.type))&&(a.type=i),r.required&&(a.required=!0),r.default&&"object"==typeof r.default)throw new TypeError("The default value for "+t+" cannot be an object/array, must be a value or a function which returns a value/object/array");a.default=r.default,a.allowNull=!!r.allowNull&&r.allowNull,r.setOnce&&(a.setOnce=!0),a.required&&void 0===a.default&&!a.setOnce&&(a.default=e._getDefaultForType(i)),a.test=r.test,a.values=r.values}return n&&(a.session=!0),i||(i=VE(r)?r:r.type,console.warn("Invalid data type of `"+i+"` for `"+t+"` property. Use one of the default types or define your own")),Object.defineProperty(e,t,{set:function(e){this.set(t,e)},get:function(){if(!this._values)throw Error('You may be trying to `extend` a state object with "'+t+'" which has been defined in `props` on the object being extended');var e=this._values[t],r=this._dataTypes[a.type];if(void 0!==e)return r&&r.get&&(e=r.get(e)),e;var n=BT(a,"default");(this._values[t]=n,void 0!==n)&&this._getOnChangeForType(a.type)(n,e,t);return n}}),a}function gP(e,t,r){(e._derived[t]={fn:Vf(r)?r:r.fn,cache:!1!==r.cache,depList:r.deps||[]}).depList.forEach(function(r){e._deps[r]=YT(e._deps[r]||[],[t])}),Object.defineProperty(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`"+t+"` is a derived property, it can't be set directly.")}})}AE(hP.prototype,uP,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(e){return NE(this.get(e))},isValid:function(e){return this._validate({},AE(e||{},{validate:!0}))},parse:function(e,t){return e},serialize:function(e){var t=AE({props:!0},e),r=this.getAttributes(t,!0),n=function(e,t){r[t]=this[t].serialize()}.bind(this);return BE(this._children,n),BE(this._collections,n),r},set:function(e,t,r){var n,i,o,a,u,s,c,l,f,d,p,h,v,g,m,y,b,_=this,w=this.extraProperties;if(Nf(e)||null===e?(f=e,r=t):(f={})[e]=t,r=r||{},!this._validate(f,r))return!1;h=r.unset,p=r.silent,g=r.initial,n=this._changing,this._changing=!0,i=[],g?this._previousAttributes={}:n||(this._previousAttributes=this.attributes,this._changed={});for(var S=0,k=Object.keys(f),E=k.length;S<E;S++){if(o=typeof(a=f[l=k[S]]),v=this._values[l],!(u=this._definition[l])){if(this._children[l]||this._collections[l]){Nf(a)||(a={}),this[l].set(a,r);continue}if("ignore"===w)continue;if("reject"===w)throw new TypeError('No "'+l+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===w)u=this._createPropertyDefinition(l,"any");else if(w)throw new TypeError('Invalid value for extraProperties: "'+w+'"')}if(y=this._getCompareForType(u.type),b=this._getOnChangeForType(u.type),(d=this._dataTypes[u.type])&&d.set&&(a=(s=d.set(a)).val,o=s.type),u.test&&(c=u.test.call(this,a,o)))throw new TypeError("Property '"+l+"' failed validation with error: "+c);if(void 0===a&&u.required)throw new TypeError("Required property '"+l+"' must be of type "+u.type+". Tried to set "+a);if(null===a&&u.required&&!u.allowNull)throw new TypeError("Property '"+l+"' must be of type "+u.type+" (cannot be null). Tried to set "+a);if(u.type&&"any"!==u.type&&u.type!==o&&null!=a)throw new TypeError("Property '"+l+"' must be of type "+u.type+". Tried to set "+a);if(u.values&&!YE(u.values,a)){var T=BT(u,"default");if(h&&void 0!==T)a=T;else if(!h||h&&void 0!==a)throw new TypeError("Property '"+l+"' must be one of values: "+u.values.join(", ")+". Tried to set "+a)}if(m=g||!y(v,a,l),u.setOnce&&void 0!==v&&m)throw new TypeError("Property '"+l+"' can only be set once.");m?(b(a,v,l),g||(this._changed[l]=a,this._previousAttributes[l]=v,h&&delete this._values[l],p||i.push({prev:v,val:a,key:l})),h||(this._values[l]=a)):delete this._changed[l]}if(i.length&&(this._pending=!0),i.forEach(function(e){_.trigger("change:"+e.key,_,e.val,r)}),n)return this;for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},get:function(e){return this[e]},toggle:function(e){var t,r,n,i,o=this._definition[e];if("boolean"===o.type)this[e]=!this[e];else{if(!o||!o.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[e]=(t=o.values,r=this[e],n=t.length,(i=t.indexOf(r)+1)>n-1&&(i=0),t[i])}return this},previousAttributes:function(){return fP(this._previousAttributes)},hasChanged:function(e){return null==e?!!Object.keys(this._changed).length:qT(this._derived,e)?this._derived[e].depList.some(function(e){return this.hasChanged(e)},this):qT(this._changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&fP(this._changed);var t,r,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in e)(r=this._definition[o])&&(this._getCompareForType(r.type)(i[o],t=e[o])||((n||(n={}))[o]=t));return n},toJSON:function(){return this.serialize()},unset:function(e,t){var r=this;(e=Array.isArray(e)?e:[e]).forEach(function(e){var n,i=r._definition[e];if(i)return i.required?(n=BT(i,"default"),r.set(e,n,t)):r.set(e,n,AE({},t,{unset:!0}))})},clear:function(e){var t=this;return Object.keys(this.attributes).forEach(function(r){t.unset(r,e)}),this},previous:function(e){return null!=e&&Object.keys(this._previousAttributes).length?this._previousAttributes[e]:null},_getDefaultForType:function(e){var t=this._dataTypes[e];return t&&t.default},_getCompareForType:function(e){var t=this._dataTypes[e];return t&&t.compare?t.compare.bind(this):FT},_getOnChangeForType:function(e){var t=this._dataTypes[e];return t&&t.onChange?t.onChange.bind(this):pP},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=AE({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,AE(t||{},{validationError:r})),!1)},_createPropertyDefinition:function(e,t,r){return vP(this,e,t,r)},_ensureValidType:function(e){return YE(["string","number","boolean","array","object","date","state","any"].concat(Object.keys(this._dataTypes)),e)?e:void 0},getAttributes:function(e,t){e=AE({session:!1,props:!1,derived:!1},e||{});var r,n,i={};for(var o in this._definition)n=this._definition[o],(e.session&&n.session||e.props&&!n.session)&&(r=t?this._values[o]:this[o],t&&r&&Vf(r.serialize)&&(r=r.serialize()),void 0===r&&(r=BT(n,"default")),void 0!==r&&(i[o]=r));if(e.derived)for(var a in this._derived)i[a]=this[a];return i},_initDerived:function(){var e=this;BE(this._derived,function(t,r){var n=e._derived[r];n.deps=n.depList;var i=function(){var t=n.fn.call(e);e._cache[r]===t&&n.cache||(n.cache&&(e._previousAttributes[r]=e._cache[r]),e._cache[r]=t,e.trigger("change:"+r,e,e._cache[r]))};n.deps.forEach(function(t){e._keyTree.add(t,i)})}),this.on("all",function(t){dP.test(t)&&e._keyTree.get(t.split(":")[1]).forEach(function(e){e()})},this)},_getDerivedProperty:function(e,t){return this._derived[e].cache?(!t&&this._cache.hasOwnProperty(e)||(this._cache[e]=this._derived[e].fn.apply(this)),this._cache[e]):this._derived[e].fn.apply(this)},_initCollections:function(){var e;if(this._collections)for(e in this._collections)this._safeSet(e,new this._collections[e](null,{parent:this}))},_initChildren:function(){var e;if(this._children)for(e in this._children)this._safeSet(e,new this._children[e]({},{parent:this})),this.listenTo(this[e],"all",this._getCachedEventBubblingHandler(e))},_getCachedEventBubblingHandler:function(e){return this._eventBubblingHandlerCache[e]||(this._eventBubblingHandlerCache[e]=function(t,r,n){dP.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],r,n):"change"===t&&this.trigger("change",this)}.bind(this)),this._eventBubblingHandlerCache[e]},_verifyRequired:function(){var e=this.attributes;for(var t in this._definition)if(this._definition[t].required&&void 0===e[t])return!1;return!0},_safeSet:function(e,t){if(e in this)throw new Error("Encountered namespace collision while setting instance property `"+e+"`");return this[e]=t,this}}),Object.defineProperties(hP.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var mP={string:{default:function(){return""}},date:{set:function(e){var t;if(null==e)t="object";else if(ZE(e))t="date",e=e.valueOf();else{var r=null,n=new Date(e).valueOf();isNaN(n)&&(n=new Date(parseInt(e,10)).valueOf(),isNaN(n)&&(r=!0)),e=n,t="date",r&&(t=typeof e)}return{val:e,type:t}},get:function(e){return null==e?e:new Date(e)},default:function(){return new Date}},array:{set:function(e){return{val:e,type:Array.isArray(e)?"array":typeof e}},default:function(){return[]}},object:{set:function(e){var t=typeof e;return"object"!==t&&void 0===e&&(e=null,t="object"),{val:e,type:t}},default:function(){return{}}},state:{set:function(e){return e instanceof hP||e&&e.isState?{val:e,type:"state"}:{val:e,type:typeof e}},compare:function(e,t){return e===t},onChange:function(e,t,r){t&&this.stopListening(t,"all",this._getCachedEventBubblingHandler(r)),null!=e&&this.listenTo(e,"all",this._getCachedEventBubblingHandler(r))}}};hP.extend=function(e){var t,r=this;t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return r.apply(this,arguments)},AE(t,r);var n=function(){this.constructor=t};if(n.prototype=r.prototype,t.prototype=new n,t.prototype._derived=AE({},r.prototype._derived),t.prototype._deps=AE({},r.prototype._deps),t.prototype._definition=AE({},r.prototype._definition),t.prototype._collections=AE({},r.prototype._collections),t.prototype._children=AE({},r.prototype._children),t.prototype._dataTypes=AE({},r.prototype._dataTypes||mP),e)for(var i=["dataTypes","props","session","derived","collections","children"],o=0;o<arguments.length;o++){var a=arguments[o];a.dataTypes&&BE(a.dataTypes,function(e,r){t.prototype._dataTypes[r]=e}),a.props&&BE(a.props,function(e,r){vP(t.prototype,r,e)}),a.session&&BE(a.session,function(e,r){vP(t.prototype,r,e,!0)}),a.derived&&BE(a.derived,function(e,r){gP(t.prototype,r,e)}),a.collections&&BE(a.collections,function(e,r){t.prototype._collections[r]=e}),a.children&&BE(a.children,function(e,r){t.prototype._children[r]=e}),AE(t.prototype,Uv(a,i))}return t.__super__=r.prototype,t};var yP=hP,bP=r(function(e,t){t.__esModule=!0;var r,n=(r=Sy)&&r.__esModule?r:{default:r};t.default=function(e,t,r){return t in e?(0,n.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}});t(bP);var _P=r(function(e,t){t.__esModule=!0;var r,n=(r=SS)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,n.default)(e)}});t(_P);zy("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return zb.def(My(this,"Set"),e=0===e?0:e,e)}},zb);xs(xs.P+xs.R,"Set",{toJSON:qb("Set")}),qy("Set"),By("Set");var wP=ks.Set,SP=r(function(e){e.exports={default:wP,__esModule:!0}});t(SP);var kP=function(){return Tf.Date.now()},EP="Expected a function",TP=Math.max,PP=Math.min;var OP=function(e,t,r){var n,i,o,a,u,s,c=0,l=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError(EP);function p(t){var r=n,o=i;return n=i=void 0,c=t,a=e.apply(o,r)}function h(e){var r=e-s;return void 0===s||r>=t||r<0||f&&e-c>=o}function v(){var e=kP();if(h(e))return g(e);u=setTimeout(v,function(e){var r=t-(e-s);return f?PP(r,o-(e-c)):r}(e))}function g(e){return u=void 0,d&&n?p(e):(n=i=void 0,a)}function m(){var e=kP(),r=h(e);if(n=arguments,i=this,s=e,r){if(void 0===u)return function(e){return c=e,u=setTimeout(v,t),l?p(e):a}(s);if(f)return u=setTimeout(v,t),p(s)}return void 0===u&&(u=setTimeout(v,t)),a}return t=vw(t)||0,Nf(r)&&(l=!!r.leading,o=(f="maxWait"in r)?TP(vw(r.maxWait)||0,t):o,d="trailing"in r?!!r.trailing:d),m.cancel=function(){void 0!==u&&clearTimeout(u),c=0,n=s=i=u=void 0},m.flush=function(){return void 0===u?a:g(kP())},m},CP=8;function MP(e,t,r){var n=Cw(e,CP,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=MP.placeholder,n}MP.placeholder={};var jP=MP,xP=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundError=t.StorageError=void 0;var r=a(RS),n=a(by),i=a(AS),o=a(IS);function a(e){return e&&e.__esModule?e:{default:e}}var u=t.StorageError=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(kE.Exception);t.NotFoundError=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(u)});t(xP);xP.NotFoundError,xP.StorageError;var RP=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=h(bP),n=h(Db),i=h(_P),o=h(SP),a=h(Wb),u=h(Yl),s=h(nf),c=h(xw),l=h(BT),f=h(xv),d=h(OP),p=h(jP);function h(e){return e&&e.__esModule?e:{default:e}}t.persist=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(3===r.length)return e("@").apply(void 0,r);var i=r[0],o=r[1];return function(e,t,r){if("initialize"!==t)throw new TypeError("@persist can only currently be applied to AmpersandState objects or their derivatives and must be applied to the initialize method");r.value=(0,c.default)(r.value,function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var c=(0,s.default)(e,this,n),l="@"===i?"change":"change:"+i;return this.on(l,(0,d.default)(function(){var e=!o||s.default.apply(Reflect,[o,t].concat(n));return e?"@"===i?t.boundedStorage.put(i,t):t.boundedStorage.put(i,t[i]):u.default.resolve()},0)),c}),_(e,t)}},t.waitForValue=function(e){if(!e)throw new Error("`key` is required");return function(t,r,o){return m.add(t,r,e),o.value=(0,c.default)(o.value,function(e){for(var n=this,o=arguments.length,a=Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];var l=m.get(t,r);return u.default.all([].concat((0,i.default)(l)).map(function(e){return n.boundedStorage.waitFor(e)})).then(function(){return(0,s.default)(e,n,a)})}),"object"!==(void 0===t?"undefined":(0,n.default)(t))||t.prototype||(t[r]=o.value),_(t,r),o}};var v=a.default,g=o.default,m=new((0,kE.make)(v,v,g));var y=new o.default;var b=new o.default;function _(e,t){var n=function(e){return e.namespace?e.namespace:e}(e);if(!y.has(n)){if(y.add(n),e.initialize)return void(e.initialize=(0,c.default)(e.initialize,function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=(0,s.default)(e,this,r);return(0,s.default)(i,this,r),o}));e.initialize=i}function i(){var n=this,i=this.getNamespace();this.spark.initialize=(0,c.default)(this.spark.initialize||f.default,function(o){var a=this;b.add(i);for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];(0,s.default)(o,this,f);var h=(0,p.default)(function(e,t){a.logger.debug("storage:("+i+"): got `"+e+"` for first time"),"@"===e?n.parent.set((0,r.default)({},i.toLowerCase(),t)):(0,l.default)(n[e],"isState")?n[e].set(t):n.set(e,t),a.logger.debug("storage:("+i+"): set `"+e+"` for first time")}),v=(0,p.default)(function(e,t){return t instanceof xP.NotFoundError||t.toString().includes("MockNotFoundError")?(a.logger.debug("storage("+i+"): no data for `"+e+"`, continuing"),u.default.resolve()):(a.logger.error("storage("+i+"): failed to init `"+e+"`",t),u.default.reject(t))}),g=m.get(e,t),y=[];g.forEach(function(e){y.push(a.boundedStorage.get(i,e).then(h(e)).catch(v(e)))}),u.default.all(y).then(function(){b.delete(i),0===b.size&&(a.loaded=!0)})})}}});t(RP);RP.persist,RP.waitForValue;var AP=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(Ql),n=l(Ls),i=l(Yl),o=l(Wb),a=l(by),u=l(ky),s=l(Vy);t.default=function(e,t){var s,l,d=(s=(0,kE.oneFlight)({keyFactory:function(e){return e}}),function(e,t,r,n,i){var o={};Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0);o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0);void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((l=function(){function r(){(0,a.default)(this,r),t.logger.debug("spark-store: constructing "+e+"Storage"),f.set(this,new o.default)}return(0,u.default)(r,[{key:"clear",value:function(){var e=[];return this.bindings.forEach(function(t){e.push(t.clear())}),i.default.all(e)}},{key:"del",value:function(e,r){return t.logger.debug("spark-store: removing "+e+":"+r),this._getBinding(e).then(function(e){return e.del(r)})}},{key:"get",value:function(e,r){return t.logger.debug("spark-store: retrieving "+e+":"+r),this._getBinding(e).then(function(e){return e.get(r)})}},{key:"put",value:function(e,r,n){return void 0===n?this.del(e,r):(t.logger.debug("spark-store: setting "+e+":"+r),this._getBinding(e).then(function(e){return e.put(r,n.serialize?n.serialize():n)}).then(function(){return n}))}},{key:"_getBinding",value:function(e){var r=this;return new i.default(function(n){t.logger.debug("storage: getting binding for `"+e+"`");var i=r.bindings.get(e);return i?(t.logger.debug("storage: found binding for `"+e+"`"),n(i)):n(r.adapter.bind(e,{logger:t.logger}).then(function(n){return t.logger.debug("storage: made binding for `"+e+"`"),r.bindings.set(e,n),n}))})}},{key:"adapter",get:function(){return t.config.storage[e+"Adapter"]}},{key:"bindings",get:function(){return f.get(this)}}]),r}()).prototype,"_getBinding",[s],(0,n.default)(l.prototype,"_getBinding"),l.prototype),l);return(0,r.default)(d.prototype,c.default),new d};var c=l(uP);function l(e){return e&&e.__esModule?e:{default:e}}var f=new s.default});t(AP);var IP=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=f(Ls),n=f(Wb),i=f(by),o=f(ky),a=f(TE),u=f(Vy),s=f(BT),c=f(Nf),l=f(Gd);function f(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var a,u;return new(a=(0,kE.oneFlight)({keyFactory:function(e){return"initValue-"+e}}),function(e,t,r,n,i){var o={};Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0);o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0);void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((u=function(){function r(){(0,i.default)(this,r),d.set(this,new n.default)}return(0,o.default)(r,[{key:"clear",value:function(){return t.spark[e+"Storage"].del(t.getNamespace())}},{key:"del",value:function(){for(var r,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return(r=t.spark[e+"Storage"]).del.apply(r,[t.getNamespace()].concat(i))}},{key:"get",value:function(r){var n=d.get(this).get(r);return n||(n=new kE.Defer,d.get(this).set(r,n)),t.spark[e+"Storage"].get(t.getNamespace(),r).then(function(e){return n.resolve(),e})}},{key:"put",value:function(r,n){return t.spark[e+"Storage"].put(t.getNamespace(),r,p(n))}},{key:"waitFor",value:function(e){t.logger.debug("plugin-storage("+t.getNamespace()+"): waiting to init key `"+e+"`");var r=d.get(this).get(e);return r?(t.logger.debug("plugin-storage("+t.getNamespace()+"): already inited `"+e+"`"),r.promise):(t.logger.debug("plugin-storage("+t.getNamespace()+"): initing `"+e+"`"),this.initValue(e))}},{key:"initValue",value:function(r){var n=new kE.Defer;return d.get(this).set(r,n),t.spark[e+"Storage"].get(t.getNamespace(),r).then(function(e){t.logger.debug("plugin-storage("+t.getNamespace()+"): got `"+r+"` for first time"),"@"===r?t.parent.set(e):(0,s.default)(t[r],"isState")?t[r].set(e):t.set(r,e),t.logger.debug("plugin-storage("+t.getNamespace()+"): set `"+r+"` for first time"),n.resolve(),t.logger.debug("plugin-storage("+t.getNamespace()+"): inited `"+r+"`")}).catch(function(e){return e instanceof xP.NotFoundError||e.toString().includes("MockNotFoundError")?(t.logger.debug("plugin-storage("+t.getNamespace()+"): no data for `"+r+"`, continuing"),n.resolve()):(t.logger.warn("plugin-storage("+t.getNamespace()+"): failed to init `"+r+"`",e),n.reject(e))}),n.promise}}]),r}()).prototype,"initValue",[a],(0,r.default)(u.prototype,"initValue"),u.prototype),u)};var d=new u.default;function p(e){if(!(0,c.default)(e))return e;var t=e.serialize?e.serialize():e;return(0,a.default)(t).forEach(function(e){var r=t[e];(0,l.default)(r)?0===r.length?t[e]=void 0:t[e]=r.map(p):(0,c.default)(r)&&(0,a.default)(r).forEach(function(e){r[e]=p(r[e])})}),(0,a.default)(t).reduce(function(e,r){return e&&!t[r]},!0)?void 0:t}});t(IP);var DP=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(TE),n=o(Wb),i=o(Yl);function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=t||{},!e)return i.default.reject(new Error("`namespace` is required"));if(!t.logger)return i.default.reject(new Error("`options.logger` is required"));var o=t.logger,a=new n.default;return t.data&&(0,r.default)(t.data).forEach(function(e){a.set(e,t.data[e])}),o.debug("memory-store-adapter: returning binding"),i.default.resolve({clear:function(){return o.debug("memory-store-adapter: clearing the binding"),i.default.resolve(a.clear())},del:function(e){return o.debug("memory-store-adapter: deleting `"+e+"`"),i.default.resolve(a.delete(e))},get:function(e){o.debug("memory-store-adapter: reading `"+e+"`");var t=a.get(e);return void 0===t?i.default.reject(new xP.NotFoundError):i.default.resolve(t)},put:function(e,t){return o.debug("memory-store-adapter: writing `"+e+"`"),i.default.resolve(a.set(e,t))}})}t.default={bind:a,preload:function(e){return{bind:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[t]&&(r.data=e[t]),a(t,r)}}}}});t(DP);var LP=r(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"persist",{enumerable:!0,get:function(){return RP.persist}}),Object.defineProperty(t,"waitForValue",{enumerable:!0,get:function(){return RP.waitForValue}}),Object.defineProperty(t,"makeSparkStore",{enumerable:!0,get:function(){return r(AP).default}}),Object.defineProperty(t,"makeSparkPluginStore",{enumerable:!0,get:function(){return r(IP).default}}),Object.defineProperty(t,"MemoryStoreAdapter",{enumerable:!0,get:function(){return r(DP).default}}),Object.defineProperty(t,"StorageError",{enumerable:!0,get:function(){return xP.StorageError}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return xP.NotFoundError}})});t(LP);var FP=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(Yl),n=l(nf),i=l(TE),o=l(Uv),a=l(Nf),u=l(Hv),s=l(Jm),c=l(yP);function l(e){return e&&e.__esModule?e:{default:e}}var f=c.default.extend({derived:{boundedStorage:{deps:[],fn:function(){return(0,LP.makeSparkPluginStore)("bounded",this)}},unboundedStorage:{deps:[],fn:function(){return(0,LP.makeSparkPluginStore)("unbounded",this)}},config:{cache:!1,deps:["spark","spark.config"],fn:function(){if(this.spark&&this.spark.config){var e=this.getNamespace();return e?this.spark.config[e.toLowerCase()]:this.spark.config}return{}}},logger:{deps:["spark","spark.logger"],fn:function(){return this.spark.logger||console}},spark:{deps:["parent"],fn:function(){if(!this.parent&&!this.collection)throw new Error("Cannot determine `this.spark` without `this.parent` or `this.collection`. Please initialize `this` via `children` or `collection` or set `this.parent` manually");for(var e=this;e.parent||e.collection;)e=e.parent||e.collection;return e}}},session:{parent:{type:"any"},ready:{default:!0,type:"boolean"}},clear:function(e){var t=this;return(0,i.default)(this.attributes).forEach(function(r){"parent"!==r&&t.unset(r,e)}),(0,i.default)(this._children).forEach(function(e){t[e].clear()}),(0,i.default)(this._collections).forEach(function(e){t[e].reset()}),this},initialize:function(){for(var e=this,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];(0,n.default)(c.default.prototype.initialize,this,r),this._dataTypes=(0,u.default)(this._dataTypes),(0,i.default)(this._dataTypes).forEach(function(t){e._dataTypes[t].set&&(e._dataTypes[t].set=e._dataTypes[t].set.bind(e))}),this.on("change",function(t,r){e.parent&&e.parent.trigger("change:"+e.getNamespace().toLowerCase(),e.parent,e,r)})},inspect:function(e){return s.default.inspect((0,o.default)(this.serialize({props:!0,session:!0,derived:!0}),"boundedStorage","unboundedStorage","config","logger","spark","parent"),{depth:e})},request:function(){var e;return(e=this.spark).request.apply(e,arguments)},upload:function(){var e;return(e=this.spark).upload.apply(e,arguments)},when:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(i&&i.length>0)throw new Error("#when() does not accept a callback, you must attach to its promise");return new r.default(function(r){t.once(e,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t)})})},_filterSetParameters:function(e,t,r){var n=void 0;return(0,a.default)(e)||null===e?(n=e,r=t):(n={})[e]=t,[n,r=r||{}]}});t.default=f});t(FP),xs(xs.S+xs.F*!vs,"Object",{defineProperties:uc});var NP=ks.Object,UP=function(e,t){return NP.defineProperties(e,t)},zP=r(function(e){e.exports={default:UP,__esModule:!0}});t(zP);var qP=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthError=void 0;var r=s(zP),n=s(RS),i=s(by),o=s(ky),a=s(AS),u=s(IS);function s(e){return e&&e.__esModule?e:{default:e}}var c=t.OAuthError=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"parse",value:function(e){var t=e.body||e;return(0,r.default)(this,{error:{enumerable:!0,value:t.error},errorDescription:{enumerable:!0,value:t.error_description},errorUri:{enumerable:!0,value:t.error_uri},res:{enumerable:!1,value:e}}),this.errorDescription}}]),t}(kE.Exception),l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),d=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),p=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),h=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),v=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),g={OAuthError:c,InvalidRequestError:l,InvalidClientError:f,InvalidGrantError:d,UnauthorizedClientError:p,UnsupportGrantTypeError:h,InvalidScopeError:v,invalid_request:l,invalid_client:f,invalid_grant:d,unauthorized_client:p,unsupported_grant_type:h,invalid_scope:v,select:function(e){return g[e]||c}};t.default=g});t(qP);qP.OAuthError;var BP=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sortScope=function(e){if(!e)return"";return e.split(" ").sort().join(" ")},t.filterScope=function(e,t){if(!t)return"";return t.split(" ").filter(function(t){return t!==e}).sort().join(" ")}});t(BP);BP.sortScope,BP.filterScope;var WP=hc("iterator"),VP=ks.isIterable=function(e){var t=Object(e);return void 0!==t[WP]||"@@iterator"in t||Gs.hasOwnProperty(zc(t))},GP=r(function(e){e.exports={default:VP,__esModule:!0}});t(GP);var HP=ks.getIterator=function(e){var t=Jc(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return Ps(t.call(e))},JP=r(function(e){e.exports={default:HP,__esModule:!0}});t(JP);var YP=r(function(e,t){t.__esModule=!0;var r=i(GP),n=i(JP);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var r=[],i=!0,o=!1,a=void 0;try{for(var u,s=(0,n.default)(e);!(i=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()});t(YP);var $P=function(e,t,r,n){if(!Nf(e))return e;for(var i=-1,o=(t=uv(t,e)).length,a=o-1,u=e;null!=u&&++i<o;){var s=lv(t[i]),c=r;if(i!=a){var l=u[s];void 0===(c=n?n(l,s,u):void 0)&&(c=Nf(l)?l:Kd(t[i+1])?[]:{})}Dd(u,s,c),u=u[s]}return e};var KP=function(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],u=fv(e,a);r(u,a)&&$P(o,uv(a,e),u)}return o};var XP=function(e,t){return null!=e&&t in Object(e)};var ZP=function(e,t){return null!=e&&zT(e,t,XP)};var QP=function(e,t){return KP(e,t,function(t,r){return ZP(e,r)})},eO=Nv(function(e,t){return null==e?{}:QP(e,t)});xs(xs.S+xs.F*hs(function(){Reflect.defineProperty(Cs.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){Ps(e),t=fs(t,!0),Ps(r);try{return Cs.f(e,t,r),!0}catch(e){return!1}}});var tO=ks.Reflect.defineProperty,rO=r(function(e){e.exports={default:tO,__esModule:!0}});t(rO),xs(xs.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return Ss.f(Ps(e),t)}});var nO=ks.Reflect.getOwnPropertyDescriptor,iO=r(function(e){e.exports={default:nO,__esModule:!0}});t(iO),xs(xs.S,"Number",{isNaN:function(e){return e!=e}});var oO=ks.Number.isNaN,aO=r(function(e){e.exports={default:oO,__esModule:!0}});t(aO);var uO="[object Number]";var sO=function(e){return"number"==typeof e||Nd(e)&&Ff(e)==uO},cO=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(aO),n=o(zP),i=o(sO);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){(0,n.default)(this,{loaded:{enumerable:!0,value:e,writable:!1},total:{enumerable:!0,value:t,writable:!1},lengthComputable:{enumerable:!0,value:(0,i.default)(e)&&!(0,r.default)(e)&&(0,i.default)(t)&&!(0,r.default)(t)&&t>0,writable:!1}})}});t(cO);var lO=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(Yl),n=u(rO),i=u(TE),o=u(by),a=u(ky);function u(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){var r=this;(0,o.default)(this,e),t&&(0,i.default)(t).forEach(function(e){var i=t[e];(0,n.default)(r,e,{enumerable:!0,value:i})})}return(0,a.default)(e,[{key:"onRequest",value:function(e){return r.default.resolve(e)}},{key:"onRequestError",value:function(e,t){return r.default.reject(t)}},{key:"onResponse",value:function(e,t){return r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){return r.default.reject(t)}}],[{key:"create",value:function(){throw new Error("`Interceptor.create()` must be defined")}}]),e}();t.default=s});t(lO);var fO=ss.f,dO=function(e){return function(t){for(var r,n=us(t),i=ac(n),o=i.length,a=0,u=[];o>a;)fO.call(n,r=i[a++])&&u.push(e?[r,n[r]]:n[r]);return u}},pO=dO(!1);xs(xs.S,"Object",{values:function(e){return pO(e)}});var hO=ks.Object.values,vO=r(function(e){e.exports={default:hO,__esModule:!0}});t(vO);var gO=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(Ql),n=u(RS),i=u(by),o=u(AS),a=u(IS);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(e),u=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(e),s=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),c=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),f=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),d=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),p=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),h=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),v=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),g=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),m=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),y=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),b=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),_=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),w=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),S=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),k=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),E=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),T=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(u),P=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(e),O=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(P),C=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(P),M=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(P),j=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(P),x=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(P);(0,r.default)(e,{0:t,NetworkOrCORSError:t,400:u,BadRequest:u,401:s,Unauthorized:s,402:c,PaymentRequired:c,403:l,Forbidden:l,404:f,NotFound:f,405:d,MethodNotAllowed:d,406:p,NotAcceptable:p,407:h,ProxyAuthenticationRequired:h,408:v,RequestTimeout:v,409:g,Conflict:g,410:m,Gone:m,411:y,LengthRequired:y,412:b,PreconditionFailed:b,413:_,RequestEntityTooLarge:_,414:w,RequestUriTooLong:w,415:S,UnsupportedMediaType:S,416:k,RequestRangeNotSatisfiable:k,417:E,ExpectationFailed:E,429:T,TooManyRequests:T,500:P,InternalServerError:P,501:O,NotImplemented:O,502:C,BadGateway:C,503:M,ServiceUnavailable:M,504:j,GatewayTimeout:j,505:x,HttpVersionNotSupported:x,select:function(t){if(null==t)return e;t=t.statusCode||t;var r=e[t];return r||(t=t.toString().split("").shift()+"00",t=parseInt(t,10),e[t]||e)}})}});t(gO);var mO=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=v(uf),o=v(vO),a=v(zP),u=v(Db),s=v(RS),c=v(by),l=v(ky),f=v(AS),d=v(IS),p=v(eO),h=v(gO);function v(e){return e&&e.__esModule?e:{default:e}}var g=(n=r=function(e){function t(){return(0,c.default)(this,t),(0,f.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,l.default)(t,[{key:"parse",value:function(e){var t=e.body,r=void 0;switch(void 0===t?"undefined":(0,u.default)(t)){case"string":try{t=JSON.parse(t),r=this.parseObject(t)}catch(e){r=t}break;case"object":r=this.parseObject(t)}return r||(r=this.defaultMessage),(0,a.default)(this,{body:{enumerable:!1,value:t},httpVersion:{enumerable:!1,value:e.httpVersion},headers:{enumerable:!1,value:e.headers||{}},rawHeaders:{enumerable:!1,value:e.rawHeaders||[]},trailers:{enumerable:!1,value:e.trailers||{}},rawTrailers:{enumerable:!1,value:e.rawTrailers||[]},method:{enumerable:!1,value:e.method},url:{enumerable:!1,value:e.url},statusCode:{enumerable:!1,value:e.statusCode},statusMessage:{enumerable:!1,value:e.statusMessage},socket:{enumerable:!1,value:e.socket},_res:{enumerable:!1,value:e}}),r}},{key:"parseObject",value:function(e){var r=(0,o.default)((0,p.default)(e,t.errorKeys));if(0===r.length)return(0,i.default)(e,null,2);var n=r[0];return"object"===(void 0===n?"undefined":(0,u.default)(n))?this.parseObject(n):n}}]),t}(kE.Exception),r.errorKeys=["error","errorString","response","errorResponse","message","msg"],r.defaultMessage="An error was received while trying to fulfill the request",n);t.default=g,(0,h.default)(g),g.makeSubTypes=h.default});t(mO);var yO=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(Yl),n=f(zP),i=f(RS),o=f(by),a=f(ky),u=f(AS),s=f(IS),c=f(mO),l=f(lO);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e,r){(0,o.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e)),s=r&&(r.error||r.ErrorConstructor)||c.default;return(0,n.default)(a,{ErrorConstructor:{value:s}}),a}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onResponse",value:function(e,t){if(t.statusCode){if(t.statusCode<400)return r.default.resolve(t);if(404===t.statusCode&&t.body&&2000002===t.body.errorCode)return r.default.resolve(t)}return r.default.reject(new(this.ErrorConstructor.select(t.statusCode))(t))}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(l.default);t.default=d});t(yO);var bO=function(e){return e&&e.length>1?255===e[0]&&216===e[1]&&255===e[2]?{ext:"jpg",mime:"image/jpeg"}:137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]?{ext:"png",mime:"image/png"}:71===e[0]&&73===e[1]&&70===e[2]?{ext:"gif",mime:"image/gif"}:87===e[8]&&69===e[9]&&66===e[10]&&80===e[11]?{ext:"webp",mime:"image/webp"}:70===e[0]&&76===e[1]&&73===e[2]&&70===e[3]?{ext:"flif",mime:"image/flif"}:(73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3])&&67===e[8]&&82===e[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3]?{ext:"tif",mime:"image/tiff"}:66===e[0]&&77===e[1]?{ext:"bmp",mime:"image/bmp"}:73===e[0]&&73===e[1]&&188===e[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===e[0]&&66===e[1]&&80===e[2]&&83===e[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&109===e[30]&&105===e[31]&&109===e[32]&&101===e[33]&&116===e[34]&&121===e[35]&&112===e[36]&&101===e[37]&&97===e[38]&&112===e[39]&&112===e[40]&&108===e[41]&&105===e[42]&&99===e[43]&&97===e[44]&&116===e[45]&&105===e[46]&&111===e[47]&&110===e[48]&&47===e[49]&&101===e[50]&&112===e[51]&&117===e[52]&&98===e[53]&&43===e[54]&&122===e[55]&&105===e[56]&&112===e[57]?{ext:"epub",mime:"application/epub+zip"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&77===e[30]&&69===e[31]&&84===e[32]&&65===e[33]&&45===e[34]&&73===e[35]&&78===e[36]&&70===e[37]&&47===e[38]&&109===e[39]&&111===e[40]&&122===e[41]&&105===e[42]&&108===e[43]&&108===e[44]&&97===e[45]&&46===e[46]&&114===e[47]&&115===e[48]&&97===e[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80!==e[0]||75!==e[1]||3!==e[2]&&5!==e[2]&&7!==e[2]||4!==e[3]&&6!==e[3]&&8!==e[3]?117===e[257]&&115===e[258]&&116===e[259]&&97===e[260]&&114===e[261]?{ext:"tar",mime:"application/x-tar"}:82!==e[0]||97!==e[1]||114!==e[2]||33!==e[3]||26!==e[4]||7!==e[5]||0!==e[6]&&1!==e[6]?31===e[0]&&139===e[1]&&8===e[2]?{ext:"gz",mime:"application/gzip"}:66===e[0]&&90===e[1]&&104===e[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===e[0]&&122===e[1]&&188===e[2]&&175===e[3]&&39===e[4]&&28===e[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===e[0]&&1===e[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===e[0]&&0===e[1]&&0===e[2]&&(24===e[3]||32===e[3])&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]||51===e[0]&&103===e[1]&&112===e[2]&&53===e[3]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&109===e[16]&&112===e[17]&&52===e[18]&&49===e[19]&&109===e[20]&&112===e[21]&&52===e[22]&&50===e[23]&&105===e[24]&&115===e[25]&&111===e[26]&&109===e[27]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&105===e[8]&&115===e[9]&&111===e[10]&&109===e[11]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&0===e[15]?{ext:"mp4",mime:"video/mp4"}:0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&86===e[10]?{ext:"m4v",mime:"video/x-m4v"}:77===e[0]&&84===e[1]&&104===e[2]&&100===e[3]?{ext:"mid",mime:"audio/midi"}:109===e[31]&&97===e[32]&&116===e[33]&&114===e[34]&&111===e[35]&&115===e[36]&&107===e[37]&&97===e[38]?{ext:"mkv",mime:"video/x-matroska"}:26===e[0]&&69===e[1]&&223===e[2]&&163===e[3]?{ext:"webm",mime:"video/webm"}:0===e[0]&&0===e[1]&&0===e[2]&&20===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]?{ext:"mov",mime:"video/quicktime"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&65===e[8]&&86===e[9]&&73===e[10]?{ext:"avi",mime:"video/x-msvideo"}:48===e[0]&&38===e[1]&&178===e[2]&&117===e[3]&&142===e[4]&&102===e[5]&&207===e[6]&&17===e[7]&&166===e[8]&&217===e[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===e[0]&&0===e[1]&&1===e[2]&&"b"===e[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===e[0]&&68===e[1]&&51===e[2]||255===e[0]&&251===e[1]?{ext:"mp3",mime:"audio/mpeg"}:102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&65===e[10]||77===e[0]&&52===e[1]&&65===e[2]&&32===e[3]?{ext:"m4a",mime:"audio/m4a"}:79===e[28]&&112===e[29]&&117===e[30]&&115===e[31]&&72===e[32]&&101===e[33]&&97===e[34]&&100===e[35]?{ext:"opus",mime:"audio/opus"}:79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]?{ext:"ogg",mime:"audio/ogg"}:102===e[0]&&76===e[1]&&97===e[2]&&67===e[3]?{ext:"flac",mime:"audio/x-flac"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&87===e[8]&&65===e[9]&&86===e[10]&&69===e[11]?{ext:"wav",mime:"audio/x-wav"}:35===e[0]&&33===e[1]&&65===e[2]&&77===e[3]&&82===e[4]&&10===e[5]?{ext:"amr",mime:"audio/amr"}:37===e[0]&&80===e[1]&&68===e[2]&&70===e[3]?{ext:"pdf",mime:"application/pdf"}:77===e[0]&&90===e[1]?{ext:"exe",mime:"application/x-msdownload"}:67!==e[0]&&70!==e[0]||87!==e[1]||83!==e[2]?123===e[0]&&92===e[1]&&114===e[2]&&116===e[3]&&102===e[4]?{ext:"rtf",mime:"application/rtf"}:119===e[0]&&79===e[1]&&70===e[2]&&70===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff",mime:"application/font-woff"}:119===e[0]&&79===e[1]&&70===e[2]&&50===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff2",mime:"application/font-woff"}:76===e[34]&&80===e[35]&&(0===e[8]&&0===e[9]&&1===e[10]||1===e[8]&&0===e[9]&&2===e[10]||2===e[8]&&0===e[9]&&2===e[10])?{ext:"eot",mime:"application/octet-stream"}:0===e[0]&&1===e[1]&&0===e[2]&&0===e[3]&&0===e[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===e[0]&&84===e[1]&&84===e[2]&&79===e[3]&&0===e[4]?{ext:"otf",mime:"application/font-sfnt"}:0===e[0]&&0===e[1]&&1===e[2]&&0===e[3]?{ext:"ico",mime:"image/x-icon"}:70===e[0]&&76===e[1]&&86===e[2]&&1===e[3]?{ext:"flv",mime:"video/x-flv"}:37===e[0]&&33===e[1]?{ext:"ps",mime:"application/postscript"}:253===e[0]&&55===e[1]&&122===e[2]&&88===e[3]&&90===e[4]&&0===e[5]?{ext:"xz",mime:"application/x-xz"}:83===e[0]&&81===e[1]&&76===e[2]&&105===e[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===e[0]&&69===e[1]&&83===e[2]&&26===e[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===e[0]&&114===e[1]&&50===e[2]&&52===e[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===e[0]&&83===e[1]&&67===e[2]&&70===e[3]||73===e[0]&&83===e[1]&&99===e[2]&&40===e[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]&&10===e[7]&&100===e[8]&&101===e[9]&&98===e[10]&&105===e[11]&&97===e[12]&&110===e[13]&&45===e[14]&&98===e[15]&&105===e[16]&&110===e[17]&&97===e[18]&&114===e[19]&&121===e[20]?{ext:"deb",mime:"application/x-deb"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===e[0]&&171===e[1]&&238===e[2]&&219===e[3]?{ext:"rpm",mime:"application/x-rpm"}:31===e[0]&&160===e[1]||31===e[0]&&157===e[1]?{ext:"Z",mime:"application/x-compress"}:76===e[0]&&90===e[1]&&73===e[2]&&80===e[3]?{ext:"lz",mime:"application/x-lzip"}:208===e[0]&&207===e[1]&&17===e[2]&&224===e[3]&&161===e[4]&&177===e[5]&&26===e[6]&&225===e[7]?{ext:"msi",mime:"application/x-msi"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}:{ext:"rar",mime:"application/x-rar-compressed"}:{ext:"zip",mime:"application/zip"}:null},_O=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.detect=void 0;var r=i(Yl);t.default=o,t.detectSync=a;var n=i(bO);function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return new r.default(function(t){t(a(e))})}function a(e){var t=e;if(kE.inBrowser){if(e instanceof Blob)return e.type;if(e instanceof ArrayBuffer)t=new Uint8Array(e);else if(!(e instanceof Uint8Array))throw new Error("`detect` requires a buffer of type Blob, ArrayBuffer, or Uint8Array")}var r=(0,n.default)(t);return r?r.mime:"application/octet-stream"}t.detect=o});t(_O);_O.detect,_O.detectSync;var wO=Object.prototype.hasOwnProperty,SO=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),kO=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},EO={arrayToObject:kO,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],o=i.obj[i.prop],a=Object.keys(o),u=0;u<a.length;++u){var s=a[u],c=o[s];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:o,prop:s}),r.push(c))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],i=0;i<t.length;++i)void 0!==t[i]&&n.push(t[i]);r.obj[r.prop]=n}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var i=t.charCodeAt(n);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=t.charAt(n):i<128?r+=SO[i]:i<2048?r+=SO[192|i>>6]+SO[128|63&i]:i<55296||i>=57344?r+=SO[224|i>>12]+SO[128|i>>6&63]+SO[128|63&i]:(n+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),r+=SO[240|i>>18]+SO[128|i>>12&63]+SO[128|i>>6&63]+SO[128|63&i])}return r},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(n.plainObjects||n.allowPrototypes||!wO.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var i=t;return Array.isArray(t)&&!Array.isArray(r)&&(i=kO(t,n)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,i){wO.call(t,i)?t[i]&&"object"==typeof t[i]?t[i]=e(t[i],r,n):t.push(r):t[i]=r}),t):Object.keys(r).reduce(function(t,i){var o=r[i];return wO.call(t,i)?t[i]=e(t[i],o,n):t[i]=o,t},i)}},TO=String.prototype.replace,PO=/%20/g,OO={default:"RFC3986",formatters:{RFC1738:function(e){return TO.call(e,PO,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},CO={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},MO=Date.prototype.toISOString,jO={delimiter:"&",encode:!0,encoder:EO.encode,encodeValuesOnly:!1,serializeDate:function(e){return MO.call(e)},skipNulls:!1,strictNullHandling:!1},xO=function e(t,r,n,i,o,a,u,s,c,l,f,d){var p=t;if("function"==typeof u)p=u(r,p);else if(p instanceof Date)p=l(p);else if(null===p){if(i)return a&&!d?a(r,jO.encoder):r;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||EO.isBuffer(p))return a?[f(d?r:a(r,jO.encoder))+"="+f(a(p,jO.encoder))]:[f(r)+"="+f(String(p))];var h,v=[];if(void 0===p)return v;if(Array.isArray(u))h=u;else{var g=Object.keys(p);h=s?g.sort(s):g}for(var m=0;m<h.length;++m){var y=h[m];o&&null===p[y]||(v=Array.isArray(p)?v.concat(e(p[y],n(r,y),n,i,o,a,u,s,c,l,f,d)):v.concat(e(p[y],r+(c?"."+y:"["+y+"]"),n,i,o,a,u,s,c,l,f,d)))}return v},RO=Object.prototype.hasOwnProperty,AO={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:EO.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},IO=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(n),a=o?n.slice(0,o.index):n,u=[];if(a){if(!r.plainObjects&&RO.call(Object.prototype,a)&&!r.allowPrototypes)return;u.push(a)}for(var s=0;null!==(o=i.exec(n))&&s<r.depth;){if(s+=1,!r.plainObjects&&RO.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(o[1])}return o&&u.push("["+n.slice(o.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;i>=0;--i){var o,a=e[i];if("[]"===a)o=(o=[]).concat(n);else{o=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,s=parseInt(u,10);!isNaN(s)&&a!==u&&String(s)===u&&s>=0&&r.parseArrays&&s<=r.arrayLimit?(o=[])[s]=n:o[u]=n}n=o}return n}(u,t,r)}},DO={formats:OO,parse:function(e,t){var r=t?EO.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||EO.isRegExp(r.delimiter)?r.delimiter:AO.delimiter,r.depth="number"==typeof r.depth?r.depth:AO.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:AO.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:AO.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:AO.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:AO.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:AO.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:AO.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:AO.strictNullHandling,""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,o=n.split(t.delimiter,i),a=0;a<o.length;++a){var u,s,c=o[a],l=c.indexOf("]="),f=-1===l?c.indexOf("="):l+1;-1===f?(u=t.decoder(c,AO.decoder),s=t.strictNullHandling?null:""):(u=t.decoder(c.slice(0,f),AO.decoder),s=t.decoder(c.slice(f+1),AO.decoder)),RO.call(r,u)?r[u]=[].concat(r[u]).concat(s):r[u]=s}return r}(e,r):e,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),a=0;a<o.length;++a){var u=o[a],s=IO(u,n[u],r);i=EO.merge(i,s,r)}return EO.compact(i)},stringify:function(e,t){var r=e,n=t?EO.assign({},t):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var i=void 0===n.delimiter?jO.delimiter:n.delimiter,o="boolean"==typeof n.strictNullHandling?n.strictNullHandling:jO.strictNullHandling,a="boolean"==typeof n.skipNulls?n.skipNulls:jO.skipNulls,u="boolean"==typeof n.encode?n.encode:jO.encode,s="function"==typeof n.encoder?n.encoder:jO.encoder,c="function"==typeof n.sort?n.sort:null,l=void 0!==n.allowDots&&n.allowDots,f="function"==typeof n.serializeDate?n.serializeDate:jO.serializeDate,d="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:jO.encodeValuesOnly;if(void 0===n.format)n.format=OO.default;else if(!Object.prototype.hasOwnProperty.call(OO.formatters,n.format))throw new TypeError("Unknown format option provided.");var p,h,v=OO.formatters[n.format];"function"==typeof n.filter?r=(h=n.filter)("",r):Array.isArray(n.filter)&&(p=h=n.filter);var g,m=[];if("object"!=typeof r||null===r)return"";g=n.arrayFormat in CO?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var y=CO[g];p||(p=Object.keys(r)),c&&p.sort(c);for(var b=0;b<p.length;++b){var _=p[b];a&&null===r[_]||(m=m.concat(xO(r[_],_,y,o,a,u?s:null,h,c,l,f,v,d)))}var w=m.join(i),S=!0===n.addQueryPrefix?"?":"";return w.length>0?S+w:""}},LO="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},FO=function(e){var t=NO.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},NO=Object.prototype.toString;var UO=r(function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),zO=(UO.left,UO.right,Function.prototype.toString),qO=/^\s*class /,BO=function(e){try{var t=zO.call(e).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return qO.test(t)}catch(e){return!1}},WO=Object.prototype.toString,VO="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,GO=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(VO)return function(e){try{return!BO(e)&&(zO.call(e),!0)}catch(e){return!1}}(e);if(BO(e))return!1;var t=WO.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},HO=Object.prototype.toString,JO=Object.prototype.hasOwnProperty,YO=function(e,t,r){if(!GO(t))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),"[object Array]"===HO.call(e)?function(e,t,r){for(var n=0,i=e.length;n<i;n++)JO.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,n):"string"==typeof e?function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(e,t,n):function(e,t,r){for(var n in e)JO.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,n)},$O=function(e){if(!e)return{};var t={};return YO(UO(e).split("\n"),function(e){var r,n=e.indexOf(":"),i=UO(e.slice(0,n)).toLowerCase(),o=UO(e.slice(n+1));void 0===t[i]?t[i]=o:(r=t[i],"[object Array]"===Object.prototype.toString.call(r)?t[i].push(o):t[i]=[t[i],o])}),t},KO=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)XO.call(r,n)&&(e[n]=r[n])}return e},XO=Object.prototype.hasOwnProperty;var ZO=r(function(e){var t,r=(t=uf)&&t.__esModule?t:{default:t};function n(e,t,r){var n=e;return FO(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=KO(t,{uri:e}),n.callback=r,n}function i(e,t,r){return o(t=n(e,t,r))}function o(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(r,n,i){t||(t=!0,e.callback(r,n,i))};function o(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML;return null}(l),m)try{e=JSON.parse(e)}catch(e){}return e}function a(e){return clearTimeout(f),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function u(){if(!c){var t;clearTimeout(f),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=y,i=null;return 0!==t?(r={body:o(),statusCode:t,method:p,headers:{},url:d,rawRequest:l},l.getAllResponseHeaders&&(r.headers=$O(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),n(i,r,r.body)}}var s,c,l=e.xhr||null;l||(l=e.cors||e.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var f,d=e.uri||e.url,p=e.method||"GET",h=e.body||e.data,v=e.headers||{},g=!!e.sync,m=!1,y={body:void 0,headers:{},statusCode:0,method:p,url:d,rawRequest:l};if("json"in e&&!1!==e.json&&(m=!0,v.accept||v.Accept||(v.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),h=(0,r.default)(!0===e.json?h:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(u,0)},l.onload=u,l.onerror=a,l.onprogress=function(){},l.onabort=function(){c=!0},l.ontimeout=a,l.open(p,d,!g,e.username,e.password),g||(l.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(f=setTimeout(function(){if(!c){c=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",a(e)}},e.timeout)),l.setRequestHeader)for(s in v)v.hasOwnProperty(s)&&l.setRequestHeader(s,v[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(h||null),l}e.exports=i,i.XMLHttpRequest=LO.XMLHttpRequest||function(){},i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:LO.XDomainRequest,function(e,t){for(var r=0;r<e.length;r+=1)t(e[r])}(["get","put","post","patch","head","delete"],function(e){i["delete"===e?"del":e]=function(t,r,i){return(r=n(t,r,i)).method=e.toUpperCase(),o(r)}})});t(ZO);var QO=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=d(Db),n=d(Us),i=d(JP),o=d(TE),a=d(Yl),u=d(eO),s=d(Gd),c=d(Uw);t.default=function(e){return new a.default(function(t){var a=(0,u.default)(e,"method","uri","withCredentials","headers","timeout","responseType");a.response=!0,function(e,t){e.method&&["PATCH","POST","PUT"].includes(e.method.toUpperCase())&&(e.xhr=new XMLHttpRequest,e.xhr.upload.onprogress=t.upload.emit.bind(t.upload,"progress"))}(a,e),function(e,t){if(t.auth)if(t.auth.bearer)e.headers.authorization="Bearer "+t.auth.bearer;else{var r=t.auth.user||t.auth.username,n=t.auth.pass||t.auth.password,i=btoa(r+":"+n);e.headers.authorization="Basic "+i}}(a,e),function(e,t){t.jar&&(e.withCredentials=!0)}(a,e),function(e,t){var r={cors:!0,withCredentials:!1,timeout:0};(0,c.default)(e,(0,u.default)(t,(0,o.default)(r)),r)}(a,e),function(e,t){"buffer"===t.responseType&&(e.responseType="arraybuffer")}(a,e),function(e,t){(t.body instanceof Blob||t.body instanceof ArrayBuffer)&&(t.json=e.json=!1,e.headers["content-type"]=e.headers["content-type"]||(0,_O.detectSync)(t.body))}(a,e),function(e,t){"json"in t&&!0!==t.json||!t.body?t.form?(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=l.default.stringify(t.form),(0,n.default)(e,"json")):t.formData?e.body=(0,o.default)(t.formData).reduce(function(e,r){var n=t.formData[r];return function e(t,r,n){if((0,s.default)(n)){var o=!0,a=!1,u=void 0;try{for(var c,l=(0,i.default)(n);!(o=(c=l.next()).done);o=!0){var f=c.value;e(t,r,f)}}catch(e){a=!0,u=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw u}}return}n=function(e){if(e instanceof ArrayBuffer){var t=e.type?new Blob([e],{type:e.type}):new Blob([e]);return t.filename=e.filename||e.name||"untitled",t}return e}(n);n.name?(n.filename=n.name,t.append(r,n,n.name)):t.append(r,n)}(e,r,n),e},new FormData):(e.body=t.body,(0,n.default)(e,"json")):e.json=t.body}(a,e),function(e,t){t.qs&&(e.uri+="?"+l.default.stringify(t.qs))}(a,e);var d=(0,f.default)(a,function(n,i){n&&e.logger.warn(n),i?(i.options=e,function(e,t){if(!t.json&&"object"!==(0,r.default)(e.body))try{e.body=JSON.parse(e.body)}catch(e){}}(i,a),t(i)):t({statusCode:0,options:e,headers:e.headers,method:e.method,url:e.uri,body:n})});d.onprogress=e.download.emit.bind(e.download,"progress")}).catch(function(t){return{statusCode:0,options:e,headers:e.headers,method:e.method,url:e.uri,body:t}})};var l=d(DO),f=d(ZO);function d(e){return e&&e.__esModule?e:{default:e}}});t(QO);var eC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(Yl);t.default=function(e){e.url&&(e.uri=e.url,e.url=null);e.headers=e.headers||{},kE.inBrowser||e.headers["user-agent"]||(e.headers["user-agent"]="@ciscospark/http-core");return e.download=new qw.EventEmitter,e.upload=new qw.EventEmitter,t(e.interceptors,"Request").then(function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return n.default.apply(void 0,[e].concat(r))}).then(function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.apply(void 0,[e.interceptors.slice().reverse(),"Response"].concat(n))});function t(t,n,i){var o="on"+n,a="on"+n+"Error";return t.reduce(function(t,n){return t.then(function(t){return n[o]?n[o](e,t):r.default.resolve(t)},function(t){return n[a]?n[a](e,t):r.default.reject(t)})},r.default.resolve(i))}};var n=i(QO);function i(e){return e&&e.__esModule?e:{default:e}}});t(eC);var tC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.detectSync=t.detect=t.HttpStatusInterceptor=t.HttpError=t.Interceptor=t.ProgressEvent=t.request=t.defaults=void 0;var r=f(Us),n=f(rO),i=f(iO),o=f(VE),a=f(Uw),u=f(jP),s=f(AE);Object.defineProperty(t,"ProgressEvent",{enumerable:!0,get:function(){return f(cO).default}}),Object.defineProperty(t,"Interceptor",{enumerable:!0,get:function(){return f(lO).default}}),Object.defineProperty(t,"HttpError",{enumerable:!0,get:function(){return f(mO).default}}),Object.defineProperty(t,"HttpStatusInterceptor",{enumerable:!0,get:function(){return f(yO).default}}),Object.defineProperty(t,"detect",{enumerable:!0,get:function(){return _O.detect}}),Object.defineProperty(t,"detectSync",{enumerable:!0,get:function(){return _O.detectSync}});var c=f(yO),l=f(eC);function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,u.default)(function(e,t){if((0,o.default)(t)){var u=t;(t=arguments[2]||{}).uri=u}return["download","interceptors","logger","upload"].forEach(function(e){var r=(0,i.default)(t,e);r=(0,s.default)({},r,{enumerable:!1,writable:!0}),(0,n.default)(t,e,r)}),(0,a.default)(t,e),t.json||(0,r.default)(t,"json"),t.logger=t.logger||console,(0,l.default)(t)}),p={json:!0,interceptors:[c.default.create()]};t.defaults=d,t.request=d(p)});t(tC);tC.detectSync,tC.detect,tC.HttpStatusInterceptor,tC.HttpError,tC.Interceptor,tC.ProgressEvent,tC.request,tC.defaults;var rC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(rO),n=c(nf),i=c(RS),o=c(by),a=c(ky),u=c(AS),s=c(IS);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"parse",value:function(e){var t=(0,n.default)(tC.HttpError.prototype.parse,this,[e]);return(0,r.default)(this,"options",{enumerable:!1,value:e.options}),this.options.url?t+="\n"+this.options.method+" "+this.options.url:this.options.uri?t+="\n"+this.options.method+" "+this.options.uri:t+="\n"+this.options.method+" "+this.options.service.toUpperCase()+"/"+this.options.resource,t+="\nWEBEX_TRACKING_ID: "+this.options.headers.trackingid,this.options.headers&&this.options.headers["x-trans-id"]&&(t+="\nX-Trans-Id: "+this.options.headers["x-trans-id"]),this.headers["retry-after"]&&((0,r.default)(this,"retryAfter",{enumerable:!0,value:this.headers["retry-after"],writeable:!1}),t+="\nRETRY-AFTER: "+this.retryAfter),t+="\n"}}]),t}(tC.HttpError);t.default=l,tC.HttpError.makeSubTypes(l);var f=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(tC.HttpError.BadRequest);tC.HttpError[429]=f,tC.HttpError.TooManyRequests=f});t(rC);var nC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=d(Ls),i=d(YP),o=d(nf),a=d(Ql),u=d(Yl),s=d(eO),c=d(rC),l=d(FP),f=d(qP);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function h(e){if(400!==e.statusCode)return u.default.reject(e);var t=f.default.select(e.body.error);return t===qP.OAuthError&&e instanceof c.default?u.default.reject(e):t?u.default.reject(new t(e._res||e)):u.default.reject(e)}var v=l.default.extend((p(r={derived:{canAuthorize:{deps:["access_token","isExpired"],fn:function(){return!!this.access_token&&!this.isExpired}},canDownscope:{deps:["canAuthorize"],fn:function(){return this.canAuthorize&&!!this.config.client_id}},canRefresh:{deps:["refresh_token"],fn:function(){return kE.inBrowser?!!this.refresh_token&&!!this.config.refreshCallback:!!this.refresh_token&&!!this.config.client_secret}},isExpired:{deps:["expires","_isExpired"],fn:function(){return!!this.expires&&this._isExpired}},_string:{deps:["access_token","token_type"],fn:function(){return this.access_token&&this.token_type?this.token_type+" "+this.access_token:""}}},namespace:"Credentials",props:{scope:"string",access_token:"string",expires:"number",expires_in:"number",refresh_token:"string",refresh_token_expires:"number",refresh_token_expires_in:"number",token_type:{default:"Bearer",type:"string"}},session:{_isExpired:{default:!1,type:"boolean"},previousToken:{type:"state"}},downscope:function(e){var t=this;return this.logger.info("token: downscoping token to "+e),this.isExpired?(this.logger.info("token: request received to downscope expired access_token"),u.default.reject(new Error("cannot downscope expired access token"))):this.canDownscope?(e&&(e=(0,BP.sortScope)(e)),e===(0,BP.sortScope)(this.config.scope)?u.default.reject(new Error("token: scope reduction requires a reduced scope")):this.spark.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"urn:cisco:oauth:grant-type:scope-reduction",token:this.access_token,scope:e,client_id:this.config.client_id}}).then(function(r){return t.logger.info("token: downscoped token to "+e),new v((0,a.default)(r.body,{scope:e}),{parent:t.parent})})):(this.config.client_id?this.logger.info("token: request received to downscope invalid access_token"):this.logger.warn("token: cannot downscope without client_id"),u.default.reject(new Error("cannot downscope access token")))},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,o.default)(l.default.prototype.initialize,this,[t,r]),"string"==typeof t&&(this.access_token=t),!this.access_token)throw new Error("`access_token` is required");this.expires&&(this.expires<Date.now()?this._isExpired=!0:(0,CE.safeSetTimeout)(function(){e._isExpired=!0},this.expires-Date.now()))},refresh:function(){var e=this;if(!this.canRefresh)throw new Error("Not enough information available to refresh this access token");var t=void 0;if(kE.inBrowser){if(!this.config.refreshCallback)throw new Error("Cannot refresh access token without refreshCallback");t=u.default.resolve(this.config.refreshCallback(this.spark,this))}return(t||this.spark.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"refresh_token",redirect_uri:this.config.redirect_uri,refresh_token:this.refresh_token},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(e){return e.body})).then(function(t){if(!t)throw new Error("token: refreshCallback() did not produce an object");return t.refresh_token||(0,a.default)(t,(0,s.default)(e,"refresh_token","refresh_token_expires","refresh_token_expires_in")),e.access_token===t.access_token?(e.logger.error("token: new token matches current token"),e.logger.error("token: current token:",e.access_token),e.logger.error("token: new token:",t.access_token),u.default.reject(new Error("new token matches current token"))):(e.previousToken&&(e.previousToken.revoke(),e.unset("previousToken")),t.previousToken=e,t.scope=e.scope,new v(t,{parent:e.parent}))}).catch(h)},revoke:function(){var e=this;return this.isExpired?(this.logger.info("token: already expired, not making making revocation request"),u.default.resolve()):this.canAuthorize?this.config.client_secret?(this.logger.info("token: revoking access token"),this.spark.request({method:"POST",uri:this.config.revokeUrl,form:{token:this.access_token,token_type_hint:"access_token"},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(){e.unset(["access_token","expires","expires_in","token_type"]),e.logger.info("token: access token revoked")}).catch(h)):(this.logger.info("token: no client secret available, not making revocation request"),u.default.resolve()):(this.logger.info("token: no longer valid, not making revocation request"),u.default.resolve())},set:function(){var e=this._filterSetParameters.apply(this,arguments),t=(0,i.default)(e,2),r=t[0],n=t[1];if(!r.token_type&&r.access_token&&r.access_token.includes(" ")){var u=r.access_token.split(" "),s=(0,i.default)(u,2),c=s[0],f=s[1];r=(0,a.default)({},r,{access_token:f,token_type:c})}var d=Date.now();return!r.expires&&r.expires_in&&(r.expires=d+1e3*r.expires_in),!r.refresh_token_expires&&r.refresh_token_expires_in&&(r.refresh_token_expires=d+1e3*r.refresh_token_expires_in),r.scope&&(r.scope=(0,BP.sortScope)(r.scope)),(0,o.default)(l.default.prototype.set,this,[r,n])},toString:function(){if(!this._string)throw new Error("cannot stringify Token");return this._string},validate:function(){var e=this;return this.spark.request({method:"POST",service:"conversation",resource:"users/validateAuthToken",body:{token:this.access_token}}).catch(function(t){if("statusCode"in t)return u.default.reject(t);e.logger.info("REMINDER: If you're investigating a network error here, it's normal");return e.spark.request({method:"POST",uri:"https://conv-a.wbx2.com/conversation/api/v1/users/validateAuthToken",body:{token:e.access_token},headers:{authorization:"Bearer "+e.access_token}})}).then(function(e){return e.body})},version:"1.47.3"},"downscope",[(0,kE.oneFlight)({keyFactory:function(e){return e}})],(0,n.default)(r,"downscope"),r),p(r,"refresh",[kE.oneFlight],(0,n.default)(r,"refresh"),r),p(r,"revoke",[kE.oneFlight],(0,n.default)(r,"revoke"),r),r));t.default=v});t(nC);var iC=function(e){var t,r=this,n=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return r.apply(this,arguments)},AE(t,r);var i=function(){this.constructor=t};return i.prototype=r.prototype,t.prototype=new i,e&&(n.unshift(t.prototype),AE.apply(null,n)),t.__super__=r.prototype,t},oC=Gb(function(e,t,r){var n=1;if(r.length){var i=W_(r,U_(oC));n|=32}return Cw(e,n,t,r,i)});oC.placeholder={};var aC=oC,uC=[].slice;function sC(e,t){if(t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),t.parent&&(this.parent=t.parent),!this.mainIndex){var r=this.model&&this.model.prototype&&this.model.prototype.idAttribute;this.mainIndex=r||"id"}this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,AE({silent:!0},t))}AE(sC.prototype,uP,{initialize:function(){},isModel:function(e){return this.model&&e instanceof this.model},add:function(e,t){return this.set(e,AE({merge:!1,add:!0,remove:!1},t))},parse:function(e,t){return e},serialize:function(){return this.map(function(e){if(e.serialize)return e.serialize();var t={};return AE(t,e),delete t.collection,t})},toJSON:function(){return this.serialize()},set:function(e,t){(t=AE({add:!0,remove:!0,merge:!0},t)).parse&&(e=this.parse(e,t));var r,n,i,o,a,u,s,c=!Gd(e);e=c?e?[e]:[]:e.slice();var l=t.at,f=this.comparator&&null==l&&!1!==t.sort,d="string"==typeof this.comparator?this.comparator:null,p=[],h=[],v={},g=t.add,m=t.merge,y=t.remove,b=!(f||!g||!y)&&[],_=this.model&&this.model.prototype||Object.prototype;for(u=0,s=e.length;u<s;u++){if(i=e[u]||{},this.isModel(i)?r=n=i:_.generateId?r=_.generateId(i):void 0===(r=i[this.mainIndex])&&this._isDerivedIndex(_)&&(r=_._derived[this.mainIndex].fn.call(i)),o=this.get(r))y&&(v[o.cid||o[this.mainIndex]]=!0),m&&(i=i===n?n.attributes:i,t.parse&&(i=o.parse(i,t)),o.set?(o.set(i,t),f&&!a&&o.hasChanged(d)&&(a=!0)):AE(o,i)),e[u]=o;else if(g){if(!(n=e[u]=this._prepareModel(i,t)))continue;p.push(n),this._addReference(n,t)}(n=o||n)&&(b&&(n.isNew&&n.isNew()||!n[this.mainIndex]||!v[n.cid||n[this.mainIndex]])&&b.push(n),v[n[this.mainIndex]]=!0)}if(y){for(u=0,s=this.length;u<s;u++)v[(n=this.models[u]).cid||n[this.mainIndex]]||h.push(n);for(h.length&&this.remove(h,t),u=0,s=p.length;u<s;u++)this._index(p[u])}if(p.length||b&&b.length)if(f&&(a=!0),null!=l)for(u=0,s=p.length;u<s;u++)this.models.splice(l+u,0,p[u]);else{var w=b||p;for(u=0,s=w.length;u<s;u++)this.models.push(w[u])}if(a&&this.sort({silent:!0}),!t.silent){for(u=0,s=p.length;u<s;u++)(n=p[u]).trigger?n.trigger("add",n,this,t):this.trigger("add",n,this,t);(a||b&&b.length)&&this.trigger("sort",this,t)}return c?e[0]:e},get:function(e,t){if(null!=e){var r=this.mainIndex,n=this._indexes[t||r];return n&&(n[e]||void 0!==e[r]&&n[e[r]])||this._indexes.cid[e]||this._indexes.cid[e.cid]}},at:function(e){return this.models[e]},remove:function(e,t){var r,n,i,o,a=!Gd(e);for(t||(t={}),r=0,n=(e=a?[e]:uC.call(e)).length;r<n;r++)(i=e[r]=this.get(e[r]))&&(this._deIndex(i),o=this.models.indexOf(i),this.models.splice(o,1),t.silent||(t.index=o,i.trigger?i.trigger("remove",i,this,t):this.trigger("remove",i,this,t)),this._removeReference(i,t));return a?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,n=this.models.length;r<n;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,AE({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},sort:function(e){var t=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),"string"==typeof this.comparator?this.models.sort(function(e,r){return e.get?(e=e.get(t.comparator),r=r.get(t.comparator)):(e=e[t.comparator],r=r[t.comparator]),e>r||void 0===e?1:e<r||void 0===r?-1:0}):1===this.comparator.length?this.models.sort(function(e,r){return(e=t.comparator(e))>(r=t.comparator(r))||void 0===e?1:e<r||void 0===r?-1:0}):this.models.sort(aC(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},_reset:function(){var e=uC.call(this.indexes||[]),t=0;e.push(this.mainIndex),e.push("cid");var r=e.length;for(this.models=[],this._indexes={};t<r;t++)this._indexes[e[t]]={}},_prepareModel:function(e,t){if(!this.model)return e;if(this.isModel(e))return e.collection||(e.collection=this),e;(t=t?AE({},t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_deIndex:function(e,t,r){var n;if(void 0===t)for(var i in this._indexes)n=e.hasOwnProperty(i)?e[i]:e.get&&e.get(i),delete this._indexes[i][n];else{if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");delete this._indexes[t][r]}},_index:function(e,t){var r;if(void 0===t)for(var n in this._indexes)null!=(r=e.hasOwnProperty(n)?e[n]:e.get&&e.get(n))&&(this._indexes[n][r]=e);else{if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");(r=e[t]||e.get&&e.get(t))&&(this._indexes[t][r]=e)}},_isDerivedIndex:function(e){return!(!e||"object"!=typeof e._derived)&&Object.keys(e._derived).indexOf(this.mainIndex)>=0},_addReference:function(e,t){this._index(e),e.collection||(e.collection=this),e.on&&e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,this._deIndex(e),e.off&&e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){var i=e.split(":")[0],o=e.split(":")[1];("add"!==i&&"remove"!==i||r===this)&&("destroy"===i&&this.remove(t,n),t&&"change"===i&&o&&this._indexes[o]&&(this._deIndex(t,o,t.previousAttributes()[o]),this._index(t,o)),this.trigger.apply(this,arguments))}}),Object.defineProperties(sC.prototype,{length:{get:function(){return this.models.length}},isCollection:{get:function(){return!0}}});["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"].forEach(function(e){sC.prototype[e]=function(){return this.models[e].apply(this.models,arguments)}}),sC.prototype.each=sC.prototype.forEach,sC.extend=iC;var cC=sC,lC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(cC),n=i(nC);function i(e){return e&&e.__esModule?e:{default:e}}var o=r.default.extend({mainIndex:"scope",model:n.default,namespace:"Credentials"});t.default=o});t(lC);var fC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o,a,u,s,c=P(Ls),l=P(Yl),f=P(nf),d=P(TE),p=P(Ql),h=P(uf),v=P(Us),g=P(Wv),m=P(Nf),y=P(Hv),b=P(OE),_=P(eg),w=P(Ym),S=P(FP),k=P(qP),E=P(nC),T=P(lC);function P(e){return e&&e.__esModule?e:{default:e}}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C=S.default.extend((r=(0,kE.oneFlight)({keyFactory:function(e){return e}}),n=(0,RP.waitForValue)("@"),i=(0,RP.persist)("@"),o=(0,RP.waitForValue)("@"),a=(0,kE.whileInFlight)("isRefreshing"),u=(0,RP.waitForValue)("@"),O(s={collections:{userTokens:T.default},dataTypes:{token:(0,kE.makeStateDataType)(E.default,"token").dataType},derived:{canAuthorize:{deps:["supertoken","supertoken.canAuthorize","canRefresh"],fn:function(){return Boolean(this.supertoken&&this.supertoken.canAuthorize||this.canRefresh)}},canRefresh:{deps:["supertoken","supertoken.canRefresh"],fn:function(){return!!this.config.jwtRefreshCallback||Boolean(this.supertoken&&this.supertoken.canRefresh)}}},props:{supertoken:(0,kE.makeStateDataType)(E.default,"token").prop},namespace:"Credentials",session:{isRefreshing:{default:!1,type:"boolean"},ready:{default:!1,type:"boolean"},refreshTimer:{default:void 0,type:"any"}},buildLoginUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clientType:"public"};if(e.state&&!(0,m.default)(e.state))throw new Error("if specified, `options.state` must be an object");return e.client_id=this.config.client_id,e.redirect_uri=this.config.redirect_uri,e.scope=this.config.scope,(e=(0,y.default)(e)).response_type||(e.response_type="public"===e.clientType?"token":"code"),(0,v.default)(e,"clientType"),e.state&&((0,g.default)(e.state)?delete e.state:e.state=kE.base64.toBase64Url((0,h.default)(e.state))),this.config.authorizeUrl+"?"+_.default.stringify(e)},buildLogoutUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.config.logoutUrl+"?"+_.default.stringify((0,p.default)({cisService:this.config.service,goto:this.config.redirect_uri},e))},calcRefreshTimeout:function(e){return Math.floor((Math.floor(4*Math.random())+6)/10*e)},constructor:function(){var e=this;this._dataTypes=(0,y.default)(this._dataTypes),(0,d.default)(this._dataTypes).forEach(function(t){e._dataTypes[t].set&&(e._dataTypes[t].set=e._dataTypes[t].set.bind(e))});for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(0,f.default)(S.default,this,r)},downscope:function(e){var t=this;return this.supertoken.downscope(e).catch(function(r){return t.logger.error("credentials: failed to downscope supertoken to "+e,r),t.logger.error("credentials: falling back to supertoken for "+e),l.default.resolve(new E.default((0,p.default)({scope:e},t.supertoken.serialize())),{parent:t})})},getClientToken:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.logger.info("credentials: requesting client credentials grant"),(t=t||{}).scope=t.scope||"webexsquare:admin",this.spark.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"client_credentials",scope:t.scope,self_contained_token:!0},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(t){return new E.default(t.body,{parent:e})}).catch(function(e){if(400!==e.statusCode)return l.default.reject(e);var t=k.default.select(e.body.error);return l.default.reject(new t(e._res||e))})},getUserToken:function(e){var t=this;return l.default.resolve(!this.isRefreshing||new l.default(function(e){t.logger.info("credentials: token refresh inflight; delaying getUserToken until refresh completes"),t.once("change:isRefreshing",function(){t.logger.info("credentials: token refresh complete; reinvoking getUserToken"),e()})})).then(function(){if(!t.canAuthorize)return t.logger.info("credentials: cannot produce an access token from current state"),l.default.reject(new Error("Current state cannot produce an access token"));if(e||(e=(0,BP.filterScope)("spark:kms",t.config.scope)),(e=(0,BP.sortScope)(e))===(0,BP.sortScope)(t.config.scope))return l.default.resolve(t.supertoken);var r=t.userTokens.get(e);return r&&r.access_token?l.default.resolve(r):t.downscope(e).then((0,kE.tap)(function(e){return t.userTokens.add(e)}))})},initialize:function(e,t){var r=this;e&&("string"==typeof e&&(this.supertoken=e),e.access_token&&(this.supertoken=e),e.authorization&&(e.authorization.supertoken?this.supertoken=e.authorization.supertoken:this.supertoken=e.authorization),this.supertoken&&this.supertoken.expires&&this.scheduleRefresh(this.supertoken.expires)),(0,f.default)(S.default.prototype.initialize,this,[e,t]),this.listenToOnce(this.parent,"change:config",function(){if(r.config.authorizationString){var e=w.default.parse(r.config.authorizationString,!0);r.config.client_id=e.query.client_id,r.config.redirect_uri=e.query.redirect_uri,r.config.scope=e.query.scope,r.config.authorizeUrl=e.href.substr(0,e.href.indexOf("?"))}}),this.spark.once("loaded",function(){r.ready=!0})},invalidate:function(){this.logger.info("credentials: invalidating tokens"),this.refreshTimer&&(clearTimeout(this.refreshTimer),this.unset("refreshTimer"));try{this.unset("supertoken")}catch(e){this.logger.warn("credentials: failed to clear supertoken",e)}for(;this.userTokens.models.length;)try{this.userTokens.remove(this.userTokens.models[0])}catch(e){this.logger.warn("credentials: failed to remove user token",e)}return this.logger.info("credentials: finished removing tokens"),l.default.resolve()},refresh:function(){var e=this;this.logger.info("credentials: refresh requested");var t=this.supertoken,r=(0,b.default)(this.userTokens.models);return this.config.jwtRefreshCallback?this.config.jwtRefreshCallback(this.spark).then(function(t){return e.spark.authorization.requestAccessTokenFromJwt({jwt:t})}):t.refresh().then(function(t){return e.refreshTimer&&(clearTimeout(e.refreshTimer),e.unset("refreshTimer")),e.supertoken=t,l.default.all(r.map(function(t){return e.downscope(t.scope).then(function(r){return e.logger.info("credentials: revoking token for "+t.scope),t.revoke().catch(function(t){e.logger.warn("credentials: failed to revoke user token",t)}).then(function(){e.userTokens.remove(t.scope),e.userTokens.add(r)})})}))}).then(function(){e.scheduleRefresh(e.supertoken.expires)}).catch(function(t){if(t instanceof k.default.InvalidRequestError){for(e.unset("supertoken");e.userTokens.models.length;)try{e.userTokens.remove(e.userTokens.models[0])}catch(t){e.logger.warn("credentials: failed to remove user token",t)}e.spark.trigger("client:InvalidRequestError")}return l.default.reject(t)})},scheduleRefresh:function(e){var t=this,r=e-Date.now();if(r>0){var n=this.calcRefreshTimeout(r);this.refreshTimer=(0,CE.safeSetTimeout)(function(){return t.refresh()},n)}else this.refresh()},version:"1.47.3"},"getUserToken",[r,n],(0,c.default)(s,"getUserToken"),s),O(s,"initialize",[i],(0,c.default)(s,"initialize"),s),O(s,"invalidate",[kE.oneFlight,o],(0,c.default)(s,"invalidate"),s),O(s,"refresh",[kE.oneFlight,a,u],(0,c.default)(s,"refresh"),s),s));t.default=C});t(fC);var dC=function(e,t){return null==e||hv(e,t)};var pC=function(e,t,r){return null==e?e:$P(e,t,r)};var hC=function(e,t,r){(void 0===r||lf(e[t],r))&&(void 0!==r||t in e)||Ad(e,t,r)};var vC=function(e,t){return"__proto__"==t?void 0:e[t]};var gC=function(e){return Ld(e,bp(e))};var mC=function(e,t,r,n,i,o,a){var u=vC(e,r),s=vC(t,r),c=a.get(s);if(c)hC(e,r,c);else{var l=o?o(u,s,r+"",e,t,a):void 0,f=void 0===l;if(f){var d=Gd(s),p=!d&&Jd(s),h=!d&&!p&&ip(s);l=s,d||p||h?Gd(u)?l=u:JT(u)?l=Sp(u):p?(f=!1,l=wp(s,!0)):h?(f=!1,l=nh(s,!0)):l=[]:wv(s)||Vd(s)?(l=u,Vd(u)?l=gC(u):(!Nf(u)||n&&Vf(u))&&(l=Ph(s))):f=!1}f&&(a.set(s,l),i(l,s,n,o,a),a.delete(s)),hC(e,r,l)}};var yC=function e(t,r,n,i,o){t!==r&&zE(r,function(a,u){if(Nf(a))o||(o=new jd),mC(t,r,u,n,e,i,o);else{var s=i?i(vC(t,u),a,u+"",t,r,o):void 0;void 0===s&&(s=a),hC(t,u,s)}},bp)},bC=xE(function(e,t,r){yC(e,t,r)});for(var _C=function(e,t,r){var n=null==e?void 0:fv(e,t);return void 0===n?r:n},wC=r(function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}}),SC=[],kC=0;kC<256;++kC)SC[kC]=(kC+256).toString(16).substr(1);var EC,TC,PC=function(e,t){var r=t||0,n=SC;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")},OC=0,CC=0;var MC=function(e,t,r){var n=t&&r||0,i=t||[],o=(e=e||{}).node||EC,a=void 0!==e.clockseq?e.clockseq:TC;if(null==o||null==a){var u=wC();null==o&&(o=EC=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==a&&(a=TC=16383&(u[6]<<8|u[7]))}var s=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:CC+1,l=s-OC+(c-CC)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||s>OC)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");OC=s,CC=c,TC=a;var f=(1e4*(268435455&(s+=122192928e5))+c)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=255&f;var d=s/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var p=0;p<6;++p)i[n+p]=o[p];return t||PC(i)};var jC=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||wC)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||PC(i)},xC=jC;xC.v1=MC,xC.v4=jC;var RC=xC,AC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(Yl),n=c(Us),i=c(RS),o=c(by),a=c(ky),u=c(AS),s=c(IS);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){var t=this;return e.headers=e.headers||{},"authorization"in e.headers||"auth"in e?(e.headers.authorization||(0,n.default)(e.headers,"authorization"),r.default.resolve(e)):this.requiresCredentials(e).then(function(r){return r?t.spark.credentials.getUserToken().then(function(t){return e.headers.authorization=t.toString(),e}):e})}},{key:"requiresCredentials",value:function(e){var t=this;if(e.uri&&e.uri.includes(this.spark.config.device.preDiscoveryServices.hydraServiceUrl))return r.default.resolve(!0);if(!this.spark.internal.device)return r.default.resolve(!1);if(e.uri&&e.runWhitelistedDomains&&this.spark.config.device.whitelistedServiceDomains.filter(function(t){return e.uri.includes(t)}).length)return r.default.resolve(!0);return this.spark.internal.device.isSpecificService("hydra",e.uri).then(function(r){return!!r||(e.service?t.spark.internal.device.isService(e.service):!!e.uri&&t.spark.internal.device.isServiceUrl(e.uri))})}},{key:"onResponseError",value:function(e,t){var i=this;return this.shouldAttemptReauth(t,e).then(function(o){return o&&(i.spark.logger.info("auth: received 401, attempting to reauthenticate"),t.options.headers&&(0,n.default)(t.options.headers,"authorization"),i.spark.credentials.canRefresh)?i.spark.credentials.refresh().then(function(){return i.replay(e)}):r.default.reject(t)})}},{key:"replay",value:function(e){return e.replayCount?e.replayCount+=1:e.replayCount=1,e.replayCount>this.spark.config.maxAuthenticationReplays?(this.spark.logger.error("auth: failed after "+this.spark.config.maxAuthenticationReplays+" replay attempts"),r.default.reject(new Error("Failed after "+this.spark.config.maxAuthenticationReplays+" replay attempts"))):(this.spark.logger.info("auth: replaying request "+e.replayCount+" time"),this.spark.request(e))}},{key:"shouldAttemptReauth",value:function(e,t){return t&&!1===t.shouldRefreshAccessToken?r.default.resolve(!1):401===e.statusCode?r.default.resolve(!0):r.default.resolve(!1)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=l});t(AC);var IC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(Yl),n=s(RS),i=s(by),o=s(ky),a=s(AS),u=s(IS);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){return e.$timings=e.$timings||{},e.$timings.networkStart=Date.now(),e}},{key:"onResponse",value:function(e,t){return e.$timings.networkEnd=Date.now(),t}},{key:"onResponseError",value:function(e,t){return e.$timings.networkEnd=Date.now(),r.default.reject(t)}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(tC.Interceptor);t.default=c});t(IC);var DC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(Yl),n=s(RS),i=s(by),o=s(ky),a=s(AS),u=s(IS);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){return e.noTransform?e:this.spark.transform("outbound",e)}},{key:"onResponse",value:function(e,t){return this.spark.transform("inbound",t)}},{key:"onResponseError",value:function(e,t){return this.spark.transform("inbound",t).then(function(e){return r.default.reject(e||t)})}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=c});t(DC);var LC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(Yl),n=l(Us),i=l(RS),o=l(by),a=l(ky),u=l(AS),s=l(IS),c=l(OE);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){return e.uri.includes(this.spark.config.credentials.samlUrl)||e.uri.includes(this.spark.config.credentials.tokenUrl)||e.uri.includes(this.spark.config.credentials.authorizeUrl)?e:"cisco-no-http-redirect"in e.headers?(e.headers["cisco-no-http-redirect"]||(0,n.default)(e.headers,"cisco-no-http-redirect"),e):(e.headers["cisco-no-http-redirect"]=!0,e.$redirectCount=e.$redirectCount||0,e)}},{key:"onResponse",value:function(e,t){if(t.headers&&t.headers["cisco-location"])return(e=(0,c.default)(e)).uri=t.headers["cisco-location"],e.$redirectCount+=1,e.$redirectCount>this.spark.config.maxAppLevelRedirects?r.default.reject(new Error("Maximum redirects exceeded")):this.spark.request(e);if(t.headers&&t.body&&2000002===t.body.errorCode&&t.body.location){if(e=(0,c.default)(e),t.options&&t.options.qs){var n=t.body.location.split("?");e.uri=n[0]}else e.uri=t.body.location;return e.$redirectCount+=1,e.$redirectCount>this.spark.config.maxLocusRedirects?r.default.reject(new Error("Maximum redirects exceeded")):this.spark.request(e)}return t}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=f});t(LC);var FC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(Yl),n=c(RS),i=c(by),o=c(ky),a=c(AS),u=c(IS),s=c(_C);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){var t=(0,s.default)(this,"spark.logger",console);try{this.spark.trigger("request:start",e)}catch(e){t.warn("event handler for request:start failed ",e)}return r.default.resolve(e)}},{key:"onRequestError",value:function(e,t){var n=(0,s.default)(this,"spark.logger",console);try{this.spark.trigger("request:end",e,t),this.spark.trigger("request:failure",e,t)}catch(e){n.warn("event handler for request:end failed ",e)}return r.default.reject(t)}},{key:"onResponse",value:function(e,t){var n=(0,s.default)(this,"spark.logger",console);try{this.spark.trigger("request:success",t.options,t)}catch(e){n.warn("event handler for request:success failed ",e)}return r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){var n=(0,s.default)(this,"spark.logger",console);try{this.spark.trigger("request:end",e,t),this.spark.trigger("request:failure",e,t)}catch(e){n.warn("event handler for request:failure failed ",e)}return r.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=l});t(FC);var NC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(Yl),n=l(RS),i=l(by),o=l(ky),a=l(AS),u=l(IS),s=(l(Uv),l(VE),l(Gd),l(qT)),c=l(_C);l(Jm);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){var t=(0,c.default)(this,"spark.logger",console);return t.info("/**********************************************************************\\ "),t.info("Request:",e.method||"GET",e.uri),t.info("WEBEX_TRACKINGID: ",(0,c.default)(e,"headers.trackingid")),(0,s.default)(e,"headers.x-trans-id")&&t.info("X-Trans-ID: ",(0,c.default)(e,"headers.x-trans-id")),(0,s.default)(this,"spark.internal.device.userId")&&t.info("User ID:",(0,c.default)(this,"spark.internal.device.userId")),r.default.resolve(e)}},{key:"onRequestError",value:function(e,t){this.onRequest(e);var n=(0,c.default)(this,"spark.logger",console);return n.error("Request Failed: ",t.stack),n.info("\\**********************************************************************/"),r.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=f});t(NC);var UC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(Yl),n=s(RS),i=s(by),o=s(ky),a=s(AS),u=s(IS);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){return e.$timings=e.$timings||{},e.$timings.requestStart=Date.now(),e}},{key:"onRequestError",value:function(e){return e.$timings.requestEnd=e.$timings.requestFail=Date.now(),r.default.reject(e)}},{key:"onResponse",value:function(e,t){return e.$timings.requestEnd=Date.now(),r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){return e.$timings.requestEnd=e.$timings.requestFail=Date.now(),r.default.reject(t)}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(tC.Interceptor);t.default=c});t(UC);var zC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(Yl),n=(c(Db),c(RS)),i=c(by),o=c(ky),a=c(AS),u=c(IS),s=(c(Uv),c(_C));c(Jm);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onResponse",value:function(e,t){return this.printResponseHeader(e,t),(0,s.default)(this,"spark.logger",console).info("\\**********************************************************************/"),t}},{key:"onResponseError",value:function(e,t){return this.printResponseHeader(e,t),(0,s.default)(this,"spark.logger",console).info("\\**********************************************************************/"),r.default.reject(t)}},{key:"printResponseHeader",value:function(e,t){var r=(0,s.default)(this,"spark.logger",console);r.info("Status Code:",t.statusCode),r.info("WEBEX_TRACKINGID:",(0,s.default)(e,"headers.trackingid")||(0,s.default)(t,"headers.trackingid")),r.info("Network duration:",e.$timings.networkEnd-e.$timings.networkStart),r.info("Processing duration:",e.$timings.requestEnd-e.$timings.requestStart)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=l});t(zC);var qC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(Us),n=s(RS),i=s(by),o=s(ky),a=s(AS),u=s(IS);function s(e){return e&&e.__esModule?e:{default:e}}var c=new(s(Vy).default),l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){if(e.headers=e.headers||{},"trackingid"in e.headers)return e.headers.trackingid||(0,r.default)(e.headers,"trackingid"),e;if(this.requiresTrackingId(e)&&(e.headers.trackingid=this.spark.sessionId+"_"+this.sequence),e.headers.trackingid&&e.replayCount){var t=e.headers.trackingid.split("+");t[1]=e.replayCount,e.headers.trackingid=t.join("+")}return e}},{key:"requiresTrackingId",value:function(e){return!e.headers.trackingid}},{key:"sequence",get:function(){var e=c.get(this)||0;return e+=1,c.set(this,e),e}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=l});t(qC);var BC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(Us),n=l(RS),i=l(by),o=l(ky),a=l(AS),u=l(IS),s=l(Vy),c=l(_C);function l(e){return e&&e.__esModule?e:{default:e}}var f=new s.default,d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=(0,c.default)(e,"spark.config.appName"),o=(0,c.default)(e,"spark.config.appVersion"),u=(0,c.default)(e,"spark.ciscospark",!1)?"ciscospark":"spark-js-sdk",s=(0,c.default)(e,"spark.version","development"),l=(0,a.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return r&&o?f.set(l,r+"/"+o+" ("+(kE.inBrowser?"web":"node")+") "+u+"/"+s):f.set(l,u+"/"+s+" ("+(kE.inBrowser?"web":"node")+")"),l}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){return e.headers=e.headers||{},e.uri&&(e.uri.includes(this.spark.config.credentials.samlUrl)||e.uri.includes(this.spark.config.credentials.tokenUrl)||e.uri.includes(this.spark.config.credentials.authorizeUrl))?e:"spark-user-agent"in e.headers?(e.headers["spark-user-agent"]||(0,r.default)(e.headers,"spark-user-agent"),e):(e.headers["spark-user-agent"]=f.get(this),e)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=d});t(BC);var WC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(Yl),n=c(Wb),i=c(RS),o=c(by),a=c(AS),u=c(ky),s=c(IS);function c(e){return e&&e.__esModule?e:{default:e}}var l=new(c(Vy).default),f=/.*(idbroker|identity)(bts)?.webex.com\/([^\/]+)/,d=function(e){function t(){var e;(0,o.default)(this,t);for(var r=arguments.length,u=Array(r),s=0;s<r;s++)u[s]=arguments[s];var c=(0,a.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(u)));return l.set(c,new n.default),c}return(0,s.default)(t,e),(0,u.default)(t,null,[{key:"create",value:function(){return new t({spark:this})}}]),(0,u.default)(t,[{key:"onRequest",value:function(e){return this.isRateLimited(e.uri)?r.default.reject(new Error("API rate limited "+e.uri)):r.default.resolve(e)}},{key:"onResponseError",value:function(e,t){return 429===t.statusCode&&(e.uri.includes("idbroker")||e.uri.includes("identity"))&&this.setRateLimitExpiry(e.uri,this.extractRetryAfterTime(e)),r.default.reject(t)}},{key:"extractRetryAfterTime",value:function(e){var t=e.headers["retry-after"]||null;return null===t||t<=0?6e4:t>3600?36e5:1e3*t}},{key:"setRateLimitExpiry",value:function(e,t){var r=this.getApiName(e);if(!r)return!1;var n=(new Date).getTime()+t;return l.get(this).set(r,n)}},{key:"getRateLimitStatus",value:function(e){var t=this.getApiName(e);if(!t)return!1;var r=(new Date).getTime(),n=l.get(this);return void 0!==n.get(t)&&r<n.get(t)}},{key:"getApiName",value:function(e){if(!e)return null;var t=e.match(f);return t?t[2]:null}},{key:"isRateLimited",value:function(e){return!(!e||!e.includes("idbroker")&&!e.includes("identity"))&&this.getRateLimitStatus(e)}}]),t}(tC.Interceptor);t.default=d});t(WC);var VC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={maxAppLevelRedirects:10,maxLocusRedirects:5,maxAuthenticationReplays:1,maxReconnectAttempts:1,onBeforeLogout:[],trackingIdPrefix:"spark-js-sdk",trackingIdSuffix:"",AlternateLogger:void 0,credentials:{authorizationString:rs.env.AUTHORIZATION_STRING,authorizeUrl:"https://idbroker.webex.com/idb/oauth2/v1/authorize",tokenUrl:"https://idbroker.webex.com/idb/oauth2/v1/access_token",revokeUrl:"https://idbroker.webex.com/idb/oauth2/v1/revoke",logoutUrl:"https://idbroker.webex.com/idb/oauth2/v1/logout",client_id:rs.env.CLIENT_ID,client_secret:rs.env.CLIENT_SECRET,redirect_uri:rs.env.REDIRECT_URI,scope:rs.env.SCOPE,cisService:"spark"},device:{preDiscoveryServices:{hydraServiceUrl:"https://api.ciscospark.com/v1"},whitelistedServiceDomains:["wbx2.com","ciscospark.com","webex.com"]},payloadTransformer:{predicates:[],transforms:[]},storage:{boundedAdapter:LP.MemoryStoreAdapter,unboundedAdapter:LP.MemoryStoreAdapter}}});t(VC);var GC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(rO),n=l(TE),i=l(YT),o=l(bC),a=l(Vf),u=l(Gd),s=l(qT),c=l(_C);function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){(e._derived[t]={fn:(0,a.default)(n)?n:n.fn,cache:!1!==n.cache,depList:n.deps||[]}).depList.forEach(function(r){e._deps[r]=(0,i.default)(e._deps[r]||[],[t])}),(0,r.default)(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`"+t+"` is a derived property, it can't be set directly.")}})}t.default=function(e,t,r){return e.registerPlugin=function(i,a){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((!e.prototype._children[i]||l.replace)&&(e.prototype._children[i]=a,l.proxies&&l.proxies.forEach(function(t){f(e.prototype,t,{deps:[i+"."+t],fn:function(){return this[i][t]}})}),l.interceptors&&(0,n.default)(l.interceptors).forEach(function(e){r[e]=l.interceptors[e]}),l.config&&(0,o.default)(t,l.config),(0,s.default)(l,"payloadTransformer.predicates")&&(t.payloadTransformer.predicates=t.payloadTransformer.predicates.concat((0,c.default)(l,"payloadTransformer.predicates"))),(0,s.default)(l,"payloadTransformer.transforms")&&(t.payloadTransformer.transforms=t.payloadTransformer.transforms.concat((0,c.default)(l,"payloadTransformer.transforms"))),l.onBeforeLogout&&(t.onBeforeLogout=t.onBeforeLogout||[],((0,u.default)(l.onBeforeLogout)?l.onBeforeLogout:[l.onBeforeLogout]).forEach(function(e){return t.onBeforeLogout.push({plugin:i,fn:e})})),a.prototype._definition&&a.prototype._definition.ready)){var d=e.prototype._derived.ready,p=d.fn,h={deps:d.depList.concat(i+".ready"),fn:p};f(e.prototype,"ready",h)}},e}});t(GC);var HC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(rO),n=l(TE),i=l(YT),o=l(bC),a=l(Vf),u=l(Gd),s=l(qT),c=l(_C);function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,l){return e.registerPlugin=function(f,d){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.prototype._children[f]||p.replace){if(e.prototype._children[f]=d,p.proxies)throw new Error("Proxies are not currently supported for private plugins");if(p.interceptors&&(0,n.default)(p.interceptors).forEach(function(e){l[e]=p.interceptors[e]}),p.config&&(0,o.default)(t,p.config),(0,s.default)(p,"payloadTransformer.predicates")&&(t.payloadTransformer.predicates=t.payloadTransformer.predicates.concat((0,c.default)(p,"payloadTransformer.predicates"))),(0,s.default)(p,"payloadTransformer.transforms")&&(t.payloadTransformer.transforms=t.payloadTransformer.transforms.concat((0,c.default)(p,"payloadTransformer.transforms"))),p.onBeforeLogout&&(t.onBeforeLogout=t.onBeforeLogout||[],((0,u.default)(p.onBeforeLogout)?p.onBeforeLogout:[p.onBeforeLogout]).forEach(function(e){return t.onBeforeLogout.push({plugin:f,fn:e})})),d.prototype._definition&&d.prototype._definition.ready){var h=e.prototype._derived.ready,v=h.fn,g={deps:h.depList.concat(f+".ready"),fn:v};!function(e,t,n){(e._derived[t]={fn:(0,a.default)(n)?n:n.fn,cache:!1!==n.cache,depList:n.deps||[]}).depList.forEach(function(r){e._deps[r]=(0,i.default)(e._deps[r]||[],[t])}),(0,r.default)(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`"+t+"` is a derived property, it can't be set directly.")}})}(e.prototype,"ready",g)}}},e}});t(HC);var JC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(TE),n=o(yP),i=o(Jm);function o(e){return e&&e.__esModule?e:{default:e}}var a=n.default.extend({derived:{ready:{deps:[],fn:function(){var e=this;return(0,r.default)(this._children).reduce(function(t,r){return t&&e[r]&&!1!==e[r].ready},!0)}}},inspect:function(e){return i.default.inspect(this.serialize({props:!0,session:!0,derived:!0}),{depth:e})}});t.default=a});t(JC);var YC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=F(Ls),i=F(Us),o=F(Ql),a=F(_P),u=F(Yl),s=F(TE),c=F(nf),l=F(dC),f=F(pC),d=F(Uv),p=F(bC),h=F(sv),v=F(VE),g=F(Vf),m=F(qT),y=F(_C),b=F(Uw);t.registerPlugin=function(e,t,r){J.registerPlugin(e,t,r)},t.registerInternalPlugin=function(e,t,r){L.default.registerPlugin(e,t,r)};var _=F(Jm),w=F(yP),S=F(RC),k=F(AC),E=F(IC),T=F(DC),P=F(LC),O=F(FC),C=(F(NC),F(UC)),M=(F(zC),F(rC)),j=F(qC),x=F(BC),R=F(WC),A=F(VC),I=F(GC),D=F(HC),L=F(JC);function F(e){return e&&e.__esModule?e:{default:e}}var N,U,z,q,B,W,V={SparkTrackingIdInterceptor:j.default.create,RequestEventInterceptor:O.default.create,RateLimitInterceptor:R.default.create,RequestLoggerInterceptor:void 0,ResponseLoggerInterceptor:void 0,RequestTimingInterceptor:C.default.create,UrlInterceptor:void 0,SparkUserAgentInterceptor:x.default.create,AuthInterceptor:k.default.create,KmsDryErrorInterceptor:void 0,PayloadTransformerInterceptor:T.default.create,ConversationInterceptor:void 0,RedirectInterceptor:P.default.create,HttpStatusInterceptor:function(){return tC.HttpStatusInterceptor.create({error:M.default})},NetworkTimingInterceptor:E.default.create},G=["ResponseLoggerInterceptor","RequestTimingInterceptor","RequestEventInterceptor","SparkTrackingIdInterceptor","RateLimitInterceptor"],H=["HttpStatusInterceptor","NetworkTimingInterceptor","RequestLoggerInterceptor","RateLimitInterceptor"],J=w.default.extend((r={version:"1.47.3",children:{internal:L.default},constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return"string"==typeof e?e={credentials:{supertoken:{access_token:e}}}:(["credentials.authorization","authorization","credentials.supertoken.supertoken","supertoken","access_token","credentials.authorization.supertoken"].forEach(function(t){var r=(0,y.default)(e,t);r&&((0,l.default)(e,t),(0,f.default)(e,"credentials.supertoken",r))}),["credentials","credentials.authorization"].forEach(function(t){var r=(0,y.default)(e,t);"string"==typeof r&&((0,l.default)(e,t),(0,f.default)(e,"credentials.supertoken",r))}),"string"==typeof(0,y.default)(e,"credentials.access_token")&&((0,f.default)(e,"credentials.access_token",this.bearerValidator((0,y.default)(e,"credentials.access_token").trim())),(0,f.default)(e,"credentials.supertoken",e.credentials))),(0,c.default)(w.default,this,[e,t])},derived:{boundedStorage:{deps:[],fn:function(){return(0,LP.makeSparkStore)("bounded",this)}},unboundedStorage:{deps:[],fn:function(){return(0,LP.makeSparkStore)("unbounded",this)}},ready:{deps:["loaded","internal.ready"],fn:function(){var e=this;return this.loaded&&(0,s.default)(this._children).reduce(function(t,r){return t&&e[r]&&!1!==e[r].ready},!0)}}},session:{config:{type:"object"},loaded:{default:!1,type:"boolean"},request:{setOnce:!0,type:"any"},sessionId:{setOnce:!0,type:"string"}},refresh:function(){var e;return(e=this.credentials).refresh.apply(e,arguments)},transform:function(e,t){var r=this,n=this.config.payloadTransformer.predicates.filter(function(t){return!t.direction||t.direction===e}),i={spark:this};return u.default.all(n.map(function(e){return e.test(i,t).then(function(r){if(r)return e.extract(t).then(function(t){return{name:e.name,target:t}})})})).then(function(t){return t.filter(function(e){return Boolean(e)}).reduce(function(t,n){var i=n.name,o=n.target,a=n.alias;return t.then(function(){return a?r.applyNamedTransform(e,a,o):r.applyNamedTransform(e,i,o)})},u.default.resolve())}).then(function(){return t})},applyNamedTransform:function(e,t,r){for(var n=arguments.length,i=Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];var s=this;return(0,v.default)(t)&&(i.unshift(r),r=t,t={spark:this,transform:function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return s.applyNamedTransform.apply(s,[e,t].concat(n))}}),t.spark.config.payloadTransformer.transforms.filter(function(t){return t.name===r&&(!t.direction||t.direction===e)}).reduce(function(e,r){return e.then(function(){var e;return r.alias?(e=t).transform.apply(e,[r.alias].concat((0,a.default)(i))):u.default.resolve(r.fn.apply(r,[t].concat((0,a.default)(i))))})},u.default.resolve()).then(function(){return(0,h.default)(i)})},getWindow:function(){return window},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=(0,p.default)({},A.default,t.config),this.trigger("change:config");var r=function t(){e.loaded&&(e.trigger("loaded"),e.stopListening(e,"change:loaded",t))};Wu(function(){e.listenToAndRun(e,"change:loaded",r)});var n=function t(){e.ready&&(e.trigger("ready"),e.stopListening(e,"change:ready",t))};Wu(function(){e.listenToAndRun(e,"change:ready",n)}),(0,s.default)(this.constructor.prototype._children).forEach(function(t){e.listenTo(e[t],"change",function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];n.unshift("change:"+t),e.trigger.apply(e,n)})});var i=function(t,r){var n=V[r];return(0,g.default)(n)?(t.push((0,c.default)(n,e,[])),t):t},o=[];o=G.reduce(i,o),o=(0,s.default)(V).filter(function(e){return!(G.includes(e)||H.includes(e))}).reduce(i,o),o=H.reduce(i,o),this.request=(0,tC.defaults)({json:!0,interceptors:o});var a=(0,y.default)(this,"config.trackingIdPrefix","spark-js-sdk")+"_"+(0,y.default)(this,"config.trackingIdBase",S.default.v4());(0,m.default)(this,"config.trackingIdPrefix")&&(a+="_"+(0,y.default)(this,"config.trackingIdPrefix")),this.sessionId=a},bearerValidator:function(e){return e.includes("Bearer")&&e.split(" ").length-1==0?(console.warn("Your access token does not have a space between 'Bearer' and the token, please add a space to it or replace it with this already fixed version:\n\n"+e.replace("Bearer","Bearer ").replace(/\s+/g," ")),console.info("Tip: You don't need to add 'Bearer' to the access_token field. The token by itself is fine"),e.replace("Bearer","Bearer ").replace(/\s+/g," ")):e.split(" ").length-1>1?(console.warn("Your access token has "+(e.split(" ").length-2)+" too many spaces, please use this format:\n\n"+e.replace(/\s+/g," ")),console.info("Tip: You don't need to add 'Bearer' to the access_token field, the token by itself is fine"),e.replace(/\s+/g," ")):e.replace(/\s+/g," ")},inspect:function(e){return _.default.inspect((0,d.default)(this.serialize({props:!0,session:!0,derived:!0}),"boundedStorage","unboundedStorage","request","config"),{depth:e})},logout:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var s=this.credentials.supertoken&&(this.credentials.supertoken.refresh_token||this.credentials.supertoken.access_token);return e=(0,o.default)({token:s},e),this.config.onBeforeLogout.reverse().reduce(function(r,i){var o=i.plugin,s=i.fn;return r.then(function(){return u.default.resolve((0,c.default)(s,t[o]||t.internal[o],[e].concat((0,a.default)(n)))).catch(function(e){t.logger.warn("onBeforeLogout from plugin "+o+": failed",e)})})},u.default.resolve()).then(function(){return u.default.all([t.boundedStorage.clear(),t.unboundedStorage.clear()])}).then(function(){var e;return(e=t.credentials).invalidate.apply(e,(0,a.default)(n))}).then(function(){var r;return t.authorization&&t.authorization.logout&&(r=t.authorization).logout.apply(r,[e].concat((0,a.default)(n)))}).then(function(){return t.trigger("client:logout")})},measure:function(){var e;return this.metrics?(e=this.metrics).sendUnstructured.apply(e,arguments):u.default.resolve()},upload:function(e){var t=this;if(!e.file)return u.default.reject(new Error("`options.file` is required"));e.phases=e.phases||{},e.phases.initialize=e.phases.initialize||{},e.phases.upload=e.phases.upload||{},e.phases.finalize=e.phases.finalize||{},(0,b.default)(e.phases.initialize,{method:"POST"},(0,d.default)(e,"file","phases")),(0,b.default)(e.phases.upload,{method:"PUT",json:!1,withCredentials:!1,body:e.file,headers:{"x-trans-id":S.default.v4(),authorization:void 0}}),(0,b.default)(e.phases.finalize,{method:"POST"},(0,d.default)(e,"file","phases"));var r=new qw.EventEmitter,n=this._uploadPhaseInitialize(e).then(function(){var n=t._uploadPhaseUpload(e);return(0,kE.transferEvents)("progress",n,r),n}).then(function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t._uploadPhaseFinalize.apply(t,[e].concat(n))}).then(function(e){return e.body});return(0,kE.proxyEvents)(r,n),n},_uploadPhaseInitialize:function(e){var t=this;return this.logger.debug("client: initiating upload session"),this.request(e.phases.initialize).then(function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t._uploadApplySession.apply(t,[e].concat(n))}).then(function(e){return t.logger.debug("client: initiated upload session"),e})},_uploadApplySession:function(e,t){var r=t.body;["upload","finalize"].reduce(function(e,t){return e[t]=(0,s.default)(e[t]).reduce(function(e,t){return t.startsWith("$")&&(e[t.substr(1)]=e[t](r),(0,i.default)(e,t)),e},e[t]),e},e.phases)},_uploadPhaseUpload:function(e){var t=this;this.logger.debug("client: uploading file");var r=this.request(e.phases.upload).then(function(e){return t.logger.debug("client: uploaded file"),e});return(0,kE.proxyEvents)(e.phases.upload.upload,r),r},_uploadPhaseFinalize:function(e){var t=this;return this.logger.debug("client: finalizing upload session"),this.request(e.phases.finalize).then(function(e){return t.logger.debug("client: finalized upload session"),e})}},N=r,U="_uploadPhaseUpload",z=[kE.retry],q=(0,n.default)(r,"_uploadPhaseUpload"),B=r,W={},Object.keys(q).forEach(function(e){W[e]=q[e]}),W.enumerable=!!W.enumerable,W.configurable=!!W.configurable,("value"in W||W.initializer)&&(W.writable=!0),W=z.slice().reverse().reduce(function(e,t){return t(N,U,e)||e},W),B&&void 0!==W.initializer&&(W.value=W.initializer?W.initializer.call(B):void 0,W.initializer=void 0),void 0===W.initializer&&(Object.defineProperty(N,U,W),W=null),r));J.version="1.47.3",(0,D.default)(L.default,A.default,V),(0,I.default)(J,A.default,V),t.default=J});t(YC);YC.registerPlugin,YC.registerInternalPlugin;var $C=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.grantErrors=t.Token=t.sortScope=t.filterScope=t.Credentials=void 0,Object.defineProperty(t,"Credentials",{enumerable:!0,get:function(){return n(fC).default}}),Object.defineProperty(t,"filterScope",{enumerable:!0,get:function(){return BP.filterScope}}),Object.defineProperty(t,"sortScope",{enumerable:!0,get:function(){return BP.sortScope}}),Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return n(nC).default}}),Object.defineProperty(t,"grantErrors",{enumerable:!0,get:function(){return n(qP).default}});var r=n(fC);function n(e){return e&&e.__esModule?e:{default:e}}(0,YC.registerPlugin)("credentials",r.default,{proxies:["canAuthorize","canRefresh"]})});t($C);$C.grantErrors,$C.Token,$C.sortScope,$C.filterScope,$C.Credentials;var KC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=l(Ql),o=l(Sy),a=l(by),u=l(ky),s=l(Vy),c=l(uP);function l(e){return e&&e.__esModule?e:{default:e}}var f,d,p,h,v,g,m=new s.default,y=(r=function(){function e(){var t,r,i,u,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,e),t=this,r="ready",u=this,(i=n)&&(0,o.default)(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(u):void 0});var l=s.spark||c.parent;if(!l)throw new Error("One of `attrs.spark` or `options.parent` must be supplied when initializing a StatelessSparkPlugin");for(;l.parent||l.collection;)l=l.parent||l.collection;m.set(this,l)}return(0,u.default)(e,[{key:"config",get:function(){var e=this.getNamespace?this.getNamespace():this.namespace;return e?(e=e.toLowerCase(),this.spark.config[e]):this.spark.config}},{key:"logger",get:function(){return this.spark.logger}},{key:"spark",get:function(){return m.get(this)}}]),(0,u.default)(e,[{key:"request",value:function(){var e;return(e=this.spark).request.apply(e,arguments)}},{key:"upload",value:function(){var e;return(e=this.spark).upload.apply(e,arguments)}}]),e}(),f=r.prototype,d="ready",p=[bE.readonly],h={enumerable:!0,initializer:function(){return!0}},g={},Object.keys(h).forEach(function(e){g[e]=h[e]}),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=p.slice().reverse().reduce(function(e,t){return t(f,d,e)||e},g),v&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(v):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(f,d,g),g=null),n=g,r);t.default=y,(0,i.default)(y.prototype,c.default)});t(KC);var XC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(Yl),n=u(Wb),i=u(qT),o=u(FP),a=u(rC);function u(e){return e&&e.__esModule?e:{default:e}}var s=o.default.extend({session:{deferreds:{type:"object",default:function(){return new n.default}},queue:{type:"array",default:function(){return[]}}},derived:{bounce:{fn:function(){var e=this;return(0,kE.cappedDebounce)(function(){return e.executeQueue.apply(e,arguments)},this.config.batcherWait,{maxCalls:this.config.batcherMaxCalls,maxWait:this.config.batcherMaxWait})}}},request:function(e){var t=this,n=new kE.Defer;return this.fingerprintRequest(e).then(function(i){t.deferreds.has(i)?n.resolve(t.deferreds.get(i).promise):(t.deferreds.set(i,n),t.prepareItem(e).then(function(e){n.promise=n.promise.then((0,kE.tap)(function(){return t.deferreds.delete(i)})).catch(function(e){return t.deferreds.delete(i),r.default.reject(e)}),t.enqueue(e).then(function(){return t.bounce()}).catch(function(e){return n.reject(e)})}).catch(function(e){return n.reject(e)}))}).catch(function(e){return n.reject(e)}),n.promise},enqueue:function(e){return this.queue.push(e),r.default.resolve()},prepareItem:function(e){return r.default.resolve(e)},executeQueue:function(){var e=this,t=this.queue.splice(0,this.config.batcherMaxCalls);return new r.default(function(n){n(e.prepareRequest(t).then(function(t){return e.submitHttpRequest(t).then(function(t){return e.handleHttpSuccess(t)})}).catch(function(n){return n instanceof a.default?e.handleHttpError(n):r.default.all(t.map(function(t){return e.getDeferredForRequest(t).then(function(e){e.reject(n)})}))}))}).catch(function(t){return e.logger.error(t.stack),r.default.reject(t)})},prepareRequest:function(e){return r.default.resolve(e)},submitHttpRequest:function(e){throw new Error("request() must be implemented")},handleHttpSuccess:function(e){var t=this;return r.default.all((e.body&&e.body.items||e.body).map(function(e){return t.acceptItem(e)}))},handleHttpError:function(e){var t=this;return e instanceof a.default&&(0,i.default)(e,"options.body.map")?r.default.all(e.options.body.map(function(r){return t.getDeferredForRequest(r).then(function(t){t.reject(e)})})):(this.logger.error("http error handler called without a SparkHttpError object",e),r.default.reject(e))},acceptItem:function(e){var t=this;return this.didItemFail(e).then(function(r){return r?t.handleItemFailure(e):t.handleItemSuccess(e)})},didItemFail:function(e){return r.default.resolve(!1)},handleItemFailure:function(e){return this.getDeferredForResponse(e).then(function(t){t.reject(e)})},handleItemSuccess:function(e){return this.getDeferredForResponse(e).then(function(t){t.resolve(e)})},getDeferredForRequest:function(e){var t=this;return this.fingerprintRequest(e).then(function(e){var r=t.deferreds.get(e);if(!r)throw new Error("Could not find pending request for received response");return r})},getDeferredForResponse:function(e){var t=this;return this.fingerprintResponse(e).then(function(e){var r=t.deferreds.get(e);if(!r)throw new Error("Could not find pending request for received response");return r})},fingerprintRequest:function(e){throw new Error("fingerprintRequest() must be implemented")},fingerprintResponse:function(e){throw new Error("fingerprintResponse() must be implemented")},version:"1.47.3"});t.default=s});t(XC);var ZC=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(Yy),n=a(by),i=a(ky),o=a(Vy);function a(e){return e&&e.__esModule?e:{default:e}}var u=new o.default,s=new o.default,c=new o.default,l=function(){function e(t,r){return(0,n.default)(this,e),u.set(this,t.body.items),s.set(this,e.parseLinkHeaders(t.headers.link)),c.set(this,r),this}return(0,i.default)(e,[{key:"items",get:function(){return u.get(this)}},{key:"length",get:function(){return this.items.length}},{key:"links",get:function(){return s.get(this)}},{key:"spark",get:function(){return c.get(this)}}]),(0,i.default)(e,[{key:"next",value:function(){return this.getLink("next")}},{key:"hasNext",value:function(){return this.hasLink("next")}},{key:"previous",value:function(){return this.getLink("previous")}},{key:"hasPrevious",value:function(){return this.hasLink("previous")}},{key:"getLink",value:function(t){var r=this;return this.spark.request({uri:this.links[t]}).then(function(t){return new e(t,r.spark)})}},{key:"hasLink",value:function(e){return Boolean(this.links[e])}},{key:r.default,value:function(){var e=this,t=-1;return{next:function(){return(t+=1)<e.length?{value:e.items[t]}:{done:!0}}}}}],[{key:"parseLinkHeaders",value:function(e){return e?(e=Array.isArray(e)?e:[e]).reduce(function(e,t){var r=(t=t.split(";"))[0].replace("<","").replace(">","");return e[t[1].split("=")[1].replace(/"/g,"")]=r,e},{}):{}}}]),e}();t.default=l});t(ZC),t(r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={error:["log"],warn:["error","log"],info:["log"],debug:["info","log"],trace:["debug","info","log"]};function n(e){var t=r[e];if(t)for(t=t.slice();!console[e];)e=t.pop();return function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=console)[e].apply(t,n)}}var i=QC.SparkPlugin.extend({namespace:"Logger",error:n("error"),warn:n("warn"),log:n("log"),info:n("info"),debug:n("debug"),trace:n("trace"),version:"1.47.3"});(0,QC.registerPlugin)("logger",i),t.default=i}));var QC=r(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.Page=t.Batcher=t.RateLimitInterceptor=t.SparkUserAgentInterceptor=t.SparkTrackingIdInterceptor=t.RequestTimingInterceptor=t.RequestLoggerInterceptor=t.RequestEventInterceptor=t.ResponseLoggerInterceptor=t.RedirectInterceptor=t.PayloadTransformerInterceptor=t.NetworkTimingInterceptor=t.AuthInterceptor=t.SparkPlugin=t.StatelessSparkPlugin=t.SparkHttpError=t.registerInternalPlugin=t.registerPlugin=t.default=t.children=t.waitForValue=t.StorageError=t.persist=t.NotFoundError=t.MemoryStoreAdapter=t.makeSparkPluginStore=t.makeSparkStore=t.Token=t.sortScope=t.grantErrors=t.filterScope=t.Credentials=void 0,Object.defineProperty(t,"Credentials",{enumerable:!0,get:function(){return $C.Credentials}}),Object.defineProperty(t,"filterScope",{enumerable:!0,get:function(){return $C.filterScope}}),Object.defineProperty(t,"grantErrors",{enumerable:!0,get:function(){return $C.grantErrors}}),Object.defineProperty(t,"sortScope",{enumerable:!0,get:function(){return $C.sortScope}}),Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return $C.Token}}),Object.defineProperty(t,"makeSparkStore",{enumerable:!0,get:function(){return LP.makeSparkStore}}),Object.defineProperty(t,"makeSparkPluginStore",{enumerable:!0,get:function(){return LP.makeSparkPluginStore}}),Object.defineProperty(t,"MemoryStoreAdapter",{enumerable:!0,get:function(){return LP.MemoryStoreAdapter}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return LP.NotFoundError}}),Object.defineProperty(t,"persist",{enumerable:!0,get:function(){return LP.persist}}),Object.defineProperty(t,"StorageError",{enumerable:!0,get:function(){return LP.StorageError}}),Object.defineProperty(t,"waitForValue",{enumerable:!0,get:function(){return LP.waitForValue}}),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return YC.children}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(YC).default}}),Object.defineProperty(t,"registerPlugin",{enumerable:!0,get:function(){return YC.registerPlugin}}),Object.defineProperty(t,"registerInternalPlugin",{enumerable:!0,get:function(){return YC.registerInternalPlugin}}),Object.defineProperty(t,"SparkHttpError",{enumerable:!0,get:function(){return r(rC).default}}),Object.defineProperty(t,"StatelessSparkPlugin",{enumerable:!0,get:function(){return r(KC).default}}),Object.defineProperty(t,"SparkPlugin",{enumerable:!0,get:function(){return r(FP).default}}),Object.defineProperty(t,"AuthInterceptor",{enumerable:!0,get:function(){return r(AC).default}}),Object.defineProperty(t,"NetworkTimingInterceptor",{enumerable:!0,get:function(){return r(IC).default}}),Object.defineProperty(t,"PayloadTransformerInterceptor",{enumerable:!0,get:function(){return r(DC).default}}),Object.defineProperty(t,"RedirectInterceptor",{enumerable:!0,get:function(){return r(LC).default}}),Object.defineProperty(t,"ResponseLoggerInterceptor",{enumerable:!0,get:function(){return r(zC).default}}),Object.defineProperty(t,"RequestEventInterceptor",{enumerable:!0,get:function(){return r(FC).default}}),Object.defineProperty(t,"RequestLoggerInterceptor",{enumerable:!0,get:function(){return r(NC).default}}),Object.defineProperty(t,"RequestTimingInterceptor",{enumerable:!0,get:function(){return r(UC).default}}),Object.defineProperty(t,"SparkTrackingIdInterceptor",{enumerable:!0,get:function(){return r(qC).default}}),Object.defineProperty(t,"SparkUserAgentInterceptor",{enumerable:!0,get:function(){return r(BC).default}}),Object.defineProperty(t,"RateLimitInterceptor",{enumerable:!0,get:function(){return r(WC).default}}),Object.defineProperty(t,"Batcher",{enumerable:!0,get:function(){return r(XC).default}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return r(ZC).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return r(VC).default}})});t(QC);QC.config,QC.Page,QC.Batcher,QC.RateLimitInterceptor,QC.SparkUserAgentInterceptor,QC.SparkTrackingIdInterceptor,QC.RequestTimingInterceptor,QC.RequestLoggerInterceptor,QC.RequestEventInterceptor,QC.ResponseLoggerInterceptor,QC.RedirectInterceptor,QC.PayloadTransformerInterceptor,QC.NetworkTimingInterceptor,QC.AuthInterceptor,QC.SparkPlugin,QC.StatelessSparkPlugin,QC.SparkHttpError,QC.registerInternalPlugin,QC.registerPlugin,QC.children,QC.waitForValue,QC.StorageError,QC.persist,QC.NotFoundError,QC.MemoryStoreAdapter,QC.makeSparkPluginStore,QC.makeSparkStore,QC.Token,QC.sortScope,QC.grantErrors,QC.filterScope,QC.Credentials;var eM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o=m(Ls),a=m(Us),u=m(Yl),s=m(Ql),c=m(nf),l=m(uf),f=m(Uv),d=m(Wv),p=m(Hv),h=m(eg),v=m(Ym),g=m(RC);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var b=kE.base64.encode((0,l.default)({})),_=QC.SparkPlugin.extend((r=(0,kE.whileInFlight)("isAuthorizing"),n=(0,kE.whileInFlight)("isAuthorizing"),y(i={derived:{isAuthenticating:{deps:["isAuthorizing"],fn:function(){return this.isAuthorizing}}},session:{isAuthorizing:{default:!1,type:"boolean"},ready:{default:!1,type:"boolean"}},namespace:"Credentials",initialize:function(e,t){var r=this,n=(0,c.default)(QC.SparkPlugin.prototype.initialize,this,[e,t]);if(!1===e.parse)return this.ready=!0,n;var i=v.default.parse(this.spark.getWindow().location.href,!0);this._checkForErrors(i);var o=i.hash;if(!o)return this.ready=!0,n;o.includes("#")&&(o=o.substr(1)),i.hash=h.default.parse(o),i.hash.state&&(i.hash.state=JSON.parse(kE.base64.decode(i.hash.state)));var a=this._parseHash(i);return a?(this._cleanUrl(i),Wu(function(){r.spark.credentials.set({supertoken:a}),r.ready=!0}),n):n},initiateLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.state=e.state||{},e.state.csrf_token=this._generateSecurityToken(),"confidential"===this.config.clientType?this.initiateAuthorizationCodeGrant(e):this.initiateImplicitGrant(e)},initiateImplicitGrant:function(e){return this.logger.info("authorization: initiating implicit grant flow"),this.spark.getWindow().location=this.spark.credentials.buildLoginUrl((0,s.default)({response_type:"token"},e)),u.default.resolve()},initiateAuthorizationCodeGrant:function(e){return this.logger.info("authorization: initiating authorization code grant flow"),this.spark.getWindow().location=this.spark.credentials.buildLoginUrl((0,s.default)({response_type:"code"},e)),u.default.resolve()},requestAccessTokenFromJwt:function(e){var t=this,r=e.jwt;return this.spark.request({method:"POST",service:"hydra",resource:"jwt/login",headers:{authorization:r}}).then(function(e){var t=e.body;return{access_token:t.token,token_type:"Bearer",expires_in:t.expiresIn}}).then(function(e){t.spark.credentials.set({supertoken:e})})},logout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.noRedirect||(this.spark.getWindow().location=this.spark.credentials.buildLogoutUrl(e))},_checkForErrors:function(e){var t=e.query;if(t&&t.error)throw new(QC.grantErrors.select(t.error))(t)},_cleanUrl:function(e){e=(0,p.default)(e),this.spark.getWindow().history&&this.spark.getWindow().history.replaceState&&(["access_token","token_type","expires_in","refresh_token","refresh_token_expires_in"].forEach(function(t){return(0,a.default)(e.hash,t)}),(0,d.default)(e.hash.state)?(0,a.default)(e.hash,"state"):(e.hash.state=kE.base64.encode((0,l.default)((0,f.default)(e.hash.state,"csrf_token"))),e.hash.state===b&&(0,a.default)(e.hash,"state")),e.hash=h.default.stringify(e.hash),this.spark.getWindow().history.replaceState({},null,v.default.format(e)))},_generateSecurityToken:function(){this.logger.info("authorization: generating csrf token");var e=g.default.v4();return this.spark.getWindow().sessionStorage.setItem("oauth2-csrf-token",e),e},_parseHash:function(e){var t=(0,p.default)(e.hash);if(t&&this._verifySecurityToken(t),t.access_token)return t.expires_in&&(t.expires_in=parseInt(t.expires_in,10)),t.refresh_token_expires_in&&(t.refresh_token_expires_in=parseInt(t.refresh_token_expires_in,10)),t;this.ready=!0},_verifySecurityToken:function(e){var t=this.spark.getWindow().sessionStorage.getItem("oauth2-csrf-token");if(this.spark.getWindow().sessionStorage.removeItem("oauth2-csrf-token"),t){if(!e.state)throw new Error("Expected CSRF token "+t+", but not found in redirect hash");if(!e.state.csrf_token)throw new Error("Expected CSRF token "+t+", but not found in redirect hash");var r=e.state.csrf_token;if(r!==t)throw new Error("CSRF token "+r+" does not match stored token "+t)}},version:"1.47.3"},"initiateImplicitGrant",[r],(0,o.default)(i,"initiateImplicitGrant"),i),y(i,"initiateAuthorizationCodeGrant",[n],(0,o.default)(i,"initiateAuthorizationCodeGrant"),i),y(i,"requestAccessTokenFromJwt",[kE.oneFlight],(0,o.default)(i,"requestAccessTokenFromJwt"),i),i));t.default=_});t(eM);var tM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={credentials:{clientType:"public"}}});t(tM);var rM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(aO),n=u(nf),i=u(Nf),o=u(Uw),a=u(yP);function u(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({props:{key:"string",lastModified:"date",mutable:"boolean",type:"string",val:"string",value:"any"},constructor:function(e,t){return t=t||{},(0,o.default)(t,{parse:!0}),(0,n.default)(a.default.prototype.constructor,this,[e,t])},idAttribute:"key",parse:function(e){if(!e)return{};var t=Number(e.val);return e.val&&!(0,r.default)(t)?(e.value=t,e.type="number"):"true"===e.val?(e.value=!0,e.type="boolean"):"false"===e.val?(e.value=!1,e.type="boolean"):(e.value=e.val,e.type="string"),e},serialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=(0,n.default)(a.default.prototype.serialize,this,t);return i.lastModified&&(i.lastModified=new Date(i.lastModified).toISOString()),i},set:function(e,t,r){var o=void 0;return(0,i.default)(e)||null===e?(o=e,r=t):(o={})[e]=t,o=this.parse(o,r),(0,n.default)(a.default.prototype.set,this,[o,r])}});t.default=s});t(rM);var nM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(cC),n=i(rM);function i(e){return e&&e.__esModule?e:{default:e}}var o=r.default.extend({mainIndex:"key",model:n.default});t.default=o});t(nM);var iM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(TE),n=o(yP),i=o(nM);function o(e){return e&&e.__esModule?e:{default:e}}var a=n.default.extend({collections:{developer:i.default,entitlement:i.default,user:i.default},clear:function(e){var t=this;return(0,r.default)(this.attributes).forEach(function(r){t.unset(r,e)}),(0,r.default)(this._children).forEach(function(e){t[e].clear()}),(0,r.default)(this._collections).forEach(function(e){t[e].reset()}),this},initialize:function(){var e=this;["change:value","add","remove"].forEach(function(t){["developer","entitlement","user"].forEach(function(r){e[r].on(t,function(t,n){e.trigger("change:"+r,e,e[r],n)})})})}});t.default=a});t(iM);var oM=1,aM=2;var uM=function(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;for(e=Object(e);i--;){var u=r[i];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var s=(u=r[i])[0],c=e[s],l=u[1];if(a&&u[2]){if(void 0===c&&!(s in e))return!1}else{var f=new jd;if(n)var d=n(c,l,s,e,t,f);if(!(void 0===d?LT(l,c,oM|aM,n,f):d))return!1}}return!0};var sM=function(e){return e==e&&!Nf(e)};var cM=function(e){for(var t=hp(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,sM(i)]}return t};var lM=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}};var fM=function(e){var t=cM(e);return 1==t.length&&t[0][2]?lM(t[0][0],t[0][1]):function(r){return r===e||uM(r,e,t)}},dM=1,pM=2;var hM=function(e,t){return Yh(e)&&sM(t)?lM(lv(e),t):function(r){var n=_C(r,e);return void 0===n&&n===t?ZP(r,e):LT(t,n,dM|pM)}};var vM=function(e){return function(t){return null==t?void 0:t[e]}};var gM=function(e){return function(t){return fv(t,e)}};var mM=function(e){return Yh(e)?vM(lv(e)):gM(e)};var yM=function(e){return"function"==typeof e?e:null==e?xv:"object"==typeof e?Gd(e)?hM(e[0],e[1]):fM(e):mM(e)};var bM=function(e){return function(t,r,n){var i=Object(t);if(!pp(t)){var o=yM(r,3);t=hp(t),r=function(e){return o(i[e],e,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}},_M=Math.max;var wM=bM(function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:bw(r);return i<0&&(i=_M(n+i,0)),E_(e,yM(t,3),i)});var SM=function(e,t){var r;return QT(e,function(e,n,i){return!(r=t(e,n,i))}),!!r};var kM=function(e,t,r){var n=Gd(e)?iT:SM;return r&&Lw(e,t,r)&&(t=void 0),n(e,yM(t,3))},EM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(Yl),n=l(nf),i=l(wM),o=l(kM),a=l(Nf),u=l(Uw),s=l(yP),c=l(Ym);function l(e){return e&&e.__esModule?e:{default:e}}var f=s.default.extend({props:{service:"string",defaultUrl:"string",availableHosts:{type:"array",default:function(){return[]}}},session:{currentHostIndex:{type:"number",default:0}},derived:{url:{deps:["defaultUrl","availableHosts","currentHostIndex"],fn:function(){if(0===this.availableHosts.length)return this.defaultUrl;var e=void 0;return e=this.currentHostIndex>=this.availableHosts.length?this.availableHosts[this.availableHosts.length-1]:this.availableHosts[this.currentHostIndex],this._changeUrlHost(this.defaultUrl,e.host)}}},constructor:function(e,t){return t=t||{},(0,u.default)(t,{parse:!0}),(0,n.default)(s.default.prototype.constructor,this,[e,t])},idAttribute:"service",serialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=(0,n.default)(s.default.prototype.serialize,this,t);return i.url=this.url,i},parse:function(e){return e?(e.availableHosts&&e.availableHosts.sort(function(e,t){return e.priority-t.priority}),e):{}},set:function(e,t,r){var i=void 0;return(0,a.default)(e)||null===e?(i=e,r=t):(i={})[e]=t,i=this.parse(i,r),(0,n.default)(s.default.prototype.set,this,[i,r])},markHostFailed:function(e){var t=this.getCurrentHost();if(e){var r=c.default.parse(e);t=(0,i.default)(this.availableHosts,function(e){return e.host===r.host})}t&&(t.failed=!0)},cycleNextHost:function(){for(var e=0;e<this.availableHosts.length;e+=1){var t=this.availableHosts[e];if(!t.failed&&this.currentHostIndex!==e)return this.currentHostIndex=e,r.default.resolve(t)}return this.currentHostIndex=0,r.default.reject(new Error("All hosts have failed for "+this.service))},doesUrlBelongToService:function(e){var t=c.default.parse(e),r=this.availableHosts.map(function(e){return e.host});return r.push(c.default.parse(this.defaultUrl).host),(0,o.default)(r,function(e){return e===t.host})},getCurrentHost:function(){return this.availableHosts[this.currentHostIndex]},resetAllHosts:function(){this.availableHosts.forEach(function(e){e.failed=!1})},replaceUrlWithCurrentHost:function(e){return this._changeUrlHost(e,this.getCurrentHost().host)},_changeUrlHost:function(e,t){var r=c.default.parse(e);return r.host=t,c.default.format(r)}});t.default=f});t(EM);var TM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(Yl),n=o(cC),i=o(EM);function o(e){return e&&e.__esModule?e:{default:e}}var a=n.default.extend({mainIndex:"service",model:i.default,markFailedAndCycleUrl:function(e){return e?this.inferServiceFromUrl(e).then(function(t){return t.markHostFailed(e),t.cycleNextHost().then(function(){return t.url})}):r.default.reject(new Error("`uri` is a required parameter"))},resetAllAndRetry:function(e){return e?this.inferServiceFromUrl(e).then(function(e){return e.resetAllHosts(),e.url}):r.default.reject(new Error("`uri` is a required parameter"))},inferServiceFromUrl:function(e){var t=this.filter(function(t){return t.doesUrlBelongToService(e)});return t.length>=1?r.default.resolve(t[0]):r.default.reject(new Error("Unable to infer service for this url "+e))},inferServiceNameFromUrl:function(e){return this.inferServiceFromUrl(e).then(function(e){return e.service})}});t.default=a});t(TM);var PM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o,a,u,s,c,l,f,d=k(Ls),p=k(vO),h=k(nf),v=k(TE),g=k(JP),m=k(Yl),y=k(Uv),b=k(Jm),_=k(iM),w=k(TM),S=k(Ym);function k(e){return e&&e.__esModule?e:{default:e}}function E(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T=QC.SparkPlugin.extend((r=(0,QC.waitForValue)("@"),n=(0,QC.waitForValue)("@"),i=(0,QC.persist)("@",function(){return!this.config.ephemeral}),o=(0,QC.waitForValue)("@"),a=(0,QC.waitForValue)("@"),u=(0,QC.waitForValue)("@"),s=(0,QC.waitForValue)("@"),c=(0,QC.waitForValue)("@"),l=(0,QC.waitForValue)("@"),E(f={children:{features:_.default},collections:{serviceCatalog:w.default},idAttribute:"url",namespace:"Device",props:{clientMessagingGiphy:"string",customerCompanyName:"string",customerLogoUrl:"string",deviceType:"string",helpUrl:"string",intranetInactivityDuration:"number",intranetInactivityCheckUrl:"string",ecmEnabledForAllUsers:{type:"boolean",default:function(){return!1}},ecmSupportedStorageProviders:{type:"array",default:function(){return[]}},modificationTime:"string",partnerCompanyName:"string",partnerLogoUrl:"string",reportingSiteDesc:"string",reportingSiteUrl:"string",searchEncryptionKeyUrl:"string",services:{default:function(){return{}},type:"object"},serviceHostMap:{default:function(){return{serviceLinks:{},hostCatalog:{}}},type:"object"},showSupportText:"boolean",supportProviderCompanyName:"string",supportProviderLogoUrl:"string",url:"string",userId:"string",webFileShareControl:"string",webSocketUrl:"string",whiteboardFileShareControl:"string"},derived:{registered:{deps:["url"],fn:function(){return Boolean(this.url)}}},session:{logoutTimer:"any",lastUserActivityDate:"number"},determineService:function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=(0,g.default)((0,v.default)(this.services));!(t=(i=o.next()).done);t=!0){var a=i.value,u=this.services[a];if(e.startsWith(u))return m.default.resolve(a.substr(0,a.length-10))}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return m.default.reject(new Error(e+" does not reflect a known service"))},getServiceUrl:function(e){var t=this;return this._getServiceUrl(this.services,e).then(function(r){return r||t.getPreDiscoveryServiceUrl(e)})},getPreDiscoveryServiceUrl:function(e){return m.default.resolve(this._getServiceUrl(this.config.preDiscoveryServices,e))},getWebSocketUrl:function(){return this.useServiceCatalogUrl(this.webSocketUrl)},useServiceCatalogUrl:function(e){return this.serviceCatalog.inferServiceFromUrl(e).then(function(t){return t.replaceUrlWithCurrentHost(e)})},markUrlFailedAndGetNew:function(e){var t=this;return e?(this.logger.info("device: marking "+e+" as failed"),this.serviceCatalog.markFailedAndCycleUrl(e).then(function(r){return t.spark.internal.metrics.submitClientMetrics("web-ha",{tags:{action:"replace_url",failedUrl:e,newUrl:r}}),r}).catch(function(){return t._resetAllAndRetry(e)})):m.default.reject(new Error("`url` is a required parameter"))},_resetAllAndRetry:function(e){return e?(this.logger.info("device: reset available hosts and retry "+e),this.serviceCatalog.resetAllAndRetry(e)):m.default.reject(new Error("`url` is a required parameter"))},fetchNewUrls:function(e){var t=this;return new m.default(function(r){return t.serviceCatalog.inferServiceFromUrl(e).then(function(e){t.logger.info("device: refresh to "+e.service+" get new urls"),t.refresh(),t.on("serviceCatalogUpdated",function(){return r(e.url)})})})},initialize:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(0,h.default)(QC.SparkPlugin.prototype.initialize,this,r),["developer","entitlement","user"].forEach(function(t){e.features.on("change:"+t,function(t,r,n){e.trigger("change",e,n),e.trigger("change:features",e,e.features,n)})}),this.on("change:serviceHostMap",this._updateServiceCatalog),this.listenToAndRun(this,"change:intranetInactivityCheckUrl",function(){return e._resetLogoutTimer()}),this.listenToAndRun(this,"change:intranetInactivityDuration",function(){return e._resetLogoutTimer()}),this.listenTo(this.spark,"user-activity",function(){e.lastUserActivityDate=Date.now()})},inspect:function(e){return b.default.inspect((0,y.default)(this.serialize(),"features"),{depth:e})},isPreDiscoveryService:function(e){return m.default.resolve(this._isService(this.config.preDiscoveryServices,e))},isPreDiscoveryServiceUrl:function(e){return m.default.resolve(this._isServiceUrl(this.config.preDiscoveryServices,e))},isService:function(e){var t=this;return this._isService(this.services,e).then(function(r){return r||t.isPreDiscoveryService(e)})},isServiceUrl:function(e){return m.default.resolve(this._isServiceUrl(this.services,e))},isSpecificService:function(e,t){return t===e?m.default.resolve(!0):this.getServiceUrl(e).then(function(e){return t.includes(e)})},_getServiceUrl:function(e,t){if(!e)return m.default.reject(new Error("`target` is a required parameter"));if(!t)return m.default.reject(new Error("`service` is a required parameter"));var r=this.features.developer.get("web-ha-messaging");if(r&&r.value){var n=this.serviceCatalog.get(t+"ServiceUrl");if(n)return m.default.resolve(n.url)}return m.default.resolve(e[t+"ServiceUrl"])},_isService:function(e,t){return this._getServiceUrl(e,t).then(function(e){return Boolean(e)})},_isServiceUrl:function(e,t){if(!t)return m.default.reject(new Error("`uri` is a required parameter"));var r=!0,n=!1,i=void 0;try{for(var o,a=(0,g.default)((0,p.default)(e));!(r=(o=a.next()).done);r=!0){var u=o.value;if(u&&t.startsWith(u))return m.default.resolve(!0)}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return m.default.resolve(!1)},refresh:function(){var e=this;if(this.logger.info("device: refreshing"),!this.registered)return this.logger.info("device: device not registered, registering"),this.register();var t=(0,y.default)(this.serialize(),"features","mediaClusters");return this.config.ephemeral&&(t.ttl=this.config.ephemeralDeviceTTL),this.request({method:"PUT",uri:this.url,body:t}).then(function(t){return e._processRegistrationSuccess(t)}).catch(function(t){return 404===t.statusCode?(e.logger.info("device: refresh failed with 404, attempting to register new device"),e.clear(),e.register()):m.default.reject(t)})},register:function(){var e=this;if(this.logger.info("device: registering"),this.registered)return this.logger.info("device: device already registered, refreshing"),this.refresh();var t=this.config.defaults;return this.config.ephemeral&&(t.ttl=this.config.ephemeralDeviceTTL),this.request({method:"POST",service:"wdm",resource:"devices",body:t}).then(function(t){return e._processRegistrationSuccess(t)})},unregister:function(){var e=this;return this.logger.info("device: unregistering"),this.url?this.request({uri:this.url,method:"DELETE"}).then(function(){return e.clear()}):(this.logger.warn("device: not registered"),m.default.resolve())},clear:function(){clearTimeout(this.refreshTimer);for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(0,h.default)(QC.SparkPlugin.prototype.clear,this,t)},_processRegistrationSuccess:function(e){var t=this;if(this.logger.info("device: received registration payload"),this.set(e.body),this.config.ephemeral){this.logger.info("device: enqueing device refresh");var r=1e3*(this.config.ephemeralDeviceTTL/2+60);this.refreshTimer=(0,CE.safeSetTimeout)(function(){return t.refresh()},r)}},_updateServiceCatalog:function(e){var t=this,r=this.features.developer.get("web-ha-messaging");r&&r.value&&(e.serviceHostMap&&e.serviceHostMap.hostCatalog?((0,v.default)(e.services).forEach(function(r){var n=e.services[r],i=S.default.parse(n),o=e.serviceHostMap.hostCatalog[i.host];t.serviceCatalog.set({service:r,defaultUrl:n,availableHosts:o||[]},{remove:!1})}),this.trigger("serviceCatalogUpdated")):this.refresh())},_resetLogoutTimer:function(){var e=this;if(clearTimeout(this.logoutTimer),this.off("change:lastUserActivityDate"),this.unset("logoutTimer"),this.config.enableInactivityEnforcement&&this.intranetInactivityCheckUrl&&this.intranetInactivityDuration){this.on("change:lastUserActivityDate",function(){return e._resetLogoutTimer()});var t=(0,CE.safeSetTimeout)(function(){e.spark.request({headers:{"cisco-no-http-redirect":null,"spark-user-agent":null,trackingid:null},method:"GET",uri:e.intranetInactivityCheckUrl}).catch(function(){return e.logger.info("device: did not reach internal ping endpoint; logging out after inactivity on a public network"),e.spark.logout()}).catch(function(t){e.logger.warn("device: logout failed",t)})},1e3*this.intranetInactivityDuration);this.logoutTimer=t}},version:"1.47.3"},"determineService",[r],(0,d.default)(f,"determineService"),f),E(f,"getServiceUrl",[n],(0,d.default)(f,"getServiceUrl"),f),E(f,"initialize",[i],(0,d.default)(f,"initialize"),f),E(f,"isService",[o],(0,d.default)(f,"isService"),f),E(f,"isServiceUrl",[a],(0,d.default)(f,"isServiceUrl"),f),E(f,"isSpecificService",[u],(0,d.default)(f,"isSpecificService"),f),E(f,"refresh",[kE.oneFlight,s],(0,d.default)(f,"refresh"),f),E(f,"register",[kE.oneFlight,c],(0,d.default)(f,"register"),f),E(f,"unregister",[kE.oneFlight,l],(0,d.default)(f,"unregister"),f),f));t.default=T});t(PM);var OM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=PM,e&&e.__esModule?e:{default:e}).default;var e}})});t(OM);var CM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(Yl),n=s(RS),i=s(by),o=s(ky),a=s(AS),u=s(IS);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onResponseError",value:function(e,t){return 451===t.statusCode&&(this.spark.internal.device.clear(),this.spark.credentials.clear(),this.spark.logger.info("Received `HTTP 451 Unavailable For Legal Reasons`, discarding credentials and device registration")),r.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=c});t(CM);var MM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(Us),n=l(Ql),i=l(Yl),o=l(RS),a=l(by),u=l(ky),s=l(AS),c=l(IS);function l(e){return e&&e.__esModule?e:{default:e}}var f=/(?:^\/)|(?:\/$)/,d=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,u.default)(t,[{key:"onRequest",value:function(e){return e.uri?e:(this.checkOptions(e),this.normalizeOptions(e),this.spark.internal.device.getServiceUrl(e.service).then(function(t){return t?(e.resource&&(t=t.replace(f,"")+"/"+e.resource.replace(f,"")),e.uri=t,e):i.default.reject(new Error("`"+e.service+"` is not a known service"))}))}},{key:"checkOptions",value:function(e){if(!e.api&&!e.service)throw new Error("A `service` or `uri` parameter is required");if(!e.resource)throw new Error("A `resource` parameter is required")}},{key:"normalizeOptions",value:function(e){e.service||((0,n.default)(e,{service:e.service||e.api}),(0,r.default)(e,"api"))}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=d});t(MM);var jM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(Yl),n=c(RS),i=c(by),o=c(ky),a=c(AS),u=c(IS),s=c(pC);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){var t=this;return!this.spark.internal.device.url||e.headers&&"cisco-device-url"in e.headers&&!e.headers["cisco-device-url"]?r.default.resolve(e):r.default.resolve(e.service||this.spark.internal.device.determineService(e.uri)).then(function(r){return r&&"oauth"!==r&&"saml"!==r&&(0,s.default)(e,"headers['cisco-device-url']",t.spark.internal.device.url),e}).catch(function(t){if(t.message.match(/does not reflect a known service/))return e;throw t})}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=l});t(jM);var xM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(Yl),n=s(RS),i=s(by),o=s(ky),a=s(AS),u=s(IS);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onResponseError",value:function(e,t){if(t instanceof QC.SparkHttpError.InternalServerError&&e.uri){var n=this.spark.internal.device.features.developer.get("web-ha-messaging");if(n&&n.value)return this.spark.internal.metrics.submitClientMetrics("web-ha",{fields:{success:!1},tags:{action:"failed",error:t.message,url:e.uri}}),this.spark.internal.device.markUrlFailedAndGetNew(e.uri).then(function(){return r.default.reject(t)})}return r.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(tC.Interceptor);t.default=c});t(xM);var RM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={device:{preDiscoveryServices:{wdmServiceUrl:"https://wdm-a.wbx2.com/wdm/api/v1",hydraServiceUrl:"https://api.ciscospark.com/v1"},defaults:{name:rs.title||kE.inBrowser&&"browser",deviceType:"UNKNOWN"},enableInactivityEnforcement:!1,ephemeral:!1,ephemeralDeviceTTL:1800}}});t(RM);var AM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.ServerErrorInterceptor=t.DeviceUrlInterceptor=t.UrlInterceptor=t.EmbargoInterceptor=t.ServiceModel=t.ServiceCollection=t.FeatureModel=t.FeatureCollection=t.FeaturesModel=t.Device=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s(OM).default}}),Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return s(OM).default}}),Object.defineProperty(t,"FeaturesModel",{enumerable:!0,get:function(){return s(iM).default}}),Object.defineProperty(t,"FeatureCollection",{enumerable:!0,get:function(){return s(nM).default}}),Object.defineProperty(t,"FeatureModel",{enumerable:!0,get:function(){return s(rM).default}}),Object.defineProperty(t,"ServiceCollection",{enumerable:!0,get:function(){return s(TM).default}}),Object.defineProperty(t,"ServiceModel",{enumerable:!0,get:function(){return s(EM).default}}),Object.defineProperty(t,"EmbargoInterceptor",{enumerable:!0,get:function(){return s(CM).default}}),Object.defineProperty(t,"UrlInterceptor",{enumerable:!0,get:function(){return s(MM).default}}),Object.defineProperty(t,"DeviceUrlInterceptor",{enumerable:!0,get:function(){return s(jM).default}}),Object.defineProperty(t,"ServerErrorInterceptor",{enumerable:!0,get:function(){return s(xM).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return s(RM).default}});var r=s(OM),n=s(RM),i=s(MM),o=s(jM),a=s(CM),u=s(xM);function s(e){return e&&e.__esModule?e:{default:e}}(0,QC.registerInternalPlugin)("device",r.default,{interceptors:{UrlInterceptor:i.default.create,DeviceUrlInterceptor:o.default.create,EmbargoInterceptor:a.default.create,ServerErrorInterceptor:u.default.create},config:n.default,onBeforeLogout:function(){return this.unregister()}})});t(AM);AM.config,AM.ServerErrorInterceptor,AM.DeviceUrlInterceptor,AM.UrlInterceptor,AM.EmbargoInterceptor,AM.ServiceModel,AM.ServiceCollection,AM.FeatureModel,AM.FeatureCollection,AM.FeaturesModel,AM.Device;var IM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(eM).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return i(tM).default}});var r=i(eM),n=i(tM);function i(e){return e&&e.__esModule?e:{default:e}}(0,QC.registerPlugin)("authorization",r.default,{config:n.default,proxies:["isAuthorizing","isAuthenticating"]})});t(IM);IM.config;t(r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=IM,e&&e.__esModule?e:{default:e}).default;var e}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return IM.config}})}));var DM=dO(!0);xs(xs.S,"Object",{entries:function(e){return DM(e)}});var LM=ks.Object.entries,FM=r(function(e){e.exports={default:LM,__esModule:!0}});t(FM);var NM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.levels=void 0;var r=d(_P),n=d(Us),i=d(FM),o=d(JP),a=d(YP),u=d(TE),s=d(VE),c=d(Nf),l=d(Gd),f=(d(qT),d(Hv));function d(e){return e&&e.__esModule?e:{default:e}}var p={silent:0,error:1,warn:2,log:3,info:4,debug:5,trace:6},h=t.levels=(0,u.default)(p).filter(function(e){return"silent"!==e}),v={error:["log"],warn:["error","log"],info:["log"],debug:["info","log"],trace:["debug","info","log"]},g=/[Aa]uthorization/;function m(e){if((0,l.default)(e))return e.map(m);if(!(0,c.default)(e))return(0,s.default)(e)&&kE.patterns.email.test(e)?"-- REDACTED --":e;var t=!0,r=!1,u=void 0;try{for(var f,d=(0,o.default)((0,i.default)(e));!(t=(f=d.next()).done);t=!0){var p=f.value,h=(0,a.default)(p,2),v=h[0],y=h[1];g.test(v)?(0,n.default)(e,v):e[v]=m(y)}}catch(e){r=!0,u=e}finally{try{!t&&d.return&&d.return()}finally{if(r)throw u}}return e}var y=QC.SparkPlugin.extend({namespace:"Logger",derived:{level:{cache:!1,fn:function(){return this.getCurrentLevel()}}},session:{buffer:{type:"array",default:function(){return[]}}},filter:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map(function(e){return e instanceof Error?e:m(e=(0,f.default)(e))})},shouldPrint:function(e){return p[e]<=p[this.getCurrentLevel()]},shouldBuffer:function(e){return p[e]<=p.info},getCurrentLevel:function(){if(this.config.level)return this.config.level;if(h.includes(rs.env.CISCOSPARK_LOG_LEVEL))return rs.env.CISCOSPARK_LOG_LEVEL;var e=this.spark.internal.device&&this.spark.internal.device.features.developer.get("log-level");return e&&h.includes(e)?e:"error"},version:"1.47.3"});h.forEach(function(e){var t=v[e],n=e;if(t)for(t=t.slice();!console[n];)n=t.pop();y.prototype[e]=function(){try{var t=this.shouldPrint(e),i=this.shouldBuffer(e);if(!i&&!t)return;var o=this.filter.apply(this,arguments),a=o.map(function(e){return e instanceof QC.SparkHttpError?e.toString():e});if(t){var u,s=kE.inBrowser?a:o;(u=console)[n].apply(u,(0,r.default)(s))}i&&(a.unshift(Date.now()),this.buffer.push(a),this.buffer.length>this.config.historyLength&&this.buffer.shift())}catch(t){console.warn("failed to execute Logger#"+e,t)}}}),t.default=y});t(NM);NM.levels;var UM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={logger:{level:rs.env.LOGGER_LEVEL,historyLength:1e3}}});t(UM);var zM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.levels=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(NM).default}}),Object.defineProperty(t,"levels",{enumerable:!0,get:function(){return NM.levels}});var r=i(NM),n=i(UM);function i(e){return e&&e.__esModule?e:{default:e}}(0,QC.registerPlugin)("logger",r.default,{config:n.default,replace:!0})});t(zM);zM.levels;var qM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){void 0===r&&(r={}),this.execute=e,this.applicator=t,this.options=r}return Object.defineProperty(e.prototype,"bound",{get:function(){return null!=this.options.bound&&this.options.bound},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setter",{get:function(){return null!=this.options.setter&&this.options.setter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getter",{get:function(){return null!=this.options.getter&&this.options.getter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"property",{get:function(){return null!=this.options.property&&this.options.property},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return null==this.options.method||this.options.method},enumerable:!0,configurable:!0}),e}();t.DecoratorConfig=r});t(qM);qM.DecoratorConfig;var BM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(e){return void 0===e&&(e=""),"lodash-decorators -> "+e}});t(BM);BM.log;var WM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resolveFunction=function(e,t,r,n){if(void 0===n&&(n=!0),Vf(e))return e;if(VE(e)){if(t&&Vf(t[e]))return t[e];if(r&&Vf(r[e]))return r[e]}if(n)throw new ReferenceError(BM.log("Can not resolve method "+e+" on any target Objects"))}});t(WM);WM.resolveFunction;var VM=function(e){return void 0===e},GM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._weakMap=new WeakMap}return e.prototype.set=function(e,t){for(var r=this._weakMap,n=0,i=e.length-1;n<i;n++){var o=e[n],a=r.get(o);a||(a=new Map,r.set(o,a)),r=a}r.set(e[e.length-1],t)},e.prototype.get=function(e){for(var t=this._weakMap,r=0,n=e.length;r<n&&(t=t.get(e[r]),!VM(t));r++);return t},e.prototype.has=function(e){return!VM(this.get(e))},e}();t.CompositeKeyWeakMap=r});t(GM);GM.CompositeKeyWeakMap;var HM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.returnAtIndex=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.call.apply(e,[this].concat(r)),r[t]}}});t(HM);HM.returnAtIndex;var JM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.copyMetadata=function(e,t){return BE(t,function(t,r){return e[r]=t}),e}});t(JM);JM.copyMetadata;var YM=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bind=function(e,t){return JM.copyMetadata(e.bind(t),e)}});t(YM);YM.bind;var $M=200;var KM=function(e,t,r,n){var i=-1,o=C_,a=!0,u=e.length,s=[],c=t.length;if(!u)return s;r&&(t=sf(t,tp(r))),n?(o=WT,a=!1):t.length>=$M&&(o=oT,a=!1,t=new nT(t));e:for(;++i<u;){var l=e[i],f=null==r?l:r(l);if(l=n||0!==l?l:0,a&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;s.push(l)}else o(t,f,n)||s.push(l)}return s},XM=Gb(function(e,t){return JT(e)?KM(e,t):[]}),ZM="[object DOMException]",QM="[object Error]";var ej=function(e){if(!Nd(e))return!1;var t=Ff(e);return t==QM||t==ZM||"string"==typeof e.message&&"string"==typeof e.name&&!wv(e)},tj=Gb(function(e,t){try{return Ov(e,void 0,t)}catch(e){return ej(e)?e:new Error(e)}}),rj=r(function(e,t){function r(e,t,r){var n=Object.getOwnPropertyDescriptor(e,r);if(!n||n.configurable){var i=Object.getOwnPropertyDescriptor(t,r);Nf(i)?Object.defineProperty(e,r,i):e[r]=t[r]}}Object.defineProperty(t,"__esModule",{value:!0}),t.assignAll=function(e,t,n){void 0===n&&(n=[]);for(var i=0,o=XM.apply(void 0,[Object.getOwnPropertyNames(t)].concat(n));i<o.length;i++){var a=o[i];tj(r,e,t,a)}return e},t.assignProperty=r});t(rj);rj.assignAll,rj.assignProperty;var nj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=["length","name","arguments","called","prototype"];t.wrapConstructor=function(e,t){function n(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call.apply(t,[this,e].concat(r))}return n.prototype=e.prototype,Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:e.name,writable:!1}),rj.assignAll(n,e,r)}});t(nj);nj.wrapConstructor;var ij=r(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(BM),r(WM),r(GM),r(HM),r(JM),r(YM),r(nj),r(rj)});t(ij);var oj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceChainMap=new ij.CompositeKeyWeakMap});t(oj);oj.InstanceChainMap;var aj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.createDecorator=function(e){var t=this,r=e.applicator;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return function(i,o,a){var u=t._resolveDescriptor(i,o,a),s=u.value,c=u.get,l=u.set;return oj.InstanceChainMap.has([i,o])||(Vf(s)?u.value=ij.copyMetadata(r.apply({config:e,target:i,value:s,args:n}),s):Vf(c)&&e.getter?u.get=ij.copyMetadata(r.apply({config:e,target:i,value:c,args:n}),c):Vf(l)&&e.setter&&(u.set=ij.copyMetadata(r.apply({config:e,target:i,value:l,args:n}),c))),u}}},e.prototype.createInstanceDecorator=function(e){var t=this,r=e.applicator,n=e.bound;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return function(o,a,u){var s=t._resolveDescriptor(o,a,u),c=s.value,l=s.writable,f=s.enumerable,d=s.configurable,p=s.get,h=s.set,v=!oj.InstanceChainMap.has([o,a]),g=oj.InstanceChainMap.get([o,a])||{fns:[],properties:[]},m=v&&Vf(p),y=v&&Vf(h),b=v&&Vf(c),_=v&&!m&&!y&&!b;if(g.properties.push(a),g.fns.push(function(a,u,s){return t._isApplicable(s,e)?(n&&(a=ij.bind(a,u)),ij.copyMetadata(r.apply({args:i,target:o,instance:u,value:a,config:e}),a)):a}),oj.InstanceChainMap.set([o,a],g),!v)return s;g.isSetter=y,g.isGetter=m,g.isMethod=b,g.isProperty=_;var w=function(e,t,r){return g.fns.reduce(function(e,n){return n(e,r,t)},e)},S=function(e){var t=p||void 0,r=h||void 0;if(m||y)m&&(t=w(p,{value:p,getter:!0},e)),y&&(r=w(h,{value:h,setter:!0},e)),Object.defineProperty(e,a,{enumerable:f,configurable:d,get:t,set:r});else if(b||_){var n=w(c,b?{value:c,method:!0}:{value:c,property:!0},e);Object.defineProperty(e,a,{writable:l,enumerable:f,configurable:d,value:n})}};return(b||_)&&(delete s.value,delete s.writable),s.get=function(){S(this);var e=Object.getOwnPropertyDescriptor(this,a);return e.get?e.get.call(this):e.value},s.set=function(e){S(this);var t=Object.getOwnPropertyDescriptor(this,a);t.set?t.set.call(this,e):(_||b)&&(this[a]=e)},s}}},e.prototype._isApplicable=function(e,t){return!Boolean(e.getter&&!t.getter||e.setter&&!t.setter||e.method&&!t.method||e.property&&!t.property)},e.prototype._resolveDescriptor=function(e,t,r){return r||(Object.getOwnPropertyDescriptor(e,t)||{})},e}();t.InternalDecoratorFactory=r,t.DecoratorFactory=new r});t(aj);aj.InternalDecoratorFactory,aj.DecoratorFactory;var uj=r(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(qM),r(aj),r(oj)});t(uj);var sj="Expected a function";var cj=function(e,t){if("function"!=typeof t)throw new TypeError(sj);return e=bw(e),function(){if(--e<1)return t.apply(this,arguments)}},lj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.Applicator=r});t(lj);lj.Applicator;var fj=function(e,t){return(fj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var dj=function(){return(dj=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function pj(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function hj(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function vj(e){return this instanceof vj?(this.v=e,this):new vj(e)}var gj=Object.freeze({__extends:function(e,t){function r(){this.constructor=e}fj(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},get __assign(){return dj},__rest:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]])}return r},__decorate:function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__param:function(e,t){return function(r,n){t(r,n,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function u(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,u)}s((n=n.apply(e,t||[])).next())})},__generator:function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},__exportStar:function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])},__values:pj,__read:hj,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(hj(arguments[t]));return e},__await:vj,__asyncGenerator:function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||u(e,t)})})}function u(e,t){try{(r=i[e](t)).value instanceof vj?Promise.resolve(r.value.v).then(s,c):l(o[0][2],r)}catch(e){l(o[0][3],e)}var r}function s(e){u("next",e)}function c(e){u("throw",e)}function l(e,t){e(t),o.shift(),o.length&&u(o[0][0],o[0][1])}},__asyncDelegator:function(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:vj(e[n](t)),done:"return"===n}:i?i(t):t}:i}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=pj(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}}}),mj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r._config=t,r}return gj.__extends(t,e),Object.defineProperty(t.prototype,"post",{get:function(){return!0===this._config.post},enumerable:!0,configurable:!0}),t.prototype.apply=function(e){var t=e.config.execute,r=e.value,n=void 0===r?xv:r,i=e.args,o=e.target,a=this;return function(){for(var e=this,r=[],u=0;u<arguments.length;u++)r[u]=arguments[u];var s=i.map(function(t){return ij.resolveFunction(t,e,o)}).slice();return a.post?s.push(n):s.unshift(n),t.apply(void 0,s).apply(this,r)}},t}(lj.Applicator);t.ComposeApplicator=r});t(mj);mj.ComposeApplicator;var yj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gj.__extends(t,e),t.prototype.apply=function(e){var t=e.args,r=e.target,n=e.config.execute;return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return n.apply(void 0,[ij.resolveFunction(t[0],this,r)].concat(t.slice(1))).apply(this,e)}},t}(lj.Applicator);t.PartialApplicator=r});t(yj);yj.PartialApplicator;var bj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gj.__extends(t,e),t.prototype.apply=function(e){var t=e.config.execute,r=e.value,n=e.args;return jw.apply(void 0,[t,r].concat(n))},t}(lj.Applicator);t.PartialedApplicator=r});t(bj);bj.PartialedApplicator;var _j=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gj.__extends(t,e),t.prototype.apply=function(e){var t=e.args,r=e.target,n=e.value,i=e.config.execute;return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a=n,u=0;return Vf(a)||(a=ij.resolveFunction(t[0],this,r),u=1),i.apply(void 0,[a].concat(t.slice(u))).apply(this,e)}},t}(lj.Applicator);t.PartialValueApplicator=r});t(_j);_j.PartialValueApplicator;var wj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gj.__extends(t,e),t.prototype.apply=function(e){var t=e.config,r=t.execute,n=(t.bound,e.args),i=e.value;return r.apply(void 0,n.concat([i]))},t}(lj.Applicator);t.PostValueApplicator=r});t(wj);wj.PostValueApplicator;var Sj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gj.__extends(t,e),t.prototype.apply=function(e){var t=e.value,r=e.config.execute,n=e.args;return r.apply(void 0,[t].concat(n))},t}(lj.Applicator);t.PreValueApplicator=r});t(Sj);Sj.PreValueApplicator;var kj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gj.__extends(t,e),t.prototype.apply=function(e){var t=e.args,r=e.config.execute,n=e.target,i=e.value;return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return r(ij.resolveFunction(t[0],this,n),i).apply(this,e)}},t}(lj.Applicator);t.WrapApplicator=r});t(kj);kj.WrapApplicator;var Ej=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gj.__extends(t,e),t.prototype.apply=function(e){var t=e.value,r=e.config.execute,n=e.args,i=e.instance;e.target;return i?r.apply(void 0,[t,i].concat(n)):t},t}(lj.Applicator);t.BindApplicator=r});t(Ej);Ej.BindApplicator;var Tj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gj.__extends(t,e),t.prototype.apply=function(e){var t=e.args,r=(e.target,e.config.execute),n=e.value;return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return r.apply(void 0,[n.bind(this)].concat(e,t))}},t}(lj.Applicator);t.InvokeApplicator=r});t(Tj);Tj.InvokeApplicator;var Pj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gj.__extends(t,e),t.prototype.apply=function(e){var t=e.value,r=e.instance,n=e.config.execute,i=e.args,o=e.target,a=ij.resolveFunction(Vf(i[0])?i[0]:Nf(i[0])?i[0].resolver:i[0],r,o,!1);a&&r&&(a=a.bind(r));var u=a?n(t,a):n(t);if(Nf(i[0])){var s=i[0],c=s.cache,l=s.type;c?u.cache=c:Vf(l)&&(u.cache=new l)}return u},t}(lj.Applicator);t.MemoizeApplicator=r});t(Pj);Pj.MemoizeApplicator;var Oj=r(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(lj),r(mj),r(yj),r(bj),r(_j),r(wj),r(Sj),r(kj),r(Ej),r(Tj),r(Pj)});t(Oj);var Cj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(cj,new Oj.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.After=n,t.after=n,t.default=r});t(Cj);Cj.After,Cj.after;var Mj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(cj,new Oj.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.AfterAll=n,t.afterAll=n,t.default=r});t(Mj);Mj.AfterAll,Mj.afterAll;var jj=128;var xj=function(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,Cw(e,jj,void 0,void 0,void 0,void 0,t)},Rj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(xj,new Oj.PreValueApplicator));function n(e){return r(e)}t.Ary=n,t.ary=n,t.default=r});t(Rj);Rj.Ary,Rj.ary;var Aj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(function(e){return jw(tj,e)},new Oj.PreValueApplicator));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Attempt=n,t.attempt=n,t.default=r});t(Aj);Aj.Attempt,Aj.attempt;var Ij=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(KT,new Oj.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.Before=n,t.before=n,t.default=r});t(Ij);Ij.Before,Ij.before;var Dj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(KT,new Oj.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.BeforeAll=n,t.beforeAll=n,t.default=r});t(Dj);Dj.BeforeAll,Dj.beforeAll;var Lj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(aC,new Oj.BindApplicator));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Bind=n,t.bind=n,t.default=r});t(Lj);Lj.Bind,Lj.bind;var Fj=r(function(e,t){function r(e){return void 0===e&&(e=[]),function(t){return ij.wrapConstructor(t,function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];!function(e,t,r){void 0===r&&(r=[]);var n=e.prototype;for(;n&&n!==Object.prototype;){for(var i=0,o=Object.getOwnPropertyNames(n);i<o.length;i++){var a=o[i],u=!r.length||-1!==r.indexOf(a),s=Object.getOwnPropertyDescriptor(n,a);if(u&&"constructor"!==a&&!t.hasOwnProperty(a)){if(s.get){var c=uj.InstanceChainMap.get([n,a]);if(!c||!c.isMethod)continue}var l=t[a];Vf(l)&&Object.defineProperty(t,a,{configurable:!0,enumerable:s.enumerable,value:ij.copyMetadata(l.bind(t),l),writable:s.writable})}}n=Object.getPrototypeOf(n)}}(t,this,e),r.apply(this,n)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.BindAll=r,t.bindAll=r,t.default=r});t(Fj);Fj.BindAll,Fj.bindAll;var Nj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(jP,new Oj.PreValueApplicator,{bound:!0}));function n(e){return r(e)}t.Curry=n,t.curry=n,t.default=r});t(Nj);Nj.Curry,Nj.curry;var Uj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(jP,new Oj.PreValueApplicator));function n(e){return r(e)}t.CurryAll=n,t.curryAll=n,t.default=r});t(Uj);Uj.CurryAll,Uj.curryAll;var zj=16;function qj(e,t,r){var n=Cw(e,zj,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=qj.placeholder,n}qj.placeholder={};var Bj=qj,Wj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(Bj,new Oj.PreValueApplicator,{bound:!0}));function n(e){return r(e)}t.CurryRight=n,t.curryRight=n,t.default=r});t(Wj);Wj.CurryRight,Wj.curryRight;var Vj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(Bj,new Oj.PreValueApplicator));function n(e){return r(e)}t.CurryRightAll=n,t.curryRightAll=n,t.default=r});t(Vj);Vj.CurryRightAll,Vj.curryRightAll;var Gj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(OP,new Oj.PreValueApplicator,{setter:!0}));function n(e,t){return r(e,t)}t.Debounce=n,t.debounce=n,t.default=r});t(Gj);Gj.Debounce,Gj.debounce;var Hj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(OP,new Oj.PreValueApplicator));function n(e,t){return r(e,t)}t.DebounceAll=n,t.debounceAll=n,t.default=r});t(Hj);Hj.DebounceAll,Hj.debounceAll;var Jj="Expected a function";var Yj=function(e,t,r){if("function"!=typeof e)throw new TypeError(Jj);return setTimeout(function(){e.apply(void 0,r)},t)},$j=Gb(function(e,t){return Yj(e,1,t)}),Kj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig($j,new Oj.InvokeApplicator,{setter:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Defer=n,t.defer=n,t.default=r});t(Kj);Kj.Defer,Kj.defer;var Xj=Gb(function(e,t,r){return Yj(e,vw(t)||0,r)}),Zj=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Xj.apply(void 0,[e.bind(this),t].concat(n,r))}},new Oj.PreValueApplicator,{setter:!0}));function n(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,[e].concat(t))}t.Delay=n,t.delay=n,t.default=r});t(Zj);Zj.Delay,Zj.delay;var Qj=512;var ex=function(e){return Cw(e,Qj)},tx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(ex,new Oj.PartialValueApplicator,{property:!0}));function n(e){return r(e)}t.Flip=n,t.flip=n,t.default=r});t(tx);tx.Flip,tx.flip;var rx="Expected a function",nx=8,ix=32,ox=128,ax=256;var ux=function(e){return Nv(function(t){var r=t.length,n=r,i=d_.prototype.thru;for(e&&t.reverse();n--;){var o=t[n];if("function"!=typeof o)throw new TypeError(rx);if(i&&!a&&"wrapper"==l_(o))var a=new d_([],!0)}for(n=a?n:r;++n<r;){o=t[n];var u=l_(o),s="wrapper"==u?u_(o):void 0;a=s&&m_(s[0])&&s[1]==(ox|nx|ix|ax)&&!s[4].length&&1==s[9]?a[l_(s[0])].apply(a,s[3]):1==o.length&&m_(o)?a[u]():a.thru(o)}return function(){var e=arguments,n=e[0];if(a&&1==e.length&&Gd(n))return a.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}})},sx=ux(),cx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(sx,new Oj.ComposeApplicator({post:!0}),{property:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Flow=n,t.flow=n,t.default=r});t(cx);cx.Flow,cx.flow;var lx=ux(!0),fx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(lx,new Oj.ComposeApplicator({post:!1}),{property:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.FlowRight=n,t.flowRight=n,t.default=r});t(fx);fx.FlowRight,fx.flowRight;var dx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(Xh,new Oj.MemoizeApplicator));function n(e){return r(e)}t.Memoize=n,t.memoize=n,t.default=r});t(dx);dx.Memoize,dx.memoize;var px=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(Xh,new Oj.MemoizeApplicator));function n(e){return r(e)}t.MemoizeAll=n,t.memoizeAll=n,t.default=r});t(px);px.MemoizeAll,px.memoizeAll;var hx=r(function(e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return AE.apply(void 0,[t.prototype].concat(e)),t}}Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=r,t.mixin=r,t.default=r});t(hx);hx.Mixin,hx.mixin;var vx="Expected a function";var gx=function(e){if("function"!=typeof e)throw new TypeError(vx);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}},mx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(gx,new Oj.PartialValueApplicator,{property:!0}));function n(e){return r(e)}t.Negate=n,t.negate=n,t.default=r});t(mx);mx.Negate,mx.negate;var yx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(XT,new Oj.PreValueApplicator,{setter:!0}));function n(){return r()}t.Once=n,t.once=n,t.default=r});t(yx);yx.Once,yx.once;var bx=Gb,_x=Math.min,wx=bx(function(e,t){var r=(t=1==t.length&&Gd(t[0])?sf(t[0],tp(yM)):sf(Tv(t,1),tp(yM))).length;return Gb(function(n){for(var i=-1,o=_x(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return Ov(e,this,n)})}),Sx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(wx,new Oj.PreValueApplicator,{setter:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.OverArgs=n,t.overArgs=n,t.default=r});t(Sx);Sx.OverArgs,Sx.overArgs;var kx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(jw,new Oj.PartialApplicator,{property:!0,method:!1}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Partial=n,t.partial=n,t.default=r});t(kx);kx.Partial,kx.partial;var Ex=Gb(function(e,t){var r=W_(t,U_(Ex));return Cw(e,64,void 0,t,r)});Ex.placeholder={};var Tx=Ex,Px=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(Tx,new Oj.PartialApplicator,{property:!0,method:!1}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.PartialRight=n,t.partialRight=n,t.default=r});t(Px);Px.PartialRight,Px.partialRight;var Ox=Nv(function(e,t){return Cw(e,256,void 0,void 0,void 0,t)}),Cx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(Ox,new Oj.PartialValueApplicator,{property:!0}));function n(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,[e].concat(t))}t.Rearg=n,t.rearg=n,t.default=r});t(Cx);Cx.Rearg,Cx.rearg;var Mx="Expected a function";var jx=function(e,t){if("function"!=typeof e)throw new TypeError(Mx);return t=void 0===t?t:bw(t),Gb(e,t)},xx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(jx,new Oj.PreValueApplicator));function n(e){return r(e)}t.Rest=n,t.rest=n,t.default=r});t(xx);xx.Rest,xx.rest;var Rx=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:dv(e,t,r)},Ax="Expected a function",Ix=Math.max;var Dx=function(e,t){if("function"!=typeof e)throw new TypeError(Ax);return t=null==t?0:Ix(bw(t),0),Gb(function(r){var n=r[t],i=Rx(r,0,t);return n&&Mp(i,n),Ov(e,this,i)})},Lx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(Dx,new Oj.PreValueApplicator));function n(e){return r(e)}t.Spread=n,t.spread=n,t.default=r});t(Lx);Lx.Spread,Lx.spread;var Fx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(function(e){return ij.returnAtIndex(e,0)},new Oj.PreValueApplicator));function n(){return r()}t.Tap=n,t.tap=n,t.default=r});t(Fx);Fx.Tap,Fx.tap;var Nx="Expected a function";var Ux=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError(Nx);return Nf(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),OP(e,t,{leading:n,maxWait:t,trailing:i})},zx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(Ux,new Oj.PreValueApplicator,{setter:!0,getter:!0})),n=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(Ux,new Oj.PreValueApplicator,{getter:!0})),i=uj.DecoratorFactory.createInstanceDecorator(new uj.DecoratorConfig(Ux,new Oj.PreValueApplicator,{setter:!0}));function o(e,t){return r(e,t)}function a(e,t){return n(e,t)}function u(e,t){return i(e,t)}t.Throttle=o,t.throttle=o,t.ThrottleGetter=a,t.throttleGetter=a,t.ThrottleSetter=u,t.throttleSetter=u,t.default=r});t(zx);zx.Throttle,zx.throttle,zx.ThrottleGetter,zx.throttleGetter,zx.ThrottleSetter,zx.throttleSetter;var qx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(Ux,new Oj.PreValueApplicator,{setter:!0}));function n(e,t){return r(e,t)}t.ThrottleAll=n,t.throttleAll=n,t.default=r});t(qx);qx.ThrottleAll,qx.throttleAll;var Bx=function(e){return xj(e,1)},Wx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(Bx,new Oj.PreValueApplicator));function n(){return r()}t.Unary=n,t.unary=n,t.default=r});t(Wx);Wx.Unary,Wx.unary;var Vx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=uj.DecoratorFactory.createDecorator(new uj.DecoratorConfig(xw,new Oj.WrapApplicator));function n(e){return r(e)}t.Wrap=n,t.wrap=n,t.default=r});t(Vx);Vx.Wrap,Vx.wrap;var Gx=r(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(uj),r(Cj),r(Mj),r(Rj),r(Aj),r(Ij),r(Dj),r(Lj),r(Fj),r(Nj),r(Uj),r(Wj),r(Vj),r(Gj),r(Hj),r(Kj),r(Zj),r(tx),r(cx),r(fx),r(dx),r(px),r(hx),r(mx),r(yx),r(Sx),r(kx),r(Px),r(Cx),r(xx),r(Lx),r(Fx),r(zx),r(qx),r(Wx),r(Vx)});t(Gx);var Hx=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(Us),n=o(Wb),i=o(Vy);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){var i=n.initializer&&n.initializer();(0,r.default)(n,"value"),(0,r.default)(n,"initializer"),(0,r.default)(n,"writable"),n.get=function(){var e=a.get(this,t);return void 0!==e?e:i},n.set=function(e){var r=this[t];r!==e&&(a.set(this,t,e),this.trigger("change:"+t,e,r),this.trigger("change"))}};var a=new((0,kE.make)(i.default,n.default))});t(Hx);var Jx=r(function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach(function(e){t[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})}),Yx=(Jx.v,Jx.o,Jx.s,Jx.i,Jx.u,Jx.e,Jx.p,Jx.z,Jx.r,Jx.t,Jx.c,Jx.b,Jx.m,Jx.a,r(function(e,t){var r=function(e){return String(Number(e))===e?Number(e):e},n=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],o=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),o=r[r.length-1]);for(var a=0;a<(Jx[t]||[]).length;a+=1){var u=Jx[t][a];if(u.reg.test(i))return n(u,o,i)}}),t.media=r,t};var o=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/\;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})})},t.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}})})}})),$x=(Yx.parse,Yx.parseParams,Yx.parseFmtpConfig,Yx.parsePayloads,Yx.parseRemoteCandidates,Yx.parseImageAttributes,Yx.parseSimulcastStreamList,/%[sdv%]/g),Kx=function(e,t,r){var n=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?n.push(r[t.name][o]):n.push(r[t.names[i]])}else n.push(r[t.name]);return function(e){var t=1,r=arguments,n=r.length;return e.replace($x,function(e){if(t>=n)return e;var i=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})}.apply(null,n)},Xx=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Zx=["i","c","b","a"],Qx={write:function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var r=t.outerOrder||Xx,n=t.innerOrder||Zx,i=[];return r.forEach(function(t){Jx[t].forEach(function(r){r.name in e&&null!=e[r.name]?i.push(Kx(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){i.push(Kx(t,r,e))})})}),e.media.forEach(function(e){i.push(Kx("m",Jx.m[0],e)),n.forEach(function(t){Jx[t].forEach(function(r){r.name in e&&null!=e[r.name]?i.push(Kx(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){i.push(Kx(t,r,e))})})})}),i.join("\r\n")+"\r\n"},parse:Yx.parse,parseFmtpConfig:Yx.parseFmtpConfig,parseParams:Yx.parseParams,parsePayloads:Yx.parsePayloads,parseRemoteCandidates:Yx.parseRemoteCandidates,parseImageAttributes:Yx.parseImageAttributes,parseSimulcastStreamList:Yx.parseSimulcastStreamList},eR=r(function(t){var r,n;r=e,n=function(){var e=!0;function t(t){function r(e){var r=t.match(e);return r&&r.length>1&&r[1]||""}function n(e){var r=t.match(e);return r&&r.length>1&&r[2]||""}var i,a=r(/(ipod|iphone|ipad)/i).toLowerCase(),u=!/like android/i.test(t)&&/android/i.test(t),s=/nexus\s*[0-6]\s*/i.test(t),c=!s&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),f=/silk/i.test(t),d=/sailfish/i.test(t),p=/tizen/i.test(t),h=/(web|hpw)(o|0)s/i.test(t),v=/windows phone/i.test(t),g=(/SamsungBrowser/i.test(t),!v&&/windows/i.test(t)),m=!a&&!f&&/macintosh/i.test(t),y=!u&&!d&&!p&&!h&&/linux/i.test(t),b=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),_=r(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(t)&&!/tablet pc/i.test(t),S=!w&&/[^-]mobi/i.test(t),k=/xbox/i.test(t);/opera/i.test(t)?i={name:"Opera",opera:e,version:_||r(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?i={name:"Opera",opera:e,version:r(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||_}:/SamsungBrowser/i.test(t)?i={name:"Samsung Internet for Android",samsungBrowser:e,version:_||r(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?i={name:"NAVER Whale browser",whale:e,version:r(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?i={name:"MZ Browser",mzbrowser:e,version:r(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?i={name:"Opera Coast",coast:e,version:_||r(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?i={name:"Focus",focus:e,version:r(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?i={name:"Yandex Browser",yandexbrowser:e,version:_||r(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?i={name:"UC Browser",ucbrowser:e,version:r(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?i={name:"Maxthon",maxthon:e,version:r(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?i={name:"Epiphany",epiphany:e,version:r(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?i={name:"Puffin",puffin:e,version:r(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?i={name:"Sleipnir",sleipnir:e,version:r(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?i={name:"K-Meleon",kMeleon:e,version:r(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},b?(i.msedge=e,i.version=b):(i.msie=e,i.version=r(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?i={name:"Internet Explorer",msie:e,version:r(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?i={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?i={name:"Microsoft Edge",msedge:e,version:b}:/vivaldi/i.test(t)?i={name:"Vivaldi",vivaldi:e,version:r(/vivaldi\/(\d+(\.\d+)?)/i)||_}:d?i={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:r(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?i={name:"SeaMonkey",seamonkey:e,version:r(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(i={name:"Firefox",firefox:e,version:r(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(i.firefoxos=e,i.osname="Firefox OS")):f?i={name:"Amazon Silk",silk:e,version:r(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?i={name:"PhantomJS",phantom:e,version:r(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?i={name:"SlimerJS",slimer:e,version:r(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:_||r(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(i={name:"WebOS",osname:"WebOS",webos:e,version:_||r(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(i.touchpad=e)):/bada/i.test(t)?i={name:"Bada",osname:"Bada",bada:e,version:r(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",osname:"Tizen",tizen:e,version:r(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||_}:/qupzilla/i.test(t)?i={name:"QupZilla",qupzilla:e,version:r(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||_}:/chromium/i.test(t)?i={name:"Chromium",chromium:e,version:r(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||_}:/chrome|crios|crmo/i.test(t)?i={name:"Chrome",chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:u?i={name:"Android",version:_}:/safari|applewebkit/i.test(t)?(i={name:"Safari",safari:e},_&&(i.version=_)):a?(i={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},_&&(i.version=_)):i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:r(/googlebot\/(\d+(\.\d+))/i)||_}:{name:r(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(i.name=i.name||"Blink",i.blink=e):(i.name=i.name||"Webkit",i.webkit=e),!i.version&&_&&(i.version=_)):!i.opera&&/gecko\//i.test(t)&&(i.name=i.name||"Gecko",i.gecko=e,i.version=i.version||r(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!u&&!i.silk?!i.windowsphone&&a?(i[a]=e,i.ios=e,i.osname="iOS"):m?(i.mac=e,i.osname="macOS"):k?(i.xbox=e,i.osname="Xbox"):g?(i.windows=e,i.osname="Windows"):y&&(i.linux=e,i.osname="Linux"):(i.android=e,i.osname="Android");var E="";i.windows?E=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(r(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?E=r(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?E=(E=r(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):a?E=(E=r(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):u?E=r(/android[ \/-](\d+(\.\d+)*)/i):i.webos?E=r(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?E=r(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?E=r(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(E=r(/tizen[\/\s](\d+(\.\d+)*)/i)),E&&(i.osversion=E);var T=!i.windows&&E.split(".")[0];return w||c||"ipad"==a||u&&(3==T||T>=4&&!S)||i.silk?i.tablet=e:(S||"iphone"==a||"ipod"==a||u||s||i.blackberry||i.webos||i.bada)&&(i.mobile=e),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===o([i.version,"1.0"])||i.mzbrowser&&1===o([i.version,"6.0"])||i.focus&&1===o([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=e:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=e:i.x=e,i}var r=t("undefined"!=typeof navigator&&navigator.userAgent||"");function n(e){return e.split(".").length}function i(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function o(e){for(var t=Math.max(n(e[0]),n(e[1])),r=i(e,function(e){var r=t-n(e);return i((e+=new Array(r+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--t>=0;){if(r[0][t]>r[1][t])return 1;if(r[0][t]!==r[1][t])return-1;if(0===t)return 0}}function a(e,n,i){var a=r;"string"==typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(a=t(i));var u=""+a.version;for(var s in e)if(e.hasOwnProperty(s)&&a[s]){if("string"!=typeof e[s])throw new Error("Browser version in the minVersion map should be a string: "+s+": "+String(e));return o([u,e[s]])<0}return n}return r.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in r)return!0}return!1},r.isUnsupportedBrowser=a,r.compareVersions=o,r.check=function(e,t,r){return!a(e,t,r)},r._detect=t,r.detect=t,r},t.exports?t.exports=n():r.bowser=n()});var tR=function(e,t){var r=[];return QT(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r};var rR=function(e,t){return(Gd(e)?kp:tR)(e,yM(t,3))},nR=!0,iR=!0;function oR(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}var aR={extractVersion:oR,wrapPeerConnectionEvent:function(e,t,r){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);var o=function(e){n(r(e))};return this._eventMap=this._eventMap||{},this._eventMap[n]=o,i.apply(this,[e,o])};var o=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r])return o.apply(this,arguments);var n=this._eventMap[r];return delete this._eventMap[r],o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(nR=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(iR=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(nR)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){iR&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(t.mozGetUserMedia)r.browser="firefox",r.version=oR(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)r.browser="chrome",r.version=oR(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=oR(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=oR(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return r}},uR=aR.log,sR=aR.log;function cR(e,t,r){var n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){e.forEach(function(r){r.type===n&&r.trackId===t.id&&function e(t,r,n){r&&!n.has(r.id)&&(n.set(r.id,r),Object.keys(r).forEach(function(i){i.endsWith("Id")?e(t,t.get(r[i]),n):i.endsWith("Ids")&&r[i].forEach(function(r){e(t,t.get(r),n)})}))}(e,r,i)})}),i}var lR={shimGetUserMedia:function(e){var t=aR.detectBrowser(e),r=e&&e.navigator,n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var o={};"number"==typeof n.ideal?(o[i("min",r)]=n.ideal,t.optional.push(o),(o={})[i("max",r)]=n.ideal,t.optional.push(o)):(o[i("",r)]=n.ideal,t.optional.push(o))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=n[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var o=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var u,s=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||s)&&(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?u=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(u=["front"]),u))return r.mediaDevices.enumerateDevices().then(function(t){var r=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return u.some(function(t){return-1!==e.label.toLowerCase().indexOf(t)})});return!r&&t.length&&-1!==u.indexOf("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=a.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=n(e.video),uR("chrome: "+JSON.stringify(e)),i(e)});e.video=n(e.video)}return uR("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};r.getUserMedia=function(e,t,n){i(e,function(e){r.webkitGetUserMedia(e,t,function(e){n&&n(o(e))})})};var a=function(e){return new Promise(function(t,n){r.getUserMedia(e,t,n)})};if(r.mediaDevices||(r.mediaDevices={getUserMedia:a,enumerateDevices:function(){return new Promise(function(t){var r={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:r[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),r.mediaDevices.getUserMedia){var u=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return i(e,function(e){return u(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(o(e))})})}}else r.mediaDevices.getUserMedia=function(e){return a(e)};void 0===r.mediaDevices.addEventListener&&(r.mediaDevices.addEventListener=function(){uR("Dummy mediaDevices.addEventListener called.")}),void 0===r.mediaDevices.removeEventListener&&(r.mediaDevices.removeEventListener=function(){uR("Dummy mediaDevices.removeEventListener called.")})},shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)"RTCRtpTransceiver"in e||aR.wrapPeerConnectionEvent(e,"track",function(e){return e.transceiver||(e.transceiver={receiver:e.receiver}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return r._ontrackpoly||(r._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(n){var i;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],r.dispatchEvent(o)}),t.stream.getTracks().forEach(function(n){var i;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],r.dispatchEvent(o)})},r.addEventListener("addstream",r._ontrackpoly)),t.apply(r,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;r._senders=r._senders||[],i.apply(r,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],o.apply(t,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(e,[]);return t.forEach(function(t){t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(e,[]);return r.forEach(function(t){t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return cR(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(e,[]);return t.forEach(function(t){t._pc=e}),t}),aR.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return cR(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,r,n,o=arguments[0];return this.getSenders().forEach(function(e){e.track===o&&(t?n=!0:t=e)}),this.getReceivers().forEach(function(e){return e.track===o&&(r?n=!0:r=e),e.track===o}),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}},shimSourceObject:function(e){var t=e&&e.URL;"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var r=this;this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",function(){r.src&&t.revokeObjectURL(r.src),r.src=t.createObjectURL(e)}),e.addEventListener("removetrack",function(){r.src&&t.revokeObjectURL(r.src),r.src=t.createObjectURL(e)})):this.src=""}}))},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=t.getSenders();r.apply(this,arguments);var i=t.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}},shimAddTrackRemoveTrack:function(e){var t=aR.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return this.shimAddTrackRemoveTrackWithNative(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(r._streams=r._streams||{},r._reverseStreams=r._reverseStreams||{},t.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!r._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());r._streams[t.id]=i,r._reverseStreams[i.id]=t,t=i}n.apply(r,[t])};var i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},i.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{};var o=n._streams[r.id];if(o)o.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var a=new e.MediaStream([t]);n._streams[r.id]=a,n._reverseStreams[a.id]=r,n.addStream(a)}return n.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(e,[function(r){var n=o(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(e,arguments).then(function(t){return o(e,t)})}});var a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};var u=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=u.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===r.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===r))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");r._streams=r._streams||{},Object.keys(r._streams).forEach(function(n){r._streams[n].getTracks().find(function(t){return e.track===t})&&(t=r._streams[n])}),t&&(1===t.getTracks().length?r.removeStream(r._reverseStreams[t.id]):t.removeTrack(e.track),r.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(e){var t=aR.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection)e.RTCPeerConnection=function(t,r){return sR("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,r)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}});else{var r=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(aR.deprecated("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,n.push(o)):n.push(e.iceServers[i])}e.iceServers=n}return new r(e,t)},e.RTCPeerConnection.prototype=r.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}var n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,r){var i=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return n.apply(this,arguments);if(0===n.length&&(0===arguments.length||"function"!=typeof arguments[0]))return n.apply(this,[]);var a=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},u=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return n.apply(this,[function(e){o[1](u(a(e)))},arguments[0]])}return new Promise(function(e,t){n.apply(i,[function(t){e(u(a(t)))},t])}).then(t,r)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,n=new Promise(function(n,i){r.apply(t,[e[0],n,i])});return e.length<2?n:n.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),t.version<52&&["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var t=1===arguments.length?arguments[0]:void 0;return new Promise(function(n,i){r.apply(e,[n,i,t])})}return r.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}});var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},fR=r(function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},t.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},t.getDescription=function(e){var r=t.splitSections(e);return r&&r[0]},t.getMediaSections=function(e){var r=t.splitSections(e);return r.shift(),r},t.matchPrefix=function(e,r){return t.splitLines(e).filter(function(e){return 0===e.indexOf(r)})},t.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)r[(t=n[i].trim().split("="))[0].trim()]=t[1];return r},t.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)}),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},t.getMid=function(e){var r=t.matchPrefix(e,"a=mid:")[0];if(r)return r.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,r){return{role:"auto",fingerprints:t.matchPrefix(e+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),r},t.getIceParameters=function(e,r){var n=t.splitLines(e);return{usernameFragment:(n=n.concat(t.splitLines(r))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var u=t.parseRtpMap(a),s=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(u.parameters=s.length?t.parseFmtp(s[0]):{},u.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach(function(e){r.headerExtensions.push(t.parseExtmap(e))}),r},t.writeRtpDescription=function(e,r){var n="";n+="m="+e+" ",n+=r.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=r.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",r.codecs.forEach(function(e){n+=t.writeRtpMap(e),n+=t.writeFmtp(e),n+=t.writeRtcpFb(e)});var i=0;return r.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",r.headerExtensions&&r.headerExtensions.forEach(function(e){n+=t.writeExtmap(e)}),n},t.parseRtpEncodingParameters=function(e){var r,n=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),u=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),s=u.length>0&&u[0].ssrc,c=t.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});c.length>0&&c[0].length>1&&c[0][0]===s&&(r=c[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&r&&(t.rtx={ssrc:r}),n.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:r,mechanism:a?"red+ulpfec":"red"},n.push(t))}}),0===n.length&&s&&n.push({ssrc:s});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=l})),n},t.parseRtcpParameters=function(e){var r={},n=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(r.cname=n.value,r.ssrc=n.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");r.reducedSize=i.length>0,r.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return r.mux=o.length>0,r},t.parseMsid=function(e){var r,n=t.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(r=n[0].substr(7).split(" "))[0],track:r[1]};var i=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?{stream:(r=i[0].value.split(" "))[0],track:r[1]}:void 0},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,r){var n=void 0!==r?r:2;return"v=0\r\no=thisisadapterortc "+(e||t.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,r,n,i){var o=t.writeRtpDescription(e.kind,r);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,r){for(var n=t.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var r=t.splitLines(e)[0].substr(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(e){var r=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.exports=t});function dR(e,t,r,n,i){var o=fR.writeRtpDescription(e.kind,t);if(o+=fR.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=fR.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var u="msid:"+(n?n.id:"-")+" "+a+"\r\n";o+="a="+u,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+u,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+u,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+fR.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+fR.localCName+"\r\n"),o}function pR(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},i=function(e,t,r,i){var o=n(e.parameters.apt,r),a=n(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach(function(n){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(n.name.toLowerCase()===a.name.toLowerCase()&&n.clockRate===a.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&a.parameters.apt&&!i(n,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(n.numChannels,a.numChannels),r.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break}}}),r}function hR(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function vR(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function gR(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}var mR=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function n(t,r,n,i){var o=new Event("track");o.track=r,o.receiver=n,o.transceiver={receiver:n},o.streams=i,e.setTimeout(function(){t._dispatchEvent("track",o)})}var i=function(r){var n=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){n[e]=i[e].bind(i)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw gR("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof n;return i&&(n=[n]),n=n.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0)}),delete e.url,e.urls=i?n[0]:n,!!n.length}})}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var o=r.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=fR.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(n),n},i.prototype.addTrack=function(t,r){if(this._isClosed)throw gR("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find(function(e){return e.track===t}))throw gR("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},i.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach(function(t){r.addTrack(t,e)});else{var n=e.clone();e.getTracks().forEach(function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",function(e){r.enabled=e.enabled})}),n.getTracks().forEach(function(e){r.addTrack(e,n)})}},i.prototype.removeTrack=function(t){if(this._isClosed)throw gR("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find(function(e){return e.rtpSender===t});if(!r)throw gR("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},i.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},i.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},i.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;i.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},i.prototype._gather=function(t,r){var n=this,i=this.transceivers[r].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),i.onlocalcandidate=function(e){if(!(n.usingBundle&&r>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:r};var a=e.candidate,u=!a||0===Object.keys(a).length;if(u)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var s=fR.writeCandidate(a);o.candidate=Object.assign(o.candidate,fR.parseCandidate(s)),o.candidate.candidate=s,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var c=fR.getMediaSections(n._localDescription.sdp);c[o.candidate.sdpMLineIndex]+=u?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",n._localDescription.sdp=fR.getDescription(n._localDescription.sdp)+c.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),u||n._dispatchEvent("icecandidate",o),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout(function(){o.forEach(function(e){i.onlocalcandidate(e)})},0)}},i.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,r,n){var i=pR(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:fR.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&i.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,r,n=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(gR("TypeError",'Unsupported type "'+e.type+'"'));if(!hR("setLocalDescription",e.type,n.signalingState)||n._isClosed)return Promise.reject(gR("InvalidStateError","Can not set local "+e.type+" in state "+n.signalingState));if("offer"===e.type)t=fR.splitSections(e.sdp),r=t.shift(),t.forEach(function(e,t){var r=fR.parseRtpParameters(e);n.transceivers[t].localCapabilities=r}),n.transceivers.forEach(function(e,t){n._gather(e.mid,t)});else if("answer"===e.type){t=fR.splitSections(n._remoteDescription.sdp),r=t.shift();var i=fR.matchPrefix(r,"a=ice-lite").length>0;t.forEach(function(e,t){var o=n.transceivers[t],a=o.iceGatherer,u=o.iceTransport,s=o.dtlsTransport,c=o.localCapabilities,l=o.remoteCapabilities;if(!(fR.isRejected(e)&&0===fR.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var f=fR.getIceParameters(e,r),d=fR.getDtlsParameters(e,r);i&&(d.role="server"),n.usingBundle&&0!==t||(n._gather(o.mid,t),"new"===u.state&&u.start(a,f,i?"controlling":"controlled"),"new"===s.state&&s.start(d));var p=pR(c,l);n._transceive(o,p.codecs.length>0,!1)}})}return n._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?n._updateSignalingState("have-local-offer"):n._updateSignalingState("stable"),Promise.resolve()},i.prototype.setRemoteDescription=function(i){var o=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(gR("TypeError",'Unsupported type "'+i.type+'"'));if(!hR("setRemoteDescription",i.type,o.signalingState)||o._isClosed)return Promise.reject(gR("InvalidStateError","Can not set remote "+i.type+" in state "+o.signalingState));var a={};o.remoteStreams.forEach(function(e){a[e.id]=e});var u=[],s=fR.splitSections(i.sdp),c=s.shift(),l=fR.matchPrefix(c,"a=ice-lite").length>0,f=fR.matchPrefix(c,"a=group:BUNDLE ").length>0;o.usingBundle=f;var d=fR.matchPrefix(c,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!d&&d.substr(14).split(" ").indexOf("trickle")>=0,s.forEach(function(n,s){var d=fR.splitLines(n),p=fR.getKind(n),h=fR.isRejected(n)&&0===fR.matchPrefix(n,"a=bundle-only").length,v=d[0].substr(2).split(" ")[2],g=fR.getDirection(n,c),m=fR.parseMsid(n),y=fR.getMid(n)||fR.generateIdentifier();if("application"===p&&"DTLS/SCTP"===v||h)o.transceivers[s]={mid:y,kind:p,rejected:!0};else{var b,_,w,S,k,E,T,P,O;!h&&o.transceivers[s]&&o.transceivers[s].rejected&&(o.transceivers[s]=o._createTransceiver(p,!0));var C,M,j=fR.parseRtpParameters(n);h||(C=fR.getIceParameters(n,c),(M=fR.getDtlsParameters(n,c)).role="client"),T=fR.parseRtpEncodingParameters(n);var x=fR.parseRtcpParameters(n),R=fR.matchPrefix(n,"a=end-of-candidates",c).length>0,A=fR.matchPrefix(n,"a=candidate:").map(function(e){return fR.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===i.type||"answer"===i.type)&&!h&&f&&s>0&&o.transceivers[s]&&(o._disposeIceAndDtlsTransports(s),o.transceivers[s].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[s].iceTransport=o.transceivers[0].iceTransport,o.transceivers[s].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[s].rtpSender&&o.transceivers[s].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[s].rtpReceiver&&o.transceivers[s].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==i.type||h)"answer"!==i.type||h||(_=(b=o.transceivers[s]).iceGatherer,w=b.iceTransport,S=b.dtlsTransport,k=b.rtpReceiver,E=b.sendEncodingParameters,P=b.localCapabilities,o.transceivers[s].recvEncodingParameters=T,o.transceivers[s].remoteCapabilities=j,o.transceivers[s].rtcpParameters=x,A.length&&"new"===w.state&&(!l&&!R||f&&0!==s?A.forEach(function(e){vR(b.iceTransport,e)}):w.setRemoteCandidates(A)),f&&0!==s||("new"===w.state&&w.start(_,C,"controlling"),"new"===S.state&&S.start(M)),o._transceive(b,"sendrecv"===g||"recvonly"===g,"sendrecv"===g||"sendonly"===g),!k||"sendrecv"!==g&&"sendonly"!==g?delete b.rtpReceiver:(O=k.track,m?(a[m.stream]||(a[m.stream]=new e.MediaStream),r(O,a[m.stream]),u.push([O,k,a[m.stream]])):(a.default||(a.default=new e.MediaStream),r(O,a.default),u.push([O,k,a.default]))));else{(b=o.transceivers[s]||o._createTransceiver(p)).mid=y,b.iceGatherer||(b.iceGatherer=o._createIceGatherer(s,f)),A.length&&"new"===b.iceTransport.state&&(!R||f&&0!==s?A.forEach(function(e){vR(b.iceTransport,e)}):b.iceTransport.setRemoteCandidates(A)),P=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(P.codecs=P.codecs.filter(function(e){return"rtx"!==e.name})),E=b.sendEncodingParameters||[{ssrc:1001*(2*s+2)}];var I,D=!1;if("sendrecv"===g||"sendonly"===g){if(D=!b.rtpReceiver,k=b.rtpReceiver||new e.RTCRtpReceiver(b.dtlsTransport,p),D)O=k.track,m&&"-"===m.stream||(m?(a[m.stream]||(a[m.stream]=new e.MediaStream,Object.defineProperty(a[m.stream],"id",{get:function(){return m.stream}})),Object.defineProperty(O,"id",{get:function(){return m.track}}),I=a[m.stream]):(a.default||(a.default=new e.MediaStream),I=a.default)),I&&(r(O,I),b.associatedRemoteMediaStreams.push(I)),u.push([O,k,I])}else b.rtpReceiver&&b.rtpReceiver.track&&(b.associatedRemoteMediaStreams.forEach(function(t){var r,n,i=t.getTracks().find(function(e){return e.id===b.rtpReceiver.track.id});i&&(r=i,(n=t).removeTrack(r),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:r})))}),b.associatedRemoteMediaStreams=[]);b.localCapabilities=P,b.remoteCapabilities=j,b.rtpReceiver=k,b.rtcpParameters=x,b.sendEncodingParameters=E,b.recvEncodingParameters=T,o._transceive(o.transceivers[s],!1,D)}}}),void 0===o._dtlsRole&&(o._dtlsRole="offer"===i.type?"active":"passive"),o._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(a).forEach(function(t){var r=a[t];if(r.getTracks().length){if(-1===o.remoteStreams.indexOf(r)){o.remoteStreams.push(r);var i=new Event("addstream");i.stream=r,e.setTimeout(function(){o._dispatchEvent("addstream",i)})}u.forEach(function(e){var t=e[0],i=e[1];r.id===e[2].id&&n(o,t,i,[r])})}}),u.forEach(function(e){e[2]||n(o,e[0],e[1],[])}),e.setTimeout(function(){o&&o.transceivers&&o.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},i.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},i.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(gR("InvalidStateError","Can not call createOffer after close"));var n=r.transceivers.filter(function(e){return"audio"===e.kind}).length,i=r.transceivers.filter(function(e){return"video"===e.kind}).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(n=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(i=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(r.transceivers.forEach(function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--i<0&&(e.wantReceive=!1)});n>0||i>0;)n>0&&(r._createTransceiver("audio"),n--),i>0&&(r._createTransceiver("video"),i--);var a=fR.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach(function(n,i){var o=n.track,a=n.kind,u=n.mid||fR.generateIdentifier();n.mid=u,n.iceGatherer||(n.iceGatherer=r._createIceGatherer(i,r.usingBundle));var s=e.RTCRtpSender.getCapabilities(a);t<15019&&(s.codecs=s.codecs.filter(function(e){return"rtx"!==e.name})),s.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),s.headerExtensions.forEach(function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var c=n.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];o&&t>=15019&&"video"===a&&!c[0].rtx&&(c[0].rtx={ssrc:c[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,a)),n.localCapabilities=s,n.sendEncodingParameters=c}),"max-compat"!==r._config.bundlePolicy&&(a+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n",r.transceivers.forEach(function(e,t){a+=dR(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),a+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,a+="a="+fR.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(a+="a=end-of-candidates\r\n"))});var u=new e.RTCSessionDescription({type:"offer",sdp:a});return Promise.resolve(u)},i.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(gR("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(gR("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var n=fR.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(n+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n");var i=fR.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach(function(e,o){if(!(o+1>i)){if(e.rejected)return"application"===e.kind?n+="m=application 0 DTLS/SCTP 5000\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var a;if(e.stream)"audio"===e.kind?a=e.stream.getAudioTracks()[0]:"video"===e.kind&&(a=e.stream.getVideoTracks()[0]),a&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=pR(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=dR(e,u,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}});var o=new e.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(o)},i.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(n,i){if(!r._remoteDescription)return i(gR("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var a=0;a<r.transceivers.length;a++)if(r.transceivers[a].mid===e.sdpMid){o=a;break}var u=r.transceivers[o];if(!u)return i(gR("OperationError","Can not add ICE candidate"));if(u.rejected)return n();var s=Object.keys(e.candidate).length>0?fR.parseCandidate(e.candidate):{};if("tcp"===s.protocol&&(0===s.port||9===s.port))return n();if(s.component&&1!==s.component)return n();if((0===o||o>0&&u.iceTransport!==r.transceivers[0].iceTransport)&&!vR(u.iceTransport,s))return i(gR("OperationError","Can not add ICE candidate"));var c=e.candidate.trim();0===c.indexOf("a=")&&(c=c.substr(2)),(t=fR.getMediaSections(r._remoteDescription.sdp))[o]+="a="+(s.type?c:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=fR.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var l=0;l<r.transceivers.length&&(r.transceivers[l].rejected||(r.transceivers[l].iceTransport.addRemoteCandidate({}),(t=fR.getMediaSections(r._remoteDescription.sdp))[l]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=fR.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));l++);n()})},i.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)}),!r)throw gR("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&n.push(e[t].getStats())})}),Promise.all(n).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(r){var n;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[r]).type]||n.type,t.set(r,e[r])}),t})}}});var o=["createOffer","createAnswer"];return o.forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),i},yR={shimGetUserMedia:function(e){var t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}},shimPeerConnection:function(e){var t=aR.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n=mR(e,t.version);e.RTCPeerConnection=function(e){var t,r,i;return e&&e.iceServers&&(e.iceServers=(t=e.iceServers,i=!1,(t=JSON.parse(JSON.stringify(t))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&aR.deprecated("RTCIceServer.url","RTCIceServer.urls");var n="string"==typeof t;return n&&(t=[t]),t=t.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&r>=14393&&-1===e.indexOf("?transport=udp"):(i=!0,!0)}),delete e.url,e.urls=n?t[0]:t,!!t.length}}))),new n(e)},e.RTCPeerConnection.prototype=n.prototype},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},bR=aR.log,_R={shimGetUserMedia:function(e){var t=aR.detectBrowser(e),r=e&&e.navigator,n=e&&e.MediaStreamTrack,i=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},o=function(e,n,o){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n=e[r]="object"==typeof e[r]?e[r]:{ideal:e[r]};if(void 0===n.min&&void 0===n.max&&void 0===n.exact||t.push(r),void 0!==n.exact&&("number"==typeof n.exact?n.min=n.max=n.exact:e[r]=n.exact,delete n.exact),void 0!==n.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof n.ideal?i[r]={min:n.ideal,max:n.ideal}:i[r]=n.ideal,e.advanced.push(i),delete n.ideal,Object.keys(n).length||delete e[r]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(bR("spec: "+JSON.stringify(e)),e.audio&&(e.audio=a(e.audio)),e.video&&(e.video=a(e.video)),bR("ff37: "+JSON.stringify(e))),r.mozGetUserMedia(e,n,function(e){o(i(e))})};if(r.mediaDevices||(r.mediaDevices={getUserMedia:function(e){return new Promise(function(t,r){o(e,t,r)})},addEventListener:function(){},removeEventListener:function(){}}),r.mediaDevices.enumerateDevices=r.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},t.version<41){var a=r.mediaDevices.enumerateDevices.bind(r.mediaDevices);r.mediaDevices.enumerateDevices=function(){return a().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(t.version<49){var u=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return u(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(i(e))})}}if(!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var s=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},c=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),c(e)},n&&n.prototype.getSettings){var l=n.prototype.getSettings;n.prototype.getSettings=function(){var e=l.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(n&&n.prototype.applyConstraints){var f=n.prototype.applyConstraints;n.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),f.apply(this,[e])}}}r.getUserMedia=function(e,n,i){if(t.version<44)return o(e,n,i);aR.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(n,i)}},shimOnTrack:function(e){"object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var r=new Event("track");r.track=t,r.receiver={track:t},r.transceiver={receiver:r.receiver},r.streams=[e.stream],this.dispatchEvent(r)}.bind(this))}.bind(this))}}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(e){var t=aR.detectBrowser(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(r,n){if(t.version<38&&r&&r.iceServers){for(var i=[],o=0;o<r.iceServers.length;o++){var a=r.iceServers[o];if(a.hasOwnProperty("urls"))for(var u=0;u<a.urls.length;u++){var s={url:a.urls[u]};0===a.urls[u].indexOf("turn")&&(s.username=a.username,s.credential=a.credential),i.push(s)}else i.push(r.iceServers[o])}r.iceServers=i}return new e.mozRTCPeerConnection(r,n)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}});var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,o){return i.apply(this,[e||null]).then(function(e){if(t.version<48&&(e=function(e){var t=new Map;return Object.keys(e).forEach(function(r){t.set(r,e[r]),t[r]=e[r]}),t}(e)),t.version<53&&!r)try{e.forEach(function(e){e.type=n[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(r,o)}}},shimSenderGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(e,[]);return r.forEach(function(t){t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},shimReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(e,[]);return r.forEach(function(t){t._pc=e}),r}),aR.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;aR.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(r){r.track&&-1!==e.getTracks().indexOf(r.track)&&t.removeTrack(r)})})},shimRTCDataChannel:function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}},wR={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach(function(r){r.id===e&&(t=r)}),this._remoteStreams&&this._remoteStreams.forEach(function(r){r.id===e&&(t=r)}),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var r=this;e.getTracks().forEach(function(n){t.call(r,n,e)})},e.RTCPeerConnection.prototype.addTrack=function(e,r){return r&&(this._localStreams?-1===this._localStreams.indexOf(r)&&this._localStreams.push(r):this._localStreams=[r]),t.call(this,e,r)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var r=this,n=e.getTracks();this.getSenders().forEach(function(e){-1!==n.indexOf(e.track)&&r.removeTrack(e)})}})}},shimRemoteStreamsAPI:function(e){"object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),"onaddstream"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!(t._remoteStreams.indexOf(e)>=0)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}})})}}))},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i};var u=function(e,t,r){var n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=u,u=function(e,t,r){var n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=u,u=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=u}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(aR.deprecated("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,n.push(o)):n.push(e.iceServers[i])}e.iceServers=n}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var r=this;if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=r.getTransceivers().find(function(e){return e.sender.track&&"audio"===e.sender.track.kind});!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||r.addTransceiver("audio"),void 0!==e.offerToReceiveAudio&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var i=r.getTransceivers().find(function(e){return e.sender.track&&"video"===e.sender.track.kind});!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection("sendonly"):"recvonly"===i.direction&&i.setDirection("inactive"):!0!==e.offerToReceiveVideo||i||r.addTransceiver("video")}return t.apply(r,arguments)}}},SR={shimRTCIceCandidate:function(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),n=fR.parseCandidate(e.candidate),i=Object.assign(r,n);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,aR.wrapPeerConnectionEvent(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var r=t.createObjectURL.bind(t),n=t.revokeObjectURL.bind(t),i=new Map,o=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++o;return i.set(t,e),aR.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return r(e)},t.revokeObjectURL=function(e){n(e),i.delete(e)};var a=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return a.get.apply(this)},set:function(e){return this.srcObject=i.get(e)||null,a.set.apply(this,[e])}});var u=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=i.get(arguments[1])||null),u.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=aR.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,n,i,o;if(this._sctp=null,i=arguments[0],(o=fR.splitSections(i.sdp)).shift(),o.some(function(e){var t=fR.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})){var a,u=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!=r?-1:r}(arguments[0]),s=(e=u,n=65536,"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n),c=function(e,r){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var i=fR.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?n=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n}(arguments[0],u);a=0===s&&0===c?Number.POSITIVE_INFINITY:0===s||0===c?Math.max(s,c):Math.min(s,c);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return a}}),this._sctp=l}return r.apply(this,arguments)}}},shimSendThrowTypeError:function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return r(e,this),e},aR.wrapPeerConnectionEvent(e,"datachannel",function(e){return r(e.channel,e.target),e})}function r(e,t){var r=e.send;e.send=function(){var n=arguments[0],i=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}}},kR=(function(e,t){var r=e&&e.window,n={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var i in t)hasOwnProperty.call(t,i)&&(n[i]=t[i]);var o=aR.log,a=aR.detectBrowser(r),u=lR||null,s=yR||null,c=_R||null,l=wR||null,f=SR||null,d={browserDetails:a,commonShim:f,extractVersion:aR.extractVersion,disableLog:aR.disableLog,disableWarnings:aR.disableWarnings};switch(a.browser){case"chrome":if(!u||!u.shimPeerConnection||!n.shimChrome)return o("Chrome shim is not included in this adapter release."),d;o("adapter.js shimming chrome."),d.browserShim=u,f.shimCreateObjectURL(r),u.shimGetUserMedia(r),u.shimMediaStream(r),u.shimSourceObject(r),u.shimPeerConnection(r),u.shimOnTrack(r),u.shimAddTrackRemoveTrack(r),u.shimGetSendersWithDtmf(r),u.shimSenderReceiverGetStats(r),f.shimRTCIceCandidate(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;case"firefox":if(!c||!c.shimPeerConnection||!n.shimFirefox)return o("Firefox shim is not included in this adapter release."),d;o("adapter.js shimming firefox."),d.browserShim=c,f.shimCreateObjectURL(r),c.shimGetUserMedia(r),c.shimSourceObject(r),c.shimPeerConnection(r),c.shimOnTrack(r),c.shimRemoveStream(r),c.shimSenderGetStats(r),c.shimReceiverGetStats(r),c.shimRTCDataChannel(r),f.shimRTCIceCandidate(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;case"edge":if(!s||!s.shimPeerConnection||!n.shimEdge)return o("MS edge shim is not included in this adapter release."),d;o("adapter.js shimming edge."),d.browserShim=s,f.shimCreateObjectURL(r),s.shimGetUserMedia(r),s.shimPeerConnection(r),s.shimReplaceTrack(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;case"safari":if(!l||!n.shimSafari)return o("Safari shim is not included in this adapter release."),d;o("adapter.js shimming safari."),d.browserShim=l,f.shimCreateObjectURL(r),l.shimRTCIceServerUrls(r),l.shimCallbacksAPI(r),l.shimLocalStreamsAPI(r),l.shimRemoteStreamsAPI(r),l.shimTrackEventTransceiver(r),l.shimGetUserMedia(r),l.shimCreateOfferLegacy(r),f.shimRTCIceCandidate(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;default:o("Unsupported browser!")}}({window:e.window}),r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ensureH264=void 0;var r=o(rR),n=o(wM),i=o(jP);function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r="screen"===e?{content:"slides",type:"video"}:{type:e},i=(0,n.default)((0,Qx.parse)(t).media,r);return i?i.direction:"inactive"}function u(e){switch(e){case"inactive":case"sendrecv":return e;case"sendonly":return"recvonly";case"recvonly":return"sendonly";default:throw new Error('direction "'+e+'" is not valid')}}t.getMediaDirectionFromSDP=a,t.getMediaFromSDP=function(e,t,n){var i="screen"===e?{content:"slides",type:"video"}:{type:e},o=(0,r.default)((0,Qx.parse)(t).media,i),a={};n&&("sendrecv"===n?(o.forEach(function(e){a[e.direction]=e}),!a.sendrecv||a.recvonly||a.sendonly?!a.sendrecv&&a.recvonly&&a.sendonly&&(o=[a.recvonly,a.sendonly]):o=a.sendrecv):o=o.filter(function(e){return e.direction===n}));return o},t.reverseMediaDirection=u,t.limitBandwith=function(e,t){var r=e.audioBandwidthLimit,n=e.videoBandwidthLimit;return t.split("\r\n").reduce(function(e,t){return e.push(t),t.startsWith("m=")&&e.push("b=TIAS:"+(t.includes("audio")?r:n)),e},[]).join("\r\n")},t.kindToPropertyFragment=function(e){return"audio"===e?"Audio":"Video"},t.getMediaDirectionFromSDPForAnswer=function(e,t){return u(a(e,t))},t.boolToDirection=s,t.getMediaDirectionFromTracks=function(e,t){if("closed"===t.signalingState)return"inactive";var r=t.getSenders().filter(function(t){return t.track&&t.track.kind===e}),n=r.length>0&&r.reduce(function(e,t){return e||t.track.enabled},!1),i=t.getReceivers().filter(function(t){return t.track&&t.track.kind===e}),o=i.length>0&&i.reduce(function(e,t){return e||t.track.enabled},!1);return s(n,o)},t.removeExtmap=function(e){return e.replace(/a=extmap.*\r\n/g,"")};t.ensureH264=(0,i.default)(function(e,t){if(e){if(!t.includes("m=video"))throw new Error("No video section found in offer");if(!/[hH]264/.test(t))throw new Error("Offer does not include h264 codec")}return t});function s(e,t){return e&&t?"sendrecv":e?"sendonly":t?"recvonly":"inactive"}}));t(kR);kR.ensureH264,kR.getMediaDirectionFromSDP,kR.getMediaFromSDP,kR.reverseMediaDirection,kR.limitBandwith,kR.kindToPropertyFragment,kR.getMediaDirectionFromSDPForAnswer,kR.boolToDirection,kR.getMediaDirectionFromTracks,kR.removeExtmap;var ER=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i,o,a,u,s,c,l,f,d,p,h,v,g,m,y=A(Ql),b=A(Sy),_=A(Ls),w=A(YP),S=A(Us),k=A(Yl),E=A(by),T=A(ky),P=A(Wb),O=A(Vy),C=A(Uw),M=A(Hx),j=A(uP),x=A(Jx),R=A(eR);function A(e){return e&&e.__esModule?e:{default:e}}function I(e,t,r,n){r&&(0,b.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}x.default.a.find(function(e){return"content"===e.name})||x.default.a.unshift({name:"content",reg:/^content:(slides)/});var L=new((0,kE.make)(O.default,P.default)),F={audio:"Audio",video:"Video"};function N(e,t){return L.get(e,t)||"inactive"}var U=(r=(0,kE.whileInFlight)("gumming"),n=(0,Gx.debounce)(500),i=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,E.default)(this,e),this.logger=console,I(this,"localMediaStream",o,this),I(this,"remoteMediaStream",a,this),I(this,"localScreenShare",u,this),this.pc=new RTCPeerConnection({iceServers:[],bundlePolicy:"max-compat"}),I(this,"offerSdp",s,this),I(this,"answerSdp",c,this),I(this,"sendingAudio",l,this),I(this,"sendingVideo",f,this),I(this,"receivingAudio",d,this),I(this,"receivingVideo",p,this),I(this,"ended",h,this),this.negotiationNeeded=!1,this.bandwidthLimit={audioBandwidthLimit:6e4,videoBandwidthLimit:1e6},I(this,"constraints",v,this),I(this,"offerOptions",g,this),I(this,"gumming",m,this),n.parent?Wu(function(){n.parent.logger&&(t.logger=n.parent.logger)}):r.logger&&(this.logger=r.logger),this.pc.onnegotiationneeded=function(){t.logger.info("peer connection emitted negotiationneeded"),t.answerSdp&&!t.negotiationNeeded&&(t.negotiationNeeded=!0,t.triggerNegotiationNeeded())},this.pc.ontrack=function(e){t.logger.info("peerConnection ontrack fired, updating remoteMediaStream"),t.trigger("track");var r=t.remoteMediaStream||new MediaStream;e.streams[0].getTracks().forEach(function(e){t.logger.info("adding "+e.kind+" track to remoteMediaStream"),r&&!r.getTracks().includes(e)&&r.addTrack(e),e.onended=function(){t.logger.info("remote "+e.kind+" has ended, removing track from remoteMediaStream"),r.removeTrack(e),e.onended=void 0;try{t["receiving"+F[e.kind]]=(0,kR.getMediaDirectionFromTracks)(e.kind,t.pc).includes("recv")}catch(r){t["receiving"+F[e.kind]]=!1}},t["receiving"+F[e.kind]]=(0,kR.getMediaDirectionFromTracks)(e.kind,t.pc).includes("recv")}),t.remoteMediaStream=r,t.trigger("internalTrackUpdate")}}return(0,T.default)(e,[{key:"audioDirection",get:function(){return(0,kR.getMediaDirectionFromTracks)("audio",this.pc)}},{key:"videoDirection",get:function(){return(0,kR.getMediaDirectionFromTracks)("video",this.pc)}},{key:"screenDirection",get:function(){return this.localScreenShare&&0!==this.localScreenShare.getTracks().length?"sendonly":"inactive"}},{key:"senderTracks",get:function(){return this.pc.getSenders().reduce(function(e,t){return t.track&&e.push(t.track),e},[])}},{key:"receiverTracks",get:function(){return this.pc.getReceivers().reduce(function(e,t){return t.track&&e.push(t.track),e},[])}}],[{key:"getUserMedia",value:function(e){var t=(0,C.default)({},e,{fake:"test"===rs.env.NODE_ENV});return navigator.mediaDevices.getUserMedia(t)}}]),(0,T.default)(e,[{key:"_prepareIceGatherer",value:function(){var e=this,t=!1;if("new"===this.pc.iceGatheringState)this.logger.info('ice gathering is in state "new", definitely need to block for ice gathering'),t=!0;else{var r=(0,Qx.parse)(this.pc.localDescription.sdp);["audio","video","screen"].forEach(function(n){var i=n+"Direction";("inactive"!==e[i]||N(e,n)!==e[i]&&"inactive"!==N(e,n))&&(r.media.find(function(e){return e.type===n})?e.logger.info(n+" candidates already gathered"):(e.logger.info("transitioning "+n+" from inactive, ice needed"),t=!0))})}var n=void 0;return t&&(n=new k.default(function(t){e.logger.info("configuring ice gathering"),e.pc.onicecandidate=function(r){if(!r.candidate)return e.logger.info("ice gathering complete"),e.pc.onicecandidate=void 0,void t();e.logger.info("got ice candidate")}})),n}},{key:"createOffer",value:function(){var e=this;this.logger.info("beginning negotiation");var t=N(this,"video"),r=t.includes("send")||t.includes("recv"),n=this._prepareIceGatherer();return new k.default(function(t){if(e.gumming)return e.logger.info("gum in flight, waiting until it completes"),void t(e._getUserMedia().then((0,kE.tap)(function(){return e.logger.info("gum completed")})));t()}).then((0,kE.tap)(function(){return e.logger.info("starting create offer",e.offerOptions)})).then(function(){return e.offerOptions.offerToReceiveAudio=!!e.offerOptions.offerToReceiveAudio,e.offerOptions.offerToReceiveVideo=!!e.offerOptions.offerToReceiveVideo,e.logger.info("creating REAL offer",e.offerOptions),e.logger.info("createOffer audioDirection: "+e.audioDirection),e.logger.info("createOffer videoDirection: "+e.videoDirection),e.logger.info("createOffer screenDirection: "+e.screenDirection),e.updateLocalMediaToTargetDirection(),e.pc.createOffer(e.offerOptions)}).then((0,kE.tap)(function(t){t.sdp=(0,kR.limitBandwith)(e.bandwidthLimit,t.sdp),t.sdp=(0,kR.removeExtmap)(t.sdp)})).then((0,kE.tap)(function(){return e.logger.info("setting local description")})).then(function(t){return e.pc.setLocalDescription(t)}).then((0,kE.tap)(function(){return n&&e.logger.info("blocking for ice gathering")})).then(function(){return n}).then((0,kE.tap)(function(){return e.logger.info("limiting bandwith")})).then(function(){return(0,kR.limitBandwith)(e.bandwidthLimit,e.pc.localDescription.sdp)}).then((0,kE.tap)(function(){return r&&e.logger.info("confirm h264 in offer")})).then((0,kR.ensureH264)(r)).then(function(t){if(e.localScreenShare){var r=e.localScreenShare.id,n=e.localScreenShare.getVideoTracks()[0];if(n){var i=r+" "+n.id,o=t.split(i);if(o[1])return o[1]="\r\na=content:slides"+o[1],t=o.join(i)}t+="a=content:slides\r\n"}return t}).then((0,kE.tap)(function(t){e.offerSdp=t}))}},{key:"acceptAnswer",value:function(e){var t=this;this.logger.info("accepting answer"),this.logger.debug("new answer sdp:",e);var r=e.replace(/max-mbps=27600;max-fs=920/g,"max-mbps=27600;max-fs=8160");return r=r.replace(/m=video 0(.*?\r\n)/,"m=video 0$1a=inactive\r\n"),r=(0,kR.removeExtmap)(r),this.logger.debug("cleaned answer sdp:",r),"have-local-offer"===this.pc.signalingState?this.pc.setRemoteDescription(new RTCSessionDescription({sdp:r,type:"answer"})).then(function(){t.logger.info("answer accepted"),t.answerSdp=r,t.sendingAudio=(0,kR.getMediaDirectionFromTracks)("audio",t.pc).includes("send"),t.sendingVideo=(0,kR.getMediaDirectionFromTracks)("video",t.pc).includes("send"),t.updateLocalMediaToTargetDirection(),t.trigger("answeraccepted"),t.negotiationNeeded=!1}):k.default.resolve()}},{key:"_setNewMediaDirection",value:function(e,t){var r=this;this.logger.info("setting "+e+" direction to "+t);var n=t.includes("send");if(this.constraints[e]=n,!n)return this.logger.info("muting "+e+" local tracks"),this.localMediaStream?this.localMediaStream.getTracks().filter(function(t){return t.kind===e}).forEach(function(t){r.logger.info("muting existing "+e+" track from localMediaStream");var i=r.pc.getSenders().find(function(e){return e.track===t});R.default.firefox||r.localMediaStream.removeTrack(t),i&&(r.logger.info("muting existing "+e+" track on sender"),i.track.enabled=!1,t.enabled=!1,R.default.firefox||r.pc.removeTrack(i)),r.logger.info("setting sending"+F[e]+" to "+n),r["sending"+F[e]]=n}):k.default.resolve();var i=this.pc.getSenders().filter(function(t){return t.track&&t.track.kind===e});if(i.length>0){this.logger.info("enabling existing "+e+" sender track");var o=this.localMediaStream.getTracks().filter(function(t){return t.kind===e});return i.forEach(function(e){e.track.enabled=o.includes(e.track)}),this["sending"+F[e]]=n,k.default.resolve()}return this[e+"Direction"].includes("send")?k.default.resolve():this._setNewMediaConstraint(e,n)}},{key:"_setNewMediaTrack",value:function(e,t){return this.logger.info("setting new "+e+" track"),this.constraints[e]=!1,this.addOrReplaceTrack(t)}},{key:"_setNewMediaConstraint",value:function(e,t){return this.logger.info("setting "+e+" with new constraint"),this.constraints[e]=t,this._getUserMedia()}},{key:"_setScreenShare",value:function(e,t){var r=this;if(this.logger.info("calling _setScreenShare"),L.set(this,"screen",e),e.includes("send")){var n=(0,C.default)({},t,{mediaSource:"application",width:{min:"160",max:"1920"},height:{min:"90",max:"1080"},frameRate:{min:"1",max:"30"}});this._setNewMediaConstraint("screen",n)}else this.logger.info("removing existing screenshare tracks from peer connection and localScreenShare stream"),this.pc.getSenders().filter(function(e){return e.track&&r.localScreenShare.getTracks().includes(e.track)}).forEach(function(e){r.logger.info("removing screenshare track "+e.track.id+" from peer connection and localScreenShare stream");var t=e.track;e.track.enabled=!1,r.localScreenShare.removeTrack(t),r.pc.removeTrack(e),t.stop(),r.logger.info("removed screenshare track "+t.id+" from peer connection and localScreenShare stream")}),this.localScreenShare=!1}},{key:"setMedia",value:function(e,t,r){var n=this;return this.logger.info("setMedia"),"screen"===e?(this.logger.info("setMedia: setting new screen direction"),this._setScreenShare(t,r),k.default.resolve()):new k.default(function(i){if(r){if(!t.includes("send"))throw new Error("Cannot set new "+e+" track or constraint if direction does not include send");if(r instanceof MediaStreamTrack){if(r.kind!==e)throw new Error("track is not a valid "+e+" media stream track");i(n._setNewMediaTrack(e,r))}else i(n._setNewMediaConstraint(e,r))}else t===N(n,e)&&(n.logger.info("setMedia: "+e+" already transitioning to "+t+", not making changes"),i()),t===n[e+"Direction"]&&(n.logger.info("setMedia: "+e+" already set to "+t+", not making changes"),i()),i(n._setNewMediaDirection(e,t))}).then(function(){var r=t.includes("recv");n.logger.info("setMedia: set targetMediaDirection for "+e+" to "+t),L.set(n,e,t),n.logger.info("setMedia: set offerToReceive"+(0,kR.kindToPropertyFragment)(e)+" to "+r),n.offerOptions["offerToReceive"+(0,kR.kindToPropertyFragment)(e)]=r;var i=n.pc.getReceivers().filter(function(t){return t.track&&t.track.kind===e});r?i.length>0?(n.logger.info("setMedia: unpause existing receiving "+e+" track"),n.unpauseReceivingMedia(e)):!i.length&&n.answerSdp&&(n.logger.info("setMedia: no receiving "+e+" track exists, trigger negotiation"),n.triggerNegotiationNeeded()):i.length>0&&(n.logger.info("setMedia: pausing existing receiving "+e+" track"),n.pauseReceivingMedia(e))})}},{key:"_getUserMedia",value:function(){var t=this;return this.logger.info("enqueing request to get user media"),new k.default(function(e){return Wu(e)}).then(function(){!0===t.constraints.audio&&t.pc.getSenders().find(function(e){return e.track&&"audio"===e.track.kind})&&(t.logger.info("already have a local audio track, removing constraint for a second one"),(0,S.default)(t.constraints,"audio")),!0===t.constraints.video&&t.pc.getSenders().find(function(e){return e.track&&"video"===e.track.kind})&&(t.logger.info("already have a local video track, removing constraint for a second one"),(0,S.default)(t.constraints,"video"));var r=t.constraints,n=r.audio,i=r.video,o=r.screen;return t.logger.info("getting user media with "+(n?"1":"0")+" audio track, "+(i?"1":"0")+" video track, and "+(o?"1":"0")+" screenshare track."),k.default.all([(n||i)&&e.getUserMedia({audio:n,video:i}),o&&e.getUserMedia({video:o})])}).then(function(e){var r=(0,w.default)(e,2),n=r[0],i=r[1],o=[];if(n&&(t.logger.info("got local media stream with "+n.getAudioTracks().length+" audio tracks and "+n.getVideoTracks().length+" video tracks"),n.getTracks().forEach(function(e){return o.push(t.addOrReplaceTrack(e))})),i){if(t.localScreenShare){var a=t.pc.getSenders().find(function(e){return t.localScreenShare.getTracks().includes(e.track)});a&&(t.logger.info("removing existing screenshare track from localScreenShare stream"),t.localScreenShare.removeTrack(a.track),t.logger.info("disabling existing screenshare track on sender"),a.track.enabled=!1),i.getTracks().forEach(function(e){a?(t.logger.info("replacing existing screenshare track on sender"),o.push(a.replaceTrack(e))):(t.logger.info("adding new screen track to peerConnection"),t.pc.addTrack(e,i))})}else t.logger.info("adding localScreenShare for the first time"),t.logger.info("adding new screenshare track to peer connection"),i.getVideoTracks().forEach(function(e){return t.pc.addTrack(e,i)});t.localScreenShare=i}return t.constraints={},k.default.all(o)}).catch(function(e){return t.trigger("error",e),k.default.reject(e)})}},{key:"addOrReplaceTrack",value:function(e){var t=this,r=[];this.localMediaStream||(this.localMediaStream=new MediaStream);var n=this.pc.getSenders().find(function(t){return t.track&&t.track.kind===e.kind}),i=this.localMediaStream.getTracks().find(function(t){return t.kind===e.kind});return i!==e&&(i&&(this.logger.info("removing previous "+i.kind+" track from localMediaStream"),this.localMediaStream.removeTrack(i)),this.logger.info("adding new "+e.kind+" track to localMediaStream"),this.localMediaStream.addTrack(e)),n?n.track===e?(this.logger.info("new track is the same as existing track, renabling "+e.kind+" track on sender"),n.track.enabled=!0):(this.logger.info("replacing new "+e.kind+" on existing sender"),r.push(n.replaceTrack(e).then(function(){t.logger.info("successfully replace "+e.kind+" on existing sender")}).catch(function(r){t.logger.warn(r),t.logger.warn("was not able to replace "+e.kind+" track on sender"),t.logger.info("adding as new "+e.kind+" track to peerConnection"),t.pc.removeTrack(n),t.pc.addTrack(e,t.localMediaStream)}))):(this.logger.info("adding new "+e.kind+" track to peerConnection"),this.pc.addTrack(e,this.localMediaStream)),this.logger.info("setting sending"+F[e.kind]+" to true"),this["sending"+F[e.kind]]=!0,k.default.all(r)}},{key:"pauseSendingMedia",value:function(e){var t=this;if(!e)throw new Error("kind is required");var r=this.pc.getSenders().filter(function(t){return t.track&&t.track.kind===e});if(0===r.length)throw new Error("No "+e+" media senders to pause");r.forEach(function(r){t.logger.info("pausing "+e+" sender"),r.track.enabled=!1}),this.logger.info("setting sending"+F[e]+" to false"),this["sending"+F[e]]=!1}},{key:"updateLocalMediaToTargetDirection",value:function(){var e=this;["audio","video"].forEach(function(t){var r=N(e,t),n=e[t+"Direction"];if(n!==r){var i=r.includes("send");n.includes("send")!==i&&e.pc.getSenders().forEach(function(e){e.track&&e.track.kind===t&&(e.track.enabled=i)});var o=r.includes("recv");n.includes("send")!==o&&e.pc.getReceivers().forEach(function(e){e.track&&e.track.kind===t&&(e.track.enabled=o)})}})}},{key:"unpauseSendingMedia",value:function(e){var t=this;if(!e)throw new Error("kind is required");var r=this.pc.getSenders().filter(function(t){return t.track&&t.track.kind===e});if(0===r.length)throw new Error("No "+e+" media senders to unpause");r.forEach(function(r){t.logger.info("unpausing "+e+" sender"),r.track.enabled=!0}),this.logger.info("setting sending"+F[e]+" to true"),this["sending"+F[e]]=!0}},{key:"pauseReceivingMedia",value:function(e){var t=this;if(!e)throw new Error("kind is required");var r=this.pc.getReceivers().filter(function(t){return t.track&&t.track.kind===e});if(0===r.length)throw new Error("No "+e+" receiver media tracks to pause");r.forEach(function(r){t.logger.info("pausing remote "+e+" track"),r.track.enabled=!1}),this.logger.info("setting receiving"+F[e]+" to false"),this["receiving"+F[e]]=!1}},{key:"unpauseReceivingMedia",value:function(e){var t=this;if(!e)throw new Error("kind is required");var r=this.pc.getReceivers().filter(function(t){return t.track&&t.track.kind===e});if(0===r.length)throw new Error("No "+e+" receiver media tracks to pause");r.forEach(function(r){t.logger.info("unpausing "+e+" receiver track"),r.track.enabled=!0}),this.logger.info("setting receiving"+F[e]+" to true from "+this["receiving"+F[e]]),this["receiving"+F[e]]=!0}},{key:"stop",value:function(){"closed"!==this.pc.signalingState&&(this.pc.getSenders().forEach(function(e){return e.track&&e.track.stop()}),this.pc.close()),this.pc.onnegotiationneeded=void 0,this.pc.ontrack=void 0,this.pc.onicecandidate=void 0,this.ended=!0,this.off()}},{key:"triggerNegotiationNeeded",value:function(){this.trigger("negotiationneeded")}},{key:"serialize",value:function(){return"WebRTCMediaEngine"}}]),e}(),o=D(i.prototype,"localMediaStream",[M.default],{enumerable:!0,initializer:null}),a=D(i.prototype,"remoteMediaStream",[M.default],{enumerable:!0,initializer:null}),u=D(i.prototype,"localScreenShare",[M.default],{enumerable:!0,initializer:null}),s=D(i.prototype,"offerSdp",[M.default],{enumerable:!0,initializer:function(){return""}}),c=D(i.prototype,"answerSdp",[M.default],{enumerable:!0,initializer:function(){return""}}),l=D(i.prototype,"sendingAudio",[M.default],{enumerable:!0,initializer:function(){return!1}}),f=D(i.prototype,"sendingVideo",[M.default],{enumerable:!0,initializer:function(){return!1}}),d=D(i.prototype,"receivingAudio",[M.default],{enumerable:!0,initializer:function(){return!1}}),p=D(i.prototype,"receivingVideo",[M.default],{enumerable:!0,initializer:function(){return!1}}),h=D(i.prototype,"ended",[M.default],{enumerable:!0,initializer:function(){return!1}}),v=D(i.prototype,"constraints",[bE.nonenumerable],{enumerable:!0,initializer:function(){return{}}}),g=D(i.prototype,"offerOptions",[bE.nonenumerable],{enumerable:!0,initializer:function(){return{}}}),m=D(i.prototype,"gumming",[bE.nonenumerable,M.default],{enumerable:!0,initializer:function(){return!1}}),D(i.prototype,"_getUserMedia",[r,kE.oneFlight],(0,_.default)(i.prototype,"_getUserMedia"),i.prototype),D(i.prototype,"triggerNegotiationNeeded",[n],(0,_.default)(i.prototype,"triggerNegotiationNeeded"),i.prototype),i);t.default=U,(0,y.default)(U.prototype,j.default)});t(ER);var TR=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.webrtcHelpers=t.WebRTCMediaEngine=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(ER).default}}),Object.defineProperty(t,"WebRTCMediaEngine",{enumerable:!0,get:function(){return n(ER).default}});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(kR);function n(e){return e&&e.__esModule?e:{default:e}}t.webrtcHelpers=r});t(TR);TR.webrtcHelpers,TR.WebRTCMediaEngine;var PR=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=t.locusEventKeys=["locus.summary","locus.self_changed","locus.participant_joined","locus.participant_left","locus.participant_declined","locus.participant_alerted","locus.participant_updated","locus.participant_roles_updated","locus.participant_audio_muted","locus.participant_audio_unmuted","locus.participant_video_muted","locus.participant_video_unmuted","locus.floor_granted","locus.floor_released","locus.space_users_modified","locus.controls_updated","locus.participant_controls_updated"];t.default=r});t(PR);PR.locusEventKeys;var OR=function(e){return e&&e.length?e[0]:void 0},CR=Gb(function(e,t){return JT(e)?KM(e,Tv(t,1,JT,!0)):[]}),MR=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DESYNC=t.LESS_THAN=t.GREATER_THAN=t.FETCH=t.EQUAL=t.USE_CURRENT=t.USE_INCOMING=void 0;var r=v(vO),n=v(Wb),i=v(SP),o=v(TE),a=v(Yl),u=v(uf),s=v(JP),c=v(Xh),l=v(sv),f=v(OR),d=v(CR),p=v(Hv),h=v(RC);function v(e){return e&&e.__esModule?e:{default:e}}var g=t.USE_INCOMING="USE_INCOMING",m=t.USE_CURRENT="USE_CURRENT",y=t.EQUAL="EQUAL",b=t.FETCH="FETCH",_=t.GREATER_THAN="GREATER_THAN",w=t.LESS_THAN="LESS_THAN",S=t.DESYNC="DESYNC";function k(e){switch(e){case y:case _:return m;case w:return g;case S:return b;default:throw new Error(e+" is not a recognized sequence comparison result")}}var E=QC.SparkPlugin.extend({namespace:"Locus",alert:function(e){return this.request({method:"PUT",uri:e.url+"/participant/alert",body:{deviceUrl:this.spark.internal.device.url,sequence:e.sequence}}).then(function(e){return e.body})},compare:function(e,t){function r(e){var t=e.sequence;return!(t.entries&&t.entries.length||0!==t.rangeStart||0!==t.rangeEnd)}return r(e)||r(t)?g:t.baseSequence?this.compareDelta(e,t):k(this.compareSequence(e.sequence,t.sequence))},compareDelta:function(e,t){var r=this.compareSequence(e.sequence,t.sequence);if(r!==w)return k(r);switch(r=this.compareSequence(e.sequence,t.baseSequence)){case _:case y:return g;default:return b}},compareSequence:function(e,t){if(!e)throw new Error("`current` is required");if(!t)throw new Error("`incoming` is required");var r=(0,c.default)(function(e){return 0===e.entries.length?0:(0,f.default)(e.entries)}),n=(0,c.default)(function(e){return 0===e.entries.length?0:(0,l.default)(e.entries)}),i=(0,c.default)(function(e){return e.rangeStart||r(e)}),o=(0,c.default)(function(e){return n(e)||e.rangeEnd});function a(e,t){return e>=t.rangeStart&&e<=t.rangeEnd}if(i(e)>o(t))return _;if(o(e)<i(t))return w;var u=(0,d.default)(e.entries,t.entries),p=(0,d.default)(t.entries,e.entries),h=[],v=[],g=!0,m=!1,b=void 0;try{for(var k,E=(0,s.default)(u);!(g=(k=E.next()).done);g=!0){var T=k.value;a(T,t)||h.push(T)}}catch(e){m=!0,b=e}finally{try{!g&&E.return&&E.return()}finally{if(m)throw b}}var P=!0,O=!1,C=void 0;try{for(var M,j=(0,s.default)(p);!(P=(M=j.next()).done);P=!0){var x=M.value;a(x,e)||v.push(x)}}catch(e){O=!0,C=e}finally{try{!P&&j.return&&j.return()}finally{if(O)throw C}}if(!h.length&&!v.length)return e.rangeEnd-i(e)>t.rangeEnd-i(t)?_:e.rangeEnd-i(e)<t.rangeEnd-i(t)?w:y;if(h.length&&!v.length)return _;if(!h.length&&v.length)return w;if(!(e.rangeStart||e.rangeEnd||t.rangeStart||t.rangeEnd))return S;var R=!0,A=!1,I=void 0;try{for(var D,L=(0,s.default)(h);!(R=(D=L.next()).done);R=!0){var F=D.value;if(i(t)<F&&F<o(t))return S}}catch(e){A=!0,I=e}finally{try{!R&&L.return&&L.return()}finally{if(A)throw I}}var N=!0,U=!1,z=void 0;try{for(var q,B=(0,s.default)(v);!(N=(q=B.next()).done);N=!0){var W=q.value;if(i(e)<W&&W<o(e))return S}}catch(e){U=!0,z=e}finally{try{!N&&B.return&&B.return()}finally{if(U)throw z}}return h[0]>v[0]?_:w},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.correlationId;if(!r)throw new Error("options.correlationId is required");return this.request({method:"POST",service:"locus",resource:"loci/call",body:{correlationId:r,deviceUrl:this.spark.internal.device.url,invitee:{invitee:e},localMedias:[{localSdp:(0,u.default)({type:"SDP",sdp:t.localSdp})}],sequence:{entries:[],rangeStart:0,rangeEnd:0}}}).then(function(e){return e.body.locus})},createOrJoin:function(e,t){return e.url?this.join(e,t):this.create(e,t)},decline:function(e){var t=this;return this.request({method:"PUT",uri:e.url+"/participant/decline",body:{deviceUrl:this.spark.internal.device.url,sequence:e.sequence}}).then(function(e){return e.body}).catch(function(r){return r instanceof QC.SparkHttpError.Conflict?t.get(e):a.default.reject(r)})},get:function(e){return this.request({method:"GET",uri:""+e.url}).then(function(e){return e.body})},getCallHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Date(e.from||Date.now()).toISOString();return this.request({method:"GET",service:"janus",resource:"history/userSessions",qs:{from:t}}).then(function(e){return e.body})},join:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.correlationId||t.correlationId;if(!r)throw new Error("locus.correlationId or options.correlationId is required");return this.request({method:"POST",uri:e.url+"/participant",body:{correlationId:r,deviceUrl:this.spark.internal.device.url,localMedias:[{localSdp:(0,u.default)({type:"SDP",sdp:t.localSdp})}],sequence:e.sequence||{entries:[],rangeStart:0,rangeEnd:0}}}).then(function(e){return e.body.locus})},leave:function(e){var t=this;return this.request({method:"PUT",uri:e.self.url+"/leave",body:{deviceUrl:this.spark.internal.device.url,sequence:e.sequence}}).then(function(e){return e.body.locus}).catch(function(r){return r instanceof QC.SparkHttpError.Conflict?t.get(e):a.default.reject(r)})},list:function(){return this.request({method:"GET",service:"locus",resource:"loci"}).then(function(e){return e.body.loci})},merge:function(e,t){if(!t.baseSequence)return t;var a=(0,p.default)(e);if((0,o.default)(t).forEach(function(e){"baseSequence"!==e&&"participants"!==e&&(a[e]=t[e]||a[e])}),t.participants||t.participants.length){var u=new i.default,s=new n.default;t.participants.forEach(function(e){e.removed?u.add(e.url):s.set(e.url,e)});var c=a.participants.reduce(function(e,t){return u.has(t.url)||(e[t.url]=t),e},{});s.forEach(function(e,t){c[t]=e}),a.participants=(0,r.default)(c)}return a},releaseFloorGrant:function(e,t){return this.spark.request({uri:t.url,method:"PUT",body:{floor:{disposition:"RELEASED"}}}).then(function(e){return e.body})},requestFloorGrant:function(e,t){return this.spark.request({uri:t.url,method:"PUT",body:{floor:{beneficiary:{url:e.self.url,devices:[{url:this.spark.internal.device.url}]},disposition:"GRANTED"}}}).then(function(e){return e.body})},sendDtmf:function(e,t){return this.request({method:"POST",uri:e.self.url+"/sendDtmf",body:{deviceUrl:this.spark.internal.device.url,dtmf:{correlationId:h.default.v4(),tones:t}}})},sync:function(e){return this.request({method:"GET",uri:e.syncUrl}).then(function(e){return e.body||{}})},updateMedia:function(e,t){var r=t.sdp,n=t.audioMuted,i=t.videoMuted,o=t.mediaId,a={audioMuted:n,videoMuted:i};return r&&(a.type="SDP",a.sdp=r),this.request({method:"PUT",uri:e.self.url+"/media",body:{deviceUrl:this.spark.internal.device.url,localMedias:[{localSdp:(0,u.default)(a),mediaId:o}],sequence:e.sequence}}).then(function(e){return e.body.locus})},version:"1.47.3"});t.default=E});t(MR);MR.DESYNC,MR.LESS_THAN,MR.GREATER_THAN,MR.FETCH,MR.EQUAL,MR.USE_CURRENT,MR.USE_INCOMING;var jR=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var xR=function(e){return jR.test(e)};var RR=function(e){return e.split("")},AR="[\\ud800-\\udfff]",IR="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",DR="\\ud83c[\\udffb-\\udfff]",LR="[^\\ud800-\\udfff]",FR="(?:\\ud83c[\\udde6-\\uddff]){2}",NR="[\\ud800-\\udbff][\\udc00-\\udfff]",UR="(?:"+IR+"|"+DR+")"+"?",zR="[\\ufe0e\\ufe0f]?"+UR+("(?:\\u200d(?:"+[LR,FR,NR].join("|")+")[\\ufe0e\\ufe0f]?"+UR+")*"),qR="(?:"+[LR+IR+"?",IR,FR,NR,AR].join("|")+")",BR=RegExp(DR+"(?="+DR+")|"+qR+zR,"g");var WR=function(e){return e.match(BR)||[]};var VR=function(e){return xR(e)?WR(e):RR(e)};var GR=function(e){return function(t){t=av(t);var r=xR(t)?VR(t):void 0,n=r?r[0]:t.charAt(0),i=r?Rx(r,1).join(""):t.slice(1);return n[e]()+i}}("toUpperCase");var HR=function(e){return GR(av(e).toLowerCase())};var JR=function(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r},YR=IE({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),$R=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,KR=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var XR=function(e){return(e=av(e))&&e.replace($R,YR).replace(KR,"")},ZR=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var QR=function(e){return e.match(ZR)||[]},eA=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var tA=function(e){return eA.test(e)},rA="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",nA="["+rA+"]",iA="\\d+",oA="[\\u2700-\\u27bf]",aA="[a-z\\xdf-\\xf6\\xf8-\\xff]",uA="[^\\ud800-\\udfff"+rA+iA+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",sA="(?:\\ud83c[\\udde6-\\uddff]){2}",cA="[\\ud800-\\udbff][\\udc00-\\udfff]",lA="[A-Z\\xc0-\\xd6\\xd8-\\xde]",fA="(?:"+aA+"|"+uA+")",dA="(?:"+lA+"|"+uA+")",pA="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",hA="[\\ufe0e\\ufe0f]?"+pA+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",sA,cA].join("|")+")[\\ufe0e\\ufe0f]?"+pA+")*"),vA="(?:"+[oA,sA,cA].join("|")+")"+hA,gA=RegExp([lA+"?"+aA+"+(?:['â](?:d|ll|m|re|s|t|ve))?(?="+[nA,lA,"$"].join("|")+")",dA+"+(?:['â](?:D|LL|M|RE|S|T|VE))?(?="+[nA,lA+fA,"$"].join("|")+")",lA+"?"+fA+"+(?:['â](?:d|ll|m|re|s|t|ve))?",lA+"+(?:['â](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",iA,vA].join("|"),"g");var mA=function(e){return e.match(gA)||[]};var yA=function(e,t,r){return e=av(e),void 0===(t=r?void 0:t)?tA(e)?mA(e):QR(e):e.match(t)||[]},bA=RegExp("['â]","g");var _A=function(e){return function(t){return JR(yA(XR(t).replace(bA,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?HR(t):t)}),wA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Forbidden=t.NotAuthorized=t.BadRequest=t.UnknownResponse=t.ConnectionError=void 0;var r,n,i,o,a,u,s,c,l,f,d=y(zP),p=y(RS),h=y(by),v=y(ky),g=y(AS),m=y(IS);function y(e){return e&&e.__esModule?e:{default:e}}var b=t.ConnectionError=(n=r=function(e){function t(){return(0,h.default)(this,t),(0,g.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,v.default)(t,[{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.default)(this,{code:{value:e.code},reason:{value:e.reason}}),e.reason}}]),t}(kE.Exception),r.defaultMessage="Failed to connect to socket",n);t.UnknownResponse=(o=i=function(e){function t(){return(0,h.default)(this,t),(0,g.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),t}(b),i.defaultMessage="UnknownResponse is produced by IE when we receive a 4XXX. You probably want to treat this like a NotFound",o),t.BadRequest=(u=a=function(e){function t(){return(0,h.default)(this,t),(0,g.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),t}(b),a.defaultMessage="BadRequest usually implies an attempt to use service account credentials",u),t.NotAuthorized=(c=s=function(e){function t(){return(0,h.default)(this,t),(0,g.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),t}(b),s.defaultMessage="Please refresh your access token",c),t.Forbidden=(f=l=function(e){function t(){return(0,h.default)(this,t),(0,g.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),t}(b),l.defaultMessage="Forbidden usually implies these credentials are not entitled for Spark",f)});t(wA);wA.Forbidden,wA.NotAuthorized,wA.BadRequest,wA.UnknownResponse,wA.ConnectionError;var SA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=g(uf),n=g(rO),i=g(TE),o=g(Yl),a=g(RS),u=g(by),s=g(ky),c=g(AS),l=g(IS),f=g(Vy),d=g(Nf),p=g(qT),h=g(Uw),v=g(RC);function g(e){return e&&e.__esModule?e:{default:e}}var m=new f.default,y=function(e){function t(){(0,u.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return e.onmessage=e.onmessage.bind(e),e.onclose=e.onclose.bind(e),e}return(0,l.default)(t,e),(0,s.default)(t,[{key:"close",value:function(e){var t=this;return new o.default(function(r,n){t.logger.info("socket: closing");var i=m.get(t);if(2===i.readyState||3===i.readyState)return t.logger.info("socket: already closed"),void r();if((e=e||{}).code&&1e3!==e.code&&(e.code<3e3||e.code>4999))n(new Error("`options.code` must be 1000 or between 3000 and 4999 (inclusive)"));else{e=(0,h.default)(e,{code:1e3,reason:"Done"});var o=(0,CE.safeSetTimeout)(function(){try{t.logger.info("socket: no close event received, forcing closure"),r(t.onclose({code:1e3,reason:"Done (forced)"}))}catch(e){t.logger.warn("socket: force-close failed",e)}},t.forceCloseDelay);i.onclose=function(e){t.logger.info("socket: close event fired",e.code,e.reason),clearTimeout(o),t.onclose(e),r(e)},i.close(e.code,e.reason)}})}},{key:"open",value:function(e,r){var a=this;return new o.default(function(o,u){if(e)if(m.get(a))u(new Error("Socket#open() can only be called once per instance"));else{r=r||{},(0,kE.checkRequired)(["forceCloseDelay","pingInterval","pongTimeout","token","trackingId","logger"],r),(0,i.default)(r).forEach(function(e){(0,n.default)(a,e,{enumerable:!1,value:r[e]})});var s=t.getWebSocketConstructor();a.logger.info("socket: creating WebSocket");var c=new s(e);c.binaryType="arraybuffer",c.onmessage=a.onmessage,c.onclose=function(e){switch((e=a._fixCloseCode(e)).code){case 1005:return u(new wA.UnknownResponse(e));case 4400:return u(new wA.BadRequest(e));case 4401:return u(new wA.NotAuthorized(e));case 4403:return u(new wA.Forbidden(e));default:return u(new wA.ConnectionError(e))}},c.onopen=function(){a.logger.info("socket: connected"),a._authorize().then(function(){a.logger.info("socket: authorized"),c.onclose=a.onclose,o()}).catch(u)},c.onerror=function(e){a.logger.warn("socket: error event fired",e)},m.set(a,c),a.logger.info("socket: waiting for server")}else u(new Error("`url` is required"))})}},{key:"onclose",value:function(e){this.logger.info("socket: closed",e.code,e.reason),clearTimeout(this.pongTimer),clearTimeout(this.pingTimer),e=this._fixCloseCode(e),this.emit("close",e),this.removeAllListeners()}},{key:"onmessage",value:function(e){try{var t=JSON.parse(e.data),r=parseInt(t.sequenceNumber,10);this.logger.debug("socket: sequence number: ",r),this.expectedSequenceNumber&&r!==this.expectedSequenceNumber&&(this.logger.debug("socket: sequence number mismatch indicates lost mercury message. expected: "+this.expectedSequenceNumber+", actual: "+r),this.emit("sequence-mismatch",r,this.expectedSequenceNumber)),this.expectedSequenceNumber=r+1;var n={data:t};this._acknowledge(n),"pong"===t.type?this.emit("pong",n):this.emit("message",n)}catch(e){this.logger.warn("socket: error while receiving WebSocket message",e)}}},{key:"send",value:function(e){var t=this;return new o.default(function(n,i){return 1!==t.readyState?i(new Error("INVALID_STATE_ERROR")):((0,d.default)(e)&&(e=(0,r.default)(e)),m.get(t).send(e),n())})}},{key:"_acknowledge",value:function(e){return e?(0,p.default)(e,"data.id")?this.send({messageId:e.data.id,type:"ack"}):o.default.reject(new Error("`event.data.id` is required")):o.default.reject(new Error("`event` is required"))}},{key:"_authorize",value:function(){var e=this;return new o.default(function(t){e.logger.info("socket: authorizing"),e.send({id:v.default.v4(),type:"authorization",data:{token:e.token},trackingId:e.trackingId,logLevelToken:e.logLevelToken});e.once("message",function r(n){n.data.type||"mercury.buffer_state"!==n.data.data.eventType&&"mercury.registration_status"!==n.data.data.eventType||(e.removeListener("message",r),e._ping(),t())})})}},{key:"_fixCloseCode",value:function(e){if(1005===e.code&&e.reason)switch(e.reason.toLowerCase()){case"replaced":this.logger.info("socket: fixing CloseEvent code for reason: ",e.reason),e.code=4e3;break;case"authentication failed":case"authentication did not happen within the timeout window of 30000 seconds.":this.logger.info("socket: fixing CloseEvent code for reason: ",e.reason),e.code=1008}return e}},{key:"_ping",value:function(e){var t=this;return e=e||v.default.v4(),this.pongTimer=(0,CE.safeSetTimeout)(function(){try{t.logger.info("socket: pong not receive in expected period, closing socket"),t.close({code:1e3,reason:"Pong not received"}).catch(function(e){t.logger.warn("socket: failed to close socket after missed pong",e)})}catch(e){t.logger.error("socket: error occurred in onPongNotReceived",e)}},this.pongTimeout),this.once("pong",function(){try{clearTimeout(t.pongTimer),t.pingTimer=(0,CE.safeSetTimeout)(function(){return t._ping()},t.pingInterval)}catch(e){t.logger.error("socket: error occurred in scheduleNextPingAndCancelPongTimer",e)}}),this.once("pong",function(r){try{t.logger.debug("socket: pong",r.data.id),r.data&&r.data.id!==e&&(t.logger.info("socket: received pong for wrong ping id, closing socket"),t.logger.debug("socket: expected",e,"received",r.data.id),t.close({code:1e3,reason:"Pong mismatch"}))}catch(e){t.logger.error("socket: error occurred in confirmPongId",e)}}),this.logger.debug("socket: ping "+e),this.send({id:e,type:"ping"})}},{key:"binaryType",get:function(){return m.get(this).binaryType}},{key:"bufferedAmount",get:function(){return m.get(this).bufferedAmount}},{key:"extensions",get:function(){return m.get(this).extensions}},{key:"protocol",get:function(){return m.get(this).protocol}},{key:"readyState",get:function(){return m.get(this).readyState}},{key:"url",get:function(){return m.get(this).url}}],[{key:"getWebSocketConstructor",value:function(){throw new Error("Socket.getWebSocketConstructor() must be implemented in an environmentally appropriate way")}}]),t}(qw.EventEmitter);t.default=y});t(SA);var kA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=SA)&&r.__esModule?r:{default:r};n.default.getWebSocketConstructor=function(){return WebSocket},t.default=n.default});t(kA);var EA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=kA,e&&e.__esModule?e:{default:e}).default;var e}})});t(EA);var TA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o=m(Ls),a=m(YP),u=m(Us),s=m(Ql),c=m(TE),l=m(Yl),f=m(pC),d=m(_C),p=m(_A),h=m(cS),v=m(EA),g=m(Ym);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var b=["idle","done (forced)","pong not received","pong mismatch"],_=QC.SparkPlugin.extend((r=(0,kE.deprecated)("Mercury#listen(): Use Mercury#connect() instead"),n=(0,kE.deprecated)("Mercury#stopListening(): Use Mercury#disconnect() instead"),y(i={namespace:"Mercury",session:{connected:{default:!1,type:"boolean"},connecting:{default:!1,type:"boolean"},socket:"object",localClusterServiceUrls:"object"},derived:{listening:{deps:["connected"],fn:function(){return this.connected}}},connect:function(e){var t=this;return this.connected?(this.logger.info("mercury: already connected, will not connect again"),l.default.resolve()):(this.connecting=!0,l.default.resolve(this.spark.internal.device.registered||this.spark.internal.device.register()).then(function(){return t.logger.info("mercury: connecting"),t._connectWithBackoff(e)}))},disconnect:function(){var e=this;return new l.default(function(t){if(e.backoffCall&&(e.logger.info("mercury: aborting connection"),e.backoffCall.abort()),e.socket)return e.socket.removeAllListeners("message"),e.once("offline",t),void e.socket.close();t()})},listen:function(){return this.connect()},stopListening:function(){return this.disconnect()},processRegistrationStatusEvent:function(e){this.localClusterServiceUrls=e.localClusterServiceUrls},_applyOverrides:function(e){e.headers&&(0,c.default)(e.headers).forEach(function(t){(0,f.default)(e,t,e.headers[t])})},_prepareUrl:function(e){var t=this;return e||(e=this.spark.internal.device.webSocketUrl),this.spark.internal.feature.getFeature("developer","web-ha-messaging").then(function(r){return r?t.spark.internal.device.useServiceCatalogUrl(e):e}).then(function(t){e=t}).then(function(){return t.spark.internal.feature.getFeature("developer","web-shared-mercury")}).then(function(r){return e=g.default.parse(e,!0),(0,s.default)(e.query,{outboundWireFormat:"text",bufferStates:!0,aliasHttpStatus:!0}),r&&((0,s.default)(e.query,{mercuryRegistrationStatus:!0,isRegistrationRefreshEnabled:!0}),(0,u.default)(e.query,"bufferStates")),(0,d.default)(t,"spark.config.device.ephemeral",!1)&&(e.query.multipleConnections=!0),g.default.format(e)})},_attemptConnection:function(e,t){var r=this,n=new v.default,i=void 0;n.on("close",function(){return r._onclose.apply(r,arguments)}),n.on("message",function(){return r._onmessage.apply(r,arguments)}),n.on("sequence-mismatch",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._emit.apply(r,["sequence-mismatch"].concat(t))}),l.default.all([this._prepareUrl(e),this.spark.credentials.getUserToken()]).then(function(e){var t=(0,a.default)(e,2),o=t[0],u=t[1];return i=o,n.open(o,{forceCloseDelay:r.config.forceCloseDelay,pingInterval:r.config.pingInterval,pongTimeout:r.config.pongTimeout,token:u.toString(),trackingId:r.spark.sessionId+"_"+Date.now(),logger:r.logger})}).then(function(){return r.socket=n,r.spark.internal.metrics.submitClientMetrics("web-ha-mercury",{fields:{success:!0},tags:{action:"connected",url:i}}),t(),r.spark.internal.feature.getFeature("developer","web-ha-messaging").then(function(e){return e?r.spark.internal.device.fetchNewUrls(i):l.default.resolve()})}).catch(function(e){return 1006!==e.code&&r.backoffCall&&r.backoffCall.getNumRetries()>0&&r._emit("connection_failed",e,{retries:r.backoffCall.getNumRetries()}),r.logger.info("mercury: connection attempt failed",e),e instanceof wA.UnknownResponse?(r.logger.info("mercury: received unknown response code, refreshing device registration"),r.spark.internal.device.refresh().then(function(){return t(e)})):e instanceof wA.NotAuthorized?(r.logger.info("mercury: received authorization error, reauthorizing"),r.spark.credentials.refresh({force:!0}).then(function(){return t(e)})):e instanceof wA.BadRequest||e instanceof wA.Forbidden?(r.logger.warn("mercury: received unrecoverable response from mercury"),r.backoffCall.abort(),t(e)):e instanceof wA.ConnectionError?r.spark.internal.feature.getFeature("developer","web-ha-messaging").then(function(t){return t?(r.logger.info("mercury: received a generic connection error, will try to connect to another datacenter"),r.spark.internal.metrics.submitClientMetrics("web-ha-mercury",{fields:{success:!1},tags:{action:"failed",error:e.message,url:i}}),r.spark.internal.device.markUrlFailedAndGetNew(i)):null}).then(function(){return t(e)}):t(e)}).catch(function(e){r.logger.error("mercury: failed to handle connection failure",e),t(e)})},_connectWithBackoff:function(e){var t=this;return new l.default(function(r,n){var i=void 0;(i=h.default.call(function(r){t.logger.info("mercury: executing connection attempt "+i.getNumRetries()),t._attemptConnection(e,r)},function(e){return t.connecting=!1,t.backoffCall=void 0,e?(t.logger.info("mercury: failed to connect after "+i.getNumRetries()+" retries; log statement about next retry was inaccurate"),n(e)):(t.connected=!0,t._emit("online"),r())})).setStrategy(new h.default.ExponentialStrategy({initialDelay:t.config.backoffTimeReset,maxDelay:t.config.backoffTimeMax})),t.config.maxRetries&&i.failAfter(t.config.maxRetries),i.on("abort",function(){t.logger.info("mercury: connection aborted"),n()}),i.on("callback",function(e){if(e){var r=i.getNumRetries(),n=Math.min(i.strategy_.nextBackoffDelay_,t.config.backoffTimeMax);t.logger.info("mercury: failed to connect; attempting retry "+(r+1)+" in "+n+" ms")}else t.logger.info("mercury: connected")}),i.start(),t.backoffCall=i})},_emit:function(){try{this.trigger.apply(this,arguments)}catch(e){this.logger.error("mercury: error occurred in event handler",e)}},_getEventHandlers:function(e){var t=e.split("."),r=(0,a.default)(t,2),n=r[0],i=r[1],o=[];if(!this.spark[n]&&!this.spark.internal[n])return o;var u=(0,p.default)("process_"+i+"_event");return(this.spark[n]||this.spark.internal[n])[u]&&o.push({name:u,namespace:n}),o},_onclose:function(e){try{var t=e.reason&&e.reason.toLowerCase(),r=this.socket.url;switch(this.socket.removeAllListeners(),this.unset("socket"),this.connected=!1,this._emit("offline",e),e.code){case 1003:this.logger.info("mercury: Mercury service rejected last message; will not reconnect: "+e.reason),this._emit("offline.permanent",e);break;case 4e3:this.logger.info("mercury: socket replaced; will not reconnect"),this._emit("offline.replaced",e);break;case 1001:case 1005:case 1006:case 1011:this.logger.info("mercury: socket disconnected; reconnecting"),this._emit("offline.transient",e),this._reconnect(r);break;case 1e3:b.includes(t)?(this.logger.info("mercury: socket disconnected; reconnecting"),this._emit("offline.transient",e),this._reconnect(r)):(this.logger.info("mercury: socket disconnected; will not reconnect"),this._emit("offline.permanent",e));break;default:this.logger.info("mercury: socket disconnected unexpectedly; will not reconnect"),this._emit("offline.permanent",e)}}catch(e){this.logger.error("mercury: error occurred in close handler",e)}},_onmessage:function(e){var t=this,r=e.data,n=r.data;return this._applyOverrides(n),this._getEventHandlers(n.eventType).reduce(function(e,r){return e.then(function(){var e=r.namespace,i=r.name;return new l.default(function(r){return r((t.spark[e]||t.spark.internal[e])[i](n))}).catch(function(e){return t.logger.error("mercury: error occurred in autowired event handler for "+n.eventType,e)})})},l.default.resolve()).then(function(){t._emit("event",e.data);var i=n.eventType.split("."),o=(0,a.default)(i,1)[0];t._emit("event:"+o,r),t._emit("event:"+n.eventType,r)}).catch(function(e){t.logger.error("mercury: error occurred processing socket message",e)})},_reconnect:function(e){return this.logger.info("mercury: reconnecting"),this.connect(e)},version:"1.47.3"},"connect",[kE.oneFlight],(0,o.default)(i,"connect"),i),y(i,"disconnect",[kE.oneFlight],(0,o.default)(i,"disconnect"),i),y(i,"listen",[r],(0,o.default)(i,"listen"),i),y(i,"stopListening",[n],(0,o.default)(i,"stopListening"),i),i));t.default=_});t(TA);var PA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={mercury:{pingInterval:15e3,pongTimeout:14e3,backoffTimeMax:32e3,backoffTimeReset:1e3,forceCloseDelay:2e3}}});t(PA);var OA=function(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(n,a,r(a),e)}return n};var CA=function(e,t,r,n){return QT(e,function(e,i,o){t(n,e,r(e),o)}),n};var MA=function(e,t){return function(r,n){var i=Gd(r)?OA:CA,o=t?t():{};return i(r,e,yM(n,2),o)}},jA=MA(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),xA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(nf),n=o(Yl),i=o(jA);function o(e){return e&&e.__esModule?e:{default:e}}var a=QC.SparkPlugin.extend({namespace:"Feature",getFeature:function(e,t,r){if("developer"!==e&&"user"!==e&&"entitlement"!==e)return n.default.reject(new Error("Invalid feature keyType provided. Only `developer`, `user`, and `entitlement` feature toggles are permitted."));r=r||{};var i=this.spark.internal.device.features[e].get(t);return i?r.full?n.default.resolve(i.serialize()):n.default.resolve(i.value):n.default.resolve(null)},setFeature:function(e,t,r){var i=this;return"developer"!==e&&"user"!==e?n.default.reject(new Error("Only `developer` and `user` feature toggles can be set.")):this.request({method:"POST",api:"feature",resource:"features/users/"+this.spark.internal.device.userId+"/"+e,body:{key:t,mutable:!0,val:r}}).then(function(t){return i.spark.internal.device.features[e].add(t.body,{merge:!0})})},setBundledFeatures:function(e){var t=this;return e.forEach(function(e){e.mutable=e.mutable||"true","USER"!==e.type&&"DEV"!==e.type&&(e.type="USER")}),this.request({method:"POST",api:"feature",resource:"features/users/"+this.spark.internal.device.userId+"/toggles",body:e}).then(function(e){var r=(0,i.default)(e.body.featureToggles,{type:"USER"});t.spark.internal.device.features.user.add(r[0],{merge:!0}),t.spark.internal.device.features.developer.add(r[1],{merge:!0})})},initialize:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];(0,r.default)(QC.SparkPlugin.prototype.initialize,this,t),this.listenToAndRun(this.spark,"change:internal.device.features.developer",this.trigger.bind(this,"change:developer")),this.listenToAndRun(this.spark,"change:internal.device.features.entitlement",this.trigger.bind(this,"change:entitlement")),this.listenToAndRun(this.spark,"change:internal.device.features.user",this.trigger.bind(this,"change:user"))},version:"1.47.3"});t.default=a});t(xA);var RA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={feature:{}}});t(RA),t(r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(xA).default}});var r=i(xA),n=i(RA);function i(e){return e&&e.__esModule?e:{default:e}}(0,QC.registerInternalPlugin)("feature",r.default,{config:n.default})}));var AA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(YP),n=o(nf),i=o(Yl);function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,o(Ib).default)("metric id"),u=QC.Batcher.extend({namespace:"Metrics",prepareItem:function(e){return e.appType=e.appType||this.config.appType,e.env=e.env||"TEST",e.time=e.time||Date.now(),e.version=e.version||this.spark.version,i.default.resolve(e)},prepareRequest:function(e){return i.default.resolve(e.map(function(e){return e.postTime=e.postTime||Date.now(),e}))},submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"metrics",resource:"metrics",body:{metrics:e}})},handleHttpSuccess:function(e){var t=this;return i.default.all(e.options.body.metrics.map(function(e){return t.acceptItem(e)}))},handleHttpError:function(e){var t=this;return e instanceof QC.SparkHttpError.NetworkOrCORSError?(this.logger.warn("metrics-batcher: received network error submitting metrics, reenqueuing payload"),i.default.all(e.options.body.metrics.map(function(e){return new i.default(function(r){var n=e[a].nextDelay;n<t.config.batcherRetryPlateau&&(e[a].nextDelay*=2),(0,CE.safeSetTimeout)(function(){r(t.rerequest(e))},n)})}))):(0,n.default)(QC.Batcher.prototype.handleHttpError,this,[e])},rerequest:function(e){var t=this;return i.default.all([this.getDeferredForRequest(e),this.prepareItem(e)]).then(function(e){var n=(0,r.default)(e,2),i=n[0],o=n[1];t.enqueue(o).then(function(){return t.bounce()}).catch(function(e){return i.reject(e)})})},fingerprintRequest:function(e){return e[a]=e[a]||{nextDelay:1e3},i.default.resolve(e[a])},fingerprintResponse:function(e){return i.default.resolve(e[a])}});t.default=u});t(AA);var IA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=n(Yl);function n(e){return e&&e.__esModule?e:{default:e}}var i=n(AA).default.extend({namespace:"Metrics",prepareItem:function(e){return r.default.resolve(e)},prepareRequest:function(e){return r.default.resolve(e)},submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"metrics",resource:"clientmetrics",body:{metrics:e}})}});t.default=i});t(IA);var DA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(Yl),n=i(Ql);function i(e){return e&&e.__esModule?e:{default:e}}var o=i(AA).default.extend({namespace:"Metrics",prepareItem:function(e){return e.eventPayload.origin=(0,n.default)({buildType:"test",networkType:"unknown"},e.eventPayload.origin),r.default.resolve(e)},prepareRequest:function(e){return e.forEach(function(e){e.eventPayload.originTime.sent=(new Date).toISOString()}),r.default.resolve(e)},submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"metrics",resource:"clientmetrics",body:{metrics:e}})}});t.default=o});t(DA);var LA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i=c(Ls),o=c(Ql),a=c(AA),u=c(IA),s=c(DA);function c(e){return e&&e.__esModule?e:{default:e}}var l,f,d,p,h,v,g=QC.SparkPlugin.extend((r=(0,kE.deprecated)("Metrics#sendUnstructured() is deprecated; please use Metrics#submit()"),n={children:{batcher:a.default,clientMetricsBatcher:u.default,callDiagnosticEventsBatcher:s.default},namespace:"Metrics",sendUnstructured:function(e,t){return this.submit(e,t)},submit:function(e,t){return this.batcher.request((0,o.default)({key:e},t))},submitClientMetrics:function(e,t,r){var n={metricName:e};if(t.tags&&(n.tags=t.tags),t.fields&&(n.fields=t.fields),t.type&&(n.type=t.type),n.timestamp=Date.now(),r){var i={metrics:[n]};return this.postPreLoginMetric(i,r)}return this.clientMetricsBatcher.request(n)},aliasUser:function(e){return this.request({method:"POST",api:"metrics",resource:"clientmetrics",headers:{"x-prelogin-userid":e},body:{},qs:{alias:!0}})},postPreLoginMetric:function(e,t){var r=this;return this.spark.credentials.getClientToken().then(function(n){return r.request({method:"POST",api:"metrics",resource:"clientmetrics-prelogin",headers:{authorization:n.toString(),"x-prelogin-userid":t},body:e})})},submitCallDiagnosticEvents:function(e){var t={type:"diagnostic-event",eventPayload:e};return this.callDiagnosticEventsBatcher.request(t)},version:"1.47.3"},l=n,f="sendUnstructured",d=[r],p=(0,i.default)(n,"sendUnstructured"),h=n,v={},Object.keys(p).forEach(function(e){v[e]=p[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=d.slice().reverse().reduce(function(e,t){return t(l,f,e)||e},v),h&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(h):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(l,f,v),v=null),n));t.default=g});t(LA);var FA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={device:{preDiscoveryServices:{metricsServiceUrl:"https://metrics-a.wbx2.com/metrics/api/v1"}},metrics:{appType:kE.inBrowser?"browser":"nodejs",batcherWait:500,batcherMaxCalls:50,batcherMaxWait:1500,batcherRetryPlateau:32e3}}});t(FA);var NA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(LA).default}});var r=i(LA),n=i(FA);function i(e){return e&&e.__esModule?e:{default:e}}(0,QC.registerInternalPlugin)("metrics",r.default,{config:n.default}),t.config=n.default});t(NA);NA.config;var UA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownResponse=t.NotAuthorized=t.Forbidden=t.ConnectionError=t.BadRequest=t.config=t.Socket=t.Mercury=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(TA).default}}),Object.defineProperty(t,"Mercury",{enumerable:!0,get:function(){return i(TA).default}}),Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return i(EA).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return i(PA).default}}),Object.defineProperty(t,"BadRequest",{enumerable:!0,get:function(){return wA.BadRequest}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return wA.ConnectionError}}),Object.defineProperty(t,"Forbidden",{enumerable:!0,get:function(){return wA.Forbidden}}),Object.defineProperty(t,"NotAuthorized",{enumerable:!0,get:function(){return wA.NotAuthorized}}),Object.defineProperty(t,"UnknownResponse",{enumerable:!0,get:function(){return wA.UnknownResponse}});var r=i(TA),n=i(PA);function i(e){return e&&e.__esModule?e:{default:e}}(0,QC.registerInternalPlugin)("mercury",r.default,{config:n.default,onBeforeLogout:function(){return this.disconnect()}})});t(UA);UA.UnknownResponse,UA.NotAuthorized,UA.Forbidden,UA.ConnectionError,UA.BadRequest,UA.config,UA.Socket,UA.Mercury;var zA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DESYNC=t.LESS_THAN=t.GREATER_THAN=t.FETCH=t.EQUAL=t.USE_CURRENT=t.USE_INCOMING=t.eventKeys=void 0,Object.defineProperty(t,"eventKeys",{enumerable:!0,get:function(){return PR.locusEventKeys}}),Object.defineProperty(t,"USE_INCOMING",{enumerable:!0,get:function(){return MR.USE_INCOMING}}),Object.defineProperty(t,"USE_CURRENT",{enumerable:!0,get:function(){return MR.USE_CURRENT}}),Object.defineProperty(t,"EQUAL",{enumerable:!0,get:function(){return MR.EQUAL}}),Object.defineProperty(t,"FETCH",{enumerable:!0,get:function(){return MR.FETCH}}),Object.defineProperty(t,"GREATER_THAN",{enumerable:!0,get:function(){return MR.GREATER_THAN}}),Object.defineProperty(t,"LESS_THAN",{enumerable:!0,get:function(){return MR.LESS_THAN}}),Object.defineProperty(t,"DESYNC",{enumerable:!0,get:function(){return MR.DESYNC}});var r,n=(r=MR)&&r.__esModule?r:{default:r};(0,QC.registerInternalPlugin)("locus",n.default),t.default=n.default});t(zA);zA.DESYNC,zA.LESS_THAN,zA.GREATER_THAN,zA.FETCH,zA.EQUAL,zA.USE_CURRENT,zA.USE_INCOMING,zA.eventKeys;var qA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(JP),n=u(Wb),i=u(Yl),o=u(_C),a=u(rR);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return Boolean(e.self&&d(e.self))}function c(e,t){return s(t)&&t.self.devices.some(function(t){return e.internal.device.url===t.url&&"JOINED"===t.state})}function l(e,t,r){var n=void 0,i=void 0;return r.person.isExternal||(i=r.person.id,n=e.people.inferPersonIdFromUuid(r.person.id)),{_id:r.id,isSelf:t.self.url===r.url,isInitiator:r.isCreator||!1,personUuid:i,personId:n,state:f(r),audioMuted:v(r),videoMuted:g(r)}}function f(e){var t=e.state&&e.state.toLowerCase();switch(t){case"idle":return"notified";case"joined":return"connected";case"left":return"disconnected";default:return t}}function d(e){return e&&"JOINED"===e.state}function p(e){return h(e)[0]}function h(e){return e.participants.filter(function(t){return"USER"===t.type&&t.url!==e.self.url})}function v(e){return d(e)&&!e.status.audioStatus.includes("SEND")}function g(e){return d(e)&&!e.status.videoStatus.includes("SEND")}t.activeParticipants=function(e){return(0,a.default)(e.participants,{state:"JOINED"})},t.direction=function(e){if(!e||!e.self)return"unknown";return e.self.isCreator?"out":"in"},t.waitForMediaShare=function(e){return function(){var t=new i.default(function(t,r){!function n(){try{e.logger.info("checking for media share");var i=e.locus.mediaShares.find(function(e){return"content"===e.name});if(!i)return e.logger.info("did not find media share, waiting for next locus change"),void e.once("change:locus",n);e.logger.info("found media share"),t(i)}catch(t){e.logger.error("something unexpected happened"),e.logger.error(t),r(t)}}()});return i.default.race([t,new i.default(function(e,t){return setTimeout(t(new Error("Could not find media share after 10000ms")),1e4)})])}},t.isActive=function(e){return"ACTIVE"===e.fullState.state},t.isCall=function(e){return e&&e.fullState&&"CALL"===e.fullState.type},t.joined=s,t.joinedOnThisDevice=c,t.participantsToCallMemberships=function(e,t){var i=new n.default,a=new n.default,u=!0,s=!1,c=void 0;try{for(var f,d=(0,r.default)(t.participants);!(u=(f=d.next()).done);u=!0){var p=f.value;"USER"===p.type?i.set(p.url,p):"RESOURCE_ROOM"===p.type&&a.set(p.url,p)}}catch(e){s=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(s)throw c}}var h=[];return i.forEach(function(n){var i=l(e,t,n);if(n.devices){var u=!0,s=!1,c=void 0;try{for(var f,d=(0,r.default)(n.devices);!(u=(f=d.next()).done);u=!0){var p=f.value;if("JOINED"===p.state&&"OBSERVE"===(0,o.default)(p,"intent.type")){var m=a.get(p.url);i.audioMuted=v(m),i.videoMuted=g(m)}a.delete(p.url)}}catch(e){s=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(s)throw c}}}h.push(i)}),a.forEach(function(r){var n=l(e,t,r);h.push(n)}),h},t.participantToCallMembership=l,t.participantStateToCallMembershipState=f,t.makeInternalCallId=function(e){return e.url+"_"+e.fullState.lastActive},t.mediaDirection=function(e,t){if(!t)return"inactive";if(!t.status)return"inactive";return(t.status[e+"Status"]||"inactive").toLowerCase()},t.participantIsJoined=d,t.remoteParticipant=p,t.remoteParticipants=h,t.remoteAudioMuted=v,t.remoteVideoMuted=g,t.shouldRing=function(e){return"NONE"!==(0,o.default)(e,"self.alertType.action")},t.getState=function(e){return e&&e.fullState&&e.fullState.state.toLowerCase()},t.getStatus=function(e,t,n){if(t){var i=p(t);if(i){if(c(e,t)&&i&&d(i))return"connected";if(t.replaces){var a=!0,u=!1,s=void 0;try{for(var l,f=(0,r.default)(t.replaces);!(a=(l=f.next()).done);a=!0){var h=l.value;if(h.locusUrl===n.url&&h.lastActive===(0,o.default)(n,"fullState.lastActive"))return"replaced"}}catch(e){u=!0,s=e}finally{try{!a&&f.return&&f.return()}finally{if(u)throw s}}}var v=t.self;if("LEFT"===i.state||"LEFT"===v.state)return"disconnected";if("DECLINED"===i.state)return"disconnected";if("NOTIFIED"===i.state)return"ringing"}}return"initiated"},t.getThisDevice=function(e,t){return t&&t.self&&t.self.devices.find(function(t){return t.url===e.internal.device.url})}});t(qA);qA.activeParticipants,qA.direction,qA.waitForMediaShare,qA.isActive,qA.isCall,qA.joined,qA.joinedOnThisDevice,qA.participantsToCallMemberships,qA.participantToCallMembership,qA.participantStateToCallMembershipState,qA.makeInternalCallId,qA.mediaDirection,qA.participantIsJoined,qA.remoteParticipant,qA.remoteParticipants,qA.remoteAudioMuted,qA.remoteVideoMuted,qA.shouldRing,qA.getState,qA.getStatus,qA.getThisDevice;var BA=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e&&t)return"sendrecv";if(e&&!t)return"sendonly";if(!e&&t)return"recvonly";if(!e&&!t)return"inactive";throw new Error("If you see this error, your JavaScript engine has a major flaw")}});t(BA);var WA=Object.prototype.hasOwnProperty,VA=MA(function(e,t,r){WA.call(e,r)?++e[r]:Ad(e,r,1)});var GA=function(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:bw(t),dv(e,t<0?0:t,n)):[]};var HA=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0};var JA=function(e,t){var r=!0;return QT(e,function(e,n,i){return r=!!t(e,n,i)}),r};var YA=function(e,t,r){var n=Gd(e)?HA:JA;return r&&Lw(e,t,r)&&(t=void 0),n(e,yM(t,3))},$A=Object.prototype.hasOwnProperty,KA=MA(function(e,t,r){$A.call(e,r)?e[r].push(t):Ad(e,r,[t])}),XA=MA(function(e,t,r){Ad(e,r,t)}),ZA=Math.max;var QA=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:bw(r);return i<0&&(i=ZA(n+i,0)),O_(e,t,i)};var eI=function(e){return null!=e&&e.length?dv(e,0,-1):[]};var tI=function(e,t,r){t=uv(t,e);var n=null==(e=pv(e,t))?e:e[lv(sv(t))];return null==n?void 0:Ov(n,e,r)},rI=Gb(tI),nI=Gb(function(e,t,r){var n=-1,i="function"==typeof t,o=pp(e)?Array(e.length):[];return QT(e,function(e){o[++n]=i?Ov(t,e,r):tI(e,t,r)}),o});var iI=function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n},oI=Math.max,aI=Math.min;var uI=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=bw(r))<0?oI(n+i,0):aI(i,n-1)),t==t?iI(e,t,i):E_(e,T_,i,!0)};var sI=function(e,t){var r=-1,n=pp(e)?Array(e.length):[];return QT(e,function(e,i,o){n[++r]=t(e,i,o)}),n};var cI=function(e,t){return(Gd(e)?sf:sI)(e,yM(t,3))};var lI=function(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=t(o);if(null!=a&&(void 0===u?a==a&&!Gh(a):r(a,u)))var u=a,s=o}return s};var fI=function(e,t){return e>t};var dI=function(e){return e&&e.length?lI(e,xv,fI):void 0};var pI=function(e,t){return e<t};var hI=function(e){return e&&e.length?lI(e,xv,pI):void 0};var vI=function(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r};var gI=function(e,t,r){var n=Gd(e)?JR:vI,i=arguments.length<3;return n(e,yM(t,4),r,i,QT)};var mI=function(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r},yI=UE(!0);var bI=ZT(function(e,t){return e&&yI(e,t,hp)},!0);var _I=function(e,t,r){var n=Gd(e)?mI:vI,i=arguments.length<3;return n(e,yM(t,4),r,i,bI)};var wI=function(e,t){return(Gd(e)?kp:tR)(e,gx(yM(t,3)))},SI=Math.floor,kI=Math.random;var EI=function(e,t){return e+SI(kI()*(t-e+1))};var TI=function(e){var t=e.length;return t?e[EI(0,t-1)]:void 0};var PI=function(e){return TI(HE(e))};var OI=function(e){return(Gd(e)?TI:PI)(e)};var CI=function(e,t){var r=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++r<t;){var o=EI(r,i),a=e[o];e[o]=e[r],e[r]=a}return e.length=t,e};var MI=function(e){return CI(Sp(e))};var jI=function(e){return CI(HE(e))};var xI=function(e){return(Gd(e)?MI:jI)(e)};var RI=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e};var AI=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,o=Gh(e),a=void 0!==t,u=null===t,s=t==t,c=Gh(t);if(!u&&!c&&!o&&e>t||o&&a&&s&&!u&&!c||n&&a&&s||!r&&s||!i)return 1;if(!n&&!o&&!c&&e<t||c&&r&&i&&!n&&!o||u&&r&&i||!a&&i||!s)return-1}return 0};var II=function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,u=r.length;++n<a;){var s=AI(i[n],o[n]);if(s)return n>=u?s:s*("desc"==r[n]?-1:1)}return e.index-t.index};var DI=function(e,t,r){var n=-1;t=sf(t.length?t:[xv],tp(yM));var i=sI(e,function(e,r,i){return{criteria:sf(t,function(t){return t(e)}),index:++n,value:e}});return RI(i,function(e,t){return II(e,t,r)})},LI=Gb(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Lw(e,t[0],t[1])?t=[]:r>2&&Lw(t[0],t[1],t[2])&&(t=[t[0]]),DI(e,Tv(t,1),[])});var FI={countBy:VA,difference:CR,drop:GA,each:eP,every:YA,filter:rR,find:wM,forEach:eP,groupBy:KA,includes:YE,keyBy:XA,indexOf:QA,initial:eI,invoke:rI,invokeMap:nI,isEmpty:Wv,lastIndexOf:uI,map:cI,max:dI,min:hI,partition:jA,reduce:gI,reduceRight:_I,reject:wI,sample:OI,shuffle:xI,some:kM,sortBy:LI,tail:function(e){var t=null==e?0:e.length;return t?dv(e,1,t):[]},take:function(e,t,r){return e&&e.length?(t=r||void 0===t?1:bw(t),dv(e,0,t<0?0:t)):[]},without:XM},NI=[].slice,UI={};FI.each(["forEach","each","map","reduce","reduceRight","find","filter","reject","every","some","includes","invoke","invokeMap","max","min","take","initial","tail","drop","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","sample","partition"],function(e){FI[e]&&(UI[e]=function(){var t=NI.call(arguments);return t.unshift(this.models),FI[e].apply(FI,t)})});FI.each(["groupBy","countBy","sortBy","keyBy"],function(e){FI[e]&&(UI[e]=function(t,r){var n=Vf(t)?t:function(e){return e.get?e.get(t):e[t]};return FI[e](this.models,n,r)})}),UI.where=function(e,t){return FI.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){var r;for(var n in e)if(r=t.get?t.get(n):t[n],e[n]!==r)return!1;return!0})},UI.findWhere=function(e){return this.where(e,!0)},UI.pluck=function(e){return FI.invokeMap(this.models,"get",e)},UI.first=function(){return this.models[0]},UI.last=function(){return this.models[this.models.length-1]},UI.size=function(){return this.models.length};var zI=UI,qI=r(function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0});var n=((r=yP)&&r.__esModule?r:{default:r}).default.extend({idAttribute:"_id",props:{_id:{required:!0,type:"string"},isSelf:{default:!1,type:"boolean"},isInitiator:{default:!1,required:!0,type:"boolean"},personId:{type:"string"},personUuid:{require:!0,type:"string"},state:{required:!0,type:"string",values:["notified","connected","declined","disconnected","waiting"]},audioMuted:{default:!1,type:"boolean"},videoMuted:{default:!1,type:"boolean"}}});t.default=n});t(qI);var BI=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(cC),n=o(zI),i=o(qI);function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend(n.default,{model:i.default,mainIndex:"_id"});t.default=a});function WI(){this.head=null,this.tail=null,this.length=0}t(BI),WI.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},WI.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},WI.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},WI.prototype.clear=function(){this.head=this.tail=null,this.length=0},WI.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},WI.prototype.concat=function(e){if(0===this.length)return Ag.alloc(0);if(1===this.length)return this.head.data;for(var t=Ag.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var VI=Ag.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function GI(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!VI(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=JI;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=YI;break;default:return void(this.write=HI)}this.charBuffer=new Ag(6),this.charReceived=0,this.charLength=0}function HI(e){return e.toString(this.encoding)}function JI(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function YI(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}GI.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if((i=t.charCodeAt(n))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t},GI.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},GI.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t},XI.ReadableState=KI;var $I=km("stream");function KI(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof TD&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new WI,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new GI(e.encoding),this.encoding=e.encoding)}function XI(e){if(!(this instanceof XI))return new XI(e);this._readableState=new KI(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),qw.call(this)}function ZI(e,t,r,n,i){var o=function(e,t){var r=null;vm(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,tD(e)}(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var s;!t.decoder||i||n||(r=t.decoder.write(r),s=!t.objectMode&&0===r.length),i||(t.reading=!1),s||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&tD(e))),function(e,t){t.readingMore||(t.readingMore=!0,Wu(nD,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}mm(XI,qw),XI.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=Ag.from(e,t),t=""),ZI(this,r,e,t,!1)},XI.prototype.unshift=function(e){return ZI(this,this._readableState,e,"",!0)},XI.prototype.isPaused=function(){return!1===this._readableState.flowing},XI.prototype.setEncoding=function(e){return this._readableState.decoder=new GI(e),this._readableState.encoding=e,this};var QI=8388608;function eD(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=QI?e=QI:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function tD(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||($I("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Wu(rD,e):rD(e))}function rD(e){$I("emit readable"),e.emit("readable"),aD(e)}function nD(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&($I("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function iD(e){$I("readable nexttick read 0"),e.read(0)}function oD(e,t){t.reading||($I("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),aD(e),t.flowing&&!t.reading&&e.read(0)}function aD(e){var t=e._readableState;for($I("flow",t.flowing);t.flowing&&null!==e.read(););}function uD(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=Ag.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function sD(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Wu(cD,t,e))}function cD(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function lD(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function fD(){}function dD(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function pD(e,t){Object.defineProperty(this,"buffer",{get:_m(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof TD&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?Wu(i,n):i(n);e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,i);else{var o=yD(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||mD(e,r),n?Wu(gD,e,r,o,i):gD(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new wD(this)}function hD(e){if(!(this instanceof hD||this instanceof TD))return new hD(e);this._writableState=new pD(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),qw.call(this)}function vD(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function gD(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),_D(e,t)}function mD(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;vD(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new wD(t)}else{for(;r;){var u=r.chunk,s=r.encoding,c=r.callback;if(vD(e,t,!1,t.objectMode?1:u.length,u,s,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function yD(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function bD(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function _D(e,t){var r=yD(t);return r&&(0===t.pendingcb?(bD(e,t),t.finished=!0,e.emit("finish")):bD(e,t)),r}function wD(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}XI.prototype.read=function(e){$I("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return $I("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?sD(this):tD(this),null;if(0===(e=eD(e,t))&&t.ended)return 0===t.length&&sD(this),null;var n,i=t.needReadable;return $I("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&$I("length less than watermark",i=!0),t.ended||t.reading?$I("reading or ended",i=!1):i&&($I("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=eD(r,t))),null===(n=e>0?uD(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&sD(this)),null!==n&&this.emit("data",n),n},XI.prototype._read=function(e){this.emit("error",new Error("not implemented"))},XI.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,$I("pipe count=%d opts=%j",n.pipesCount,t);var i=!t||!1!==t.end?a:c;function o(e){$I("onunpipe"),e===r&&c()}function a(){$I("onend"),e.end()}n.endEmitted?Wu(i):r.once("end",i),e.on("unpipe",o);var u=function(e){return function(){var t=e._readableState;$I("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,aD(e))}}(r);e.on("drain",u);var s=!1;function c(){$I("cleanup"),e.removeListener("close",p),e.removeListener("finish",h),e.removeListener("drain",u),e.removeListener("error",d),e.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",c),r.removeListener("data",f),s=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||u()}var l=!1;function f(t){$I("ondata"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==lD(n.pipes,e))&&!s&&($I("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function d(t){var r;$I("onerror",t),v(),e.removeListener("error",d),0===(r="error",e.listeners(r).length)&&e.emit("error",t)}function p(){e.removeListener("finish",h),v()}function h(){$I("onfinish"),e.removeListener("close",p),v()}function v(){$I("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",h),e.emit("pipe",r),n.flowing||($I("pipe resume"),r.resume()),e},XI.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=lD(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},XI.prototype.on=function(e,t){var r=qw.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&tD(this):Wu(iD,this))}return r},XI.prototype.addListener=XI.prototype.on,XI.prototype.resume=function(){var e=this._readableState;return e.flowing||($I("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Wu(oD,e,t))}(this,e)),this},XI.prototype.pause=function(){return $I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&($I("pause"),this._readableState.flowing=!1,this.emit("pause")),this},XI.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",function(){if($I("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){($I("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i)||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){$I("wrapped _read",t),r&&(r=!1,e.resume())},n},XI._fromList=uD,hD.WritableState=pD,mm(hD,qw),pD.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},hD.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},hD.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),Ag.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=fD),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),Wu(t,r)}(this,r):function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):Ag.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),Wu(n,o),i=!1),i}(this,n,e,r)&&(n.pendingcb++,i=function(e,t,r,n,i){r=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Ag.from(t,r)),t}(t,r,n),Ag.isBuffer(r)&&(n="buffer");var o=t.objectMode?1:r.length;t.length+=o;var a=t.length<t.highWaterMark;a||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new dD(r,n,i),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else vD(e,t,!1,o,r,n,i);return a}(this,n,e,t,r)),i},hD.prototype.cork=function(){this._writableState.corked++},hD.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||mD(this,e))},hD.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},hD.prototype._write=function(e,t,r){r(new Error("not implemented"))},hD.prototype._writev=null,hD.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,_D(e,t),r&&(t.finished?Wu(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},mm(TD,XI);for(var SD=Object.keys(hD.prototype),kD=0;kD<SD.length;kD++){var ED=SD[kD];TD.prototype[ED]||(TD.prototype[ED]=hD.prototype[ED])}function TD(e){if(!(this instanceof TD))return new TD(e);XI.call(this,e),hD.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",PD)}function PD(){this.allowHalfOpen||this._writableState.ended||Wu(OD,this)}function OD(e){e.end()}function CD(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r);i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function MD(e){if(!(this instanceof MD))return new MD(e);TD.call(this,e),this._transformState=new CD(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){jD(t,e)}):jD(t)})}function jD(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function xD(e){if(!(this instanceof xD))return new xD(e);MD.call(this,e)}function RD(){qw.call(this)}mm(MD,TD),MD.prototype.push=function(e,t){return this._transformState.needTransform=!1,TD.prototype.push.call(this,e,t)},MD.prototype._transform=function(e,t,r){throw new Error("Not implemented")},MD.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},MD.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},mm(xD,MD),xD.prototype._transform=function(e,t,r){r(null,e)},mm(RD,qw),RD.Readable=XI,RD.Writable=hD,RD.Duplex=TD,RD.Transform=MD,RD.PassThrough=xD,RD.Stream=RD,RD.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",u));var o=!1;function a(){o||(o=!0,e.end())}function u(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(c(),0===qw.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",s),e.removeListener("error",s),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",s),e.on("error",s),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e};var AD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(JP),n=s(RS),i=s(by),o=s(ky),a=s(AS),u=s(IS);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).call(this,{objectMode:!0}))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"_transform",value:function(e,t,n){if(e){var i={local:null,remote:null},o={local:null,remote:null},a={local:null,remote:null},u={local:null,remote:null},s=!0,c=!1,l=void 0;try{for(var f,d=(0,r.default)(e.values());!(s=(f=d.next()).done);s=!0){var p=f.value;["outbound-rtp","outboundrtp"].includes(p.type)&&!p.isRemote&&("audio"===p.mediaType&&(a.local=p,a.remote=e.get(p.remoteId)),"video"===p.mediaType&&(u.local=p,u.remote=e.get(p.remoteId))),["inbound-rtp","inboundrtp"].includes(p.type)&&!p.isRemote&&("audio"===p.mediaType&&(i.local=p,i.remote=e.get(p.remoteId)),"video"===p.mediaType&&(o.local=p,o.remote=e.get(p.remoteId)))}}catch(e){c=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw l}}this.push({incomingAudio:i,incomingVideo:o,outgoingAudio:a,outgoingVideo:u,report:e}),n()}else n()}}]),t}(RD.Transform);t.default=c});t(AD);var ID=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(RS),n=s(by),i=s(ky),o=s(AS),a=s(IS),u=s(Vy);function s(e){return e&&e.__esModule?e:{default:e}}var c=new u.default,l=new u.default,f=new u.default,d=new u.default;var p=function(e){function t(e){(0,n.default)(this,t);var i=(0,o.default)(this,(t.__proto__||(0,r.default)(t)).call(this,{objectMode:!0}));c.has(e)||c.set(e,new qw.EventEmitter);var a=c.get(e);return f.has(i)||f.set(i,a),l.has(a)||l.set(a,e),a.once("error",function(e){i.emit("error",e)}),i}return(0,a.default)(t,e),(0,i.default)(t,[{key:"_read",value:function(){var e=this,t=f.get(this);t.once("data",function(t){e.isPaused()||e.push(t)}),d.has(t)||function e(t){var r=(0,CE.safeSetTimeout)(function(){var r=l.get(t);r.getStats().then(function(n){t.emit("data",n),"closed"!==r.signalingState&&"closed"!==r.connectionState&&e(t)}).catch(function(e){t.emit("error",e)})},1e3);d.set(t,r)}(t)}}]),t}(RD.Readable);t.default=p});t(ID);var DD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o,a,u=S(Ls),s=S(JP),c=S(nf),l=S(Ql),f=S(Yl),d=S(xw),p=S(_C),h=S(wM),v=S(Uw),g=S(RC),m=S(TR),y=S(BA),b=S(BI),_=S(AD),w=S(ID);function S(e){return e&&e.__esModule?e:{default:e}}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=TR.webrtcHelpers.boolToDirection,T=["ringing","connected","disconnected","replaced"];function P(e,t){var r="string"==typeof t?(0,Qx.parse)(t):t,n=void 0;return(n="screen"===e?r.media.find(function(e){return"video"===e.type&&e.content}):r.media.find(function(t){return t.type===e}))&&n.direction?n.direction:"inactive"}function O(e){switch(e){case"inactive":case"sendrecv":return e;case"sendonly":return"recvonly";case"recvonly":return"sendonly";default:throw new Error('direction "'+e+'" is not valid')}}var C={audio:"Audio",video:"Video"},M=QC.SparkPlugin.extend((r=(0,kE.whileInFlight)("locusJoinInFlight"),n=(0,kE.deprecated)("Please use Call#reject()"),i=(0,kE.whileInFlight)("locusLeaveInFlight"),o=(0,Gx.debounce)(),k(a={namespace:"Phone",children:{media:m.default},collections:{memberships:b.default},session:{activeParticipantsCount:{default:0,required:!0,type:"number"},remoteAudioMuted:{default:!1,required:!1,type:"boolean"},remoteVideoMuted:{default:!1,required:!1,type:"boolean"},correlationId:"string",facingMode:{type:"string",values:["user","environment"]},internalCallId:{setOnce:!0,type:"string"},locus:"object",localMediaStream:"object",locusJoinInFlight:{default:!1,type:"boolean"},locusLeaveInFlight:{default:!1,type:"boolean"},me:{type:"object"}},derived:{id:{deps:["locus"],fn:function(){return(0,p.default)(this,"locus.url")}},isActive:{deps:["locus"],fn:function(){return!(!this.locus||!(0,qA.isActive)(this.locus))}},joinedOnThisDevice:{deps:["locus"],default:!1,fn:function(){return!(!this.locus||!(0,qA.joinedOnThisDevice)(this.spark,this.locus))}},locusUrl:{deps:["locus"],fn:function(){return(0,p.default)(this,"locus.url")}},device:{deps:["locus"],fn:function(){return(0,qA.getThisDevice)(this.spark,this.locus)}},mediaConnection:{deps:["locus"],fn:function(){var e=(0,qA.getThisDevice)(this.spark,this.locus);return(0,p.default)(e,"mediaConnections[0]")}},mediaId:{deps:["locus"],fn:function(){var e=(0,qA.getThisDevice)(this.spark,this.locus);return(0,p.default)(e,"mediaConnections[0].mediaId")}},remoteMember:{deps:["memberships","locus"],fn:function(){if((0,qA.isCall)(this.locus))return this.memberships.find(function(e){return!e.isSelf})}},direction:{deps:["locus"],fn:function(){return this.locus?(0,qA.direction)(this.locus):"out"}},from:{deps:["memberships"],fn:function(){if(this.isCall)return this.memberships.find(function(e){return e.isInitiator})}},to:{deps:["memberships"],fn:function(){if(this.isCall)return this.memberships.find(function(e){return!e.isInitiator})}},state:{deps:["locus"],fn:function(){if(this.config.enableExperimentalGroupCallingSupport)return(0,qA.getState)(this.locus)}},status:{deps:["locus"],fn:function(){return(0,qA.getStatus)(this.spark,this.locus,this.previousAttributes().locus)}},host:{deps:["locus"],fn:function(){if(this.config.enableExperimentalGroupCallingSupport)return this.locus.host}},roomId:{deps:["locus"],fn:function(){if(this.config.enableExperimentalGroupCallingSupport&&this.locus.conversationUrl)return kE.base64.encode("ciscospark://us/ROOM/"+this.locus.conversationUrl.split("/").pop())}},remoteMediaStream:{deps:["media.remoteMediaStream"],fn:function(){return this.media.remoteMediaStream}},localScreenShare:{deps:["media.localScreenShare"],fn:function(){return this.media.localScreenShare}},receivingAudio:{deps:["media.receivingAudio"],fn:function(){return this.media.receivingAudio}},receivingVideo:{deps:["media.receivingVideo"],fn:function(){return this.media.receivingVideo}},sendingAudio:{deps:["media.sendingAudio"],fn:function(){return this.media.sendingAudio}},sendingVideo:{deps:["media.sendingVideo"],fn:function(){return this.media.sendingVideo}},isCall:{deps:["locus"],fn:function(){return(0,qA.isCall)(this.locus)}},supportsDtmf:{deps:["locus"],fn:function(){return(0,p.default)(this,"locus.self.enableDTMF")}}},acknowledge:function(){var e=this;return this.logger.info("call: acknowledging"),this.spark.internal.locus.alert(this.locus).then(function(t){return e.setLocus(t)}).then((0,kE.tap)(function(){return e.logger.info("call: acknowledged")}))},answer:function(e){var t=this;return this.logger.info("call: answering"),this.locus?this.joinedOnThisDevice&&this.media.pc.remoteDescription&&this.media.pc.remoteDescription.sdp?(this.logger.info("call: already joined on this device"),f.default.resolve()):this.createOrJoinLocus(this.locus,e).then((0,kE.tap)(function(){return t.logger.info("call: answered")})):(this.logger.info("call: no locus provided, answer() is a noop"),f.default.resolve())},changeReceivingMedia:function(e,t){var r=this;return new f.default(function(n){var i=(0,Qx.parse)(r.media.offerSdp),o=(0,h.default)(i.media,{type:e});o&&o.direction.includes("recv")?(r.logger.info('changeReceivingMedia: expecting to renegotiate, waiting for call to emit "change:receiving'+C[e]+'"'),r.once("change:receiving"+C[e],function(){return n()})):(r.logger.info('changeReceivingMedia: expecting to renegotiate, waiting for media to emit "answeraccepted"'),r.media.once("answeraccepted",function(){return n()}));var a=(0,y.default)(r.media["sending"+C[e]],t);console.warn("starting to setMedia "+e+" to "+a),r.media.setMedia(e,a)})},changeSendingMedia:function(e,t){var r=this;if(this.logger.info('changeSendingMedia: changing sending "'+e+'" to "'+t+'"'),["audio","video"].includes(e)){var n=this.media.senderTracks.filter(function(t){return t.kind===e}),i=(0,y.default)(t,this.media["receiving"+C[e]]);return n.length>0?this.media.setMedia(e,i).then(function(){return r.updateMuteToggles(e,t)}):new f.default(function(t){r.once("mediaNegotiationCompleted",function(){return t()}),r.media.setMedia(e,i)})}return f.default.reject(new Error('kind must be one of "audio" or "video"'))},cleanup:function(){var e=this;return new f.default(function(t){Wu(function(){e.media.stop(),e.stopListening(e.spark.internal.mercury),e.off(),t()})})},createOrJoinLocus:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.localMediaStream)this.localMediaStream=r.localMediaStream;else{r.constraints||(r.constraints={audio:!0,video:{facingMode:{ideal:this.spark.phone.defaultFacingMode}}});var n=(0,p.default)(r,"constraints.video.facingMode.ideal",(0,p.default)(r,"constraints.video.facingMode.exact"));"user"!==n&&"environment"!==n||(this.facingMode=n);var i=!r.constraints.audio&&!r.constraints.video;r.offerOptions=(0,v.default)(r.offerOptions,{offerToReceiveAudio:i||!!r.constraints.audio,offerToReceiveVideo:i||!!r.constraints.video}),r.constraints.fake&&(this.media.constraints.fake=!0),this.media.setMedia("audio",(0,y.default)(r.constraints.audio,r.offerOptions.offerToReceiveAudio),r.constraints.audio),"screen"===(0,p.default)(r,"constraints.video.mediaSource")||"application"===(0,p.default)(r,"constraints.video.mediaSource")?this.media.setMedia("screen","sendonly"):this.media.setMedia("video",(0,y.default)(r.constraints.video,r.offerOptions.offerToReceiveVideo),r.constraints.video)}return e.correlationId||(r.correlationId=g.default.v4(),this.correlationId=r.correlationId),this.correlationId||(this.correlationId=e.correlationId),this.media.bandwidthLimit={audioBandwidthLimit:this.config.audioBandwidthLimit,videoBandwidthLimit:this.config.videoBandwidthLimit},this.media.createOffer().then((0,kE.tap)(function(){return t.logger.info("created offer")})).then(function(){return t.spark.internal.locus.createOrJoin(e,(0,l.default)({localSdp:t.media.offerSdp,correlationId:t.correlationId},r))}).then((0,kE.tap)(function(){return t.logger.info("sent offer to locus")})).then((0,kE.tap)(function(){return t.logger.info("setting locus")})).then(function(e){return t.setLocus(e)}).then((0,kE.tap)(function(){return t.logger.info("successfully set locus")})).then(function(){var e=JSON.parse(t.mediaConnection.remoteSdp).sdp;return t.logger.info("accepting answer"),t.logger.info("peer state",t.media.pc&&t.media.pc.signalingState),t.media.ended?(t.logger.info("call: already ended, not accepting answer"),f.default.resolve()):t.media.acceptAnswer(e).then(function(){return t.logger.info("answer accepted")}).catch(function(e){return t.logger.error("failed to accept answer",e),f.default.reject(e)})})},decline:function(){return this.reject()},dial:function(e,t){var r=this;this.locusJoinInFlight=!0,this.logger.info("call: dialing");var n=e;if(kE.base64.validate(e)){var i=kE.base64.decode(e).split("/"),o=i[3],a=i[4];if("PEOPLE"===o&&(n=a),"ROOM"===o){if(!(0,p.default)(this,"config.enableExperimentalGroupCallingSupport"))throw new Error("Group calling is not enabled. Please enable config.phone.enableExperimentalGroupCallingSupport");n={url:this.spark.internal.device.services.conversationServiceUrl+"/conversations/"+a+"/locus"}}}return this.spark.internal.mercury.connect().then(function(){return r.createOrJoinLocus(n,t)}).then((0,kE.tap)(function(){return r.logger.info("call: dialed")})).catch(function(e){r.trigger("error",e)}).then(function(){r.locusJoinInFlight=!1}),this},getRawStatsStream:function(){return new w.default(this.media.pc)},getStatsStream:function(){return this.getRawStatsStream().pipe(new _.default)},hangup:function(){var e=this;return"in"!==this.direction||this.joinedOnThisDevice?(this.logger.info("call: hanging up"),this.media.stop(),this.locusJoinInFlight?(this.logger.info("call: locus join in flight, waiting for rest call to complete before hanging up"),this.when("change:locusJoinInFlight").then(function(){return e.hangup()})):this.locus?this.leave():this.cleanup().then(function(){return e.logger.info("call: hang up complete, call never created")})):this.reject()},initialize:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(0,c.default)(QC.SparkPlugin.prototype.initialize,this,r),this.on("change:activeParticipantsCount",function(){return e.onChangeActiveParticipantsCount.apply(e,arguments)}),this.on("change:isActive",function(){return e.onChangeIsActive.apply(e,arguments)}),this.on("change:localMediaStream",function(){return e.onChangeLocalMediaStream.apply(e,arguments)}),this.on("change:media.localMediaStream",function(){e.localMediaStream=e.media.localMediaStream}),this.on("change:remoteMember",function(){return e.onChangeRemoteMember.apply(e,arguments)}),["localMediaStream","remoteAudioMuted","remoteMediaStream","remoteVideoMuted","localScreenShare"].forEach(function(t){e.on("change:"+t,function(){return e.trigger(t+":change")})}),this.on("replaced",function(){return e.cleanup()}),this.listenTo(this.memberships,"add",function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.trigger.apply(e,["memberships:add"].concat(r))}),this.listenTo(this.memberships,"change",function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.trigger.apply(e,["membership:change"].concat(r))}),this.listenTo(this.memberships,"change:audioMuted",function(){return e.onMembershipsAudioMuted.apply(e,arguments)}),this.listenTo(this.memberships,"change:state",function(){return e.onMembershipsChangeState.apply(e,arguments)}),this.listenTo(this.memberships,"change:videoMuted",function(){return e.onMembershipsVideoMuted.apply(e,arguments)}),this.listenTo(this.memberships,"remove",function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.trigger.apply(e,["memberships:remove"].concat(r))}),this.listenTo(this.spark.internal.mercury,"event:locus",function(t){return e.onLocusEvent(t)}),this.listenTo(this.spark.internal.mercury,"event:locus.difference",function(t){return e.onLocusEvent(t)}),this.listenTo(this.media,"error",function(t){return e.trigger("error",t)}),this.listenTo(this.media,"internalTrackUpdate",function(){e.trigger("remoteMediaStream:change")}),this.listenTo(this.media,"negotiationneeded",function(){return e.onMediaNegotiationNeeded.apply(e,arguments)}),this.locus?this.internalCallId=(0,qA.makeInternalCallId)(this.locus):this.once("change:locus",function(){e.internalCallId=(0,qA.makeInternalCallId)(e.locus)}),this.memberships.listenToAndRun(this,"change:locus",function(){e.locus&&e.locus.participants&&(e.memberships.set((0,qA.participantsToCallMemberships)(e.spark,e.locus)),e.me=e.memberships.find(function(e){return e.isSelf}))}),this.config.enableExperimentalGroupCallingSupport?(this.on("inactive",function(){return e.hangup()}),this.on("inactive",function(){return e.cleanup()}),this.on("change:state",function(){Wu(function(){return e.trigger(e.state)})}),this.on=(0,d.default)(this.on,function(t,r){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if(T.includes(r))throw new Error('The "'+r+'" event is no longer valid with "enableExperimentalGroupCallingSupport===true"');return(0,c.default)(t,e,[r].concat(i))})):(this.on("disconnected",function(){return e.hangup()}),this.on("disconnected",function(){return e.cleanup()}),this.on("change:status",function(){Wu(function(){return e.trigger(e.status)})}))},leave:function(){var e=this;this.logger.info("leave: attempting to leave locus");var t=(0,p.default)(this,this.config.enableExperimentalGroupCallingSupport?"me.state":"status");return"disconnected"===t?(this.logger.info("already hung up, not calling locus again"),f.default.resolve()):"declined"===t?(this.logger.info("call was declined, not leaving again"),f.default.resolve()):"connected"!==t?(this.logger.info("call is neither connected, disconnected, or declined, declining instead of leaving"),this.decline()):(this.logger.info("leave: leaving locus"),this.spark.internal.locus.leave(this.locus).catch(function(t){return e.logger.error("leave: locus leave error: ",t.stack||t.toString()),f.default.reject(t)}).then((0,kE.tap)(function(){return e.logger.info("leave "+e.locus.id+": finished leaving via locus")})).then((0,kE.tap)(function(){return e.logger.info("leave "+e.locus.id+": setting locus")})).then(function(t){return e.setLocus(t)}).then((0,kE.tap)(function(){return e.logger.info("leave "+e.locus.id+": finished setting locus")})).then((0,kE.tap)(function(){return e.logger.info("call: hung up")})))},onLocusEvent:function(e){var t=this,r=(0,p.default)(e,"data.locus.self.devices"),n=r&&(0,h.default)(r,function(e){return e.url===t.spark.internal.device.url});if(((this.locus&&(0,qA.makeInternalCallId)(e.data.locus))===this.internalCallId||n&&this.correlationId===n.correlationId)&&(this.logger.info("locus event: "+e.data.eventType),this.setLocus(e.data.locus)),e.data.locus.replaces){var i=!0,o=!1,a=void 0;try{for(var u,c=(0,s.default)(e.data.locus.replaces);!(i=(u=c.next()).done);i=!0){var l=u.value;if(l.locusUrl+"_"+l.lastActive===this.internalCallId)return this.setLocus(e.data.locus),void this.logger.info("locus replacement event: "+e.data.eventType,this.locusUrl,"->",e.data.locus.url)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}}},onMembershipsAudioMuted:function(){this.logger.info("onMembershipsAudioMuted"),this.remoteMember&&(this.remoteAudioMuted=this.remoteMember.audioMuted)},onMembershipsVideoMuted:function(){this.logger.info("onMembershipsVideoMuted"),this.remoteMember&&(this.remoteVideoMuted=this.remoteMember.videoMuted)},onChangeRemoteMember:function(){this.remoteMember?(this.remoteAudioMuted=this.remoteMember.audioMuted,this.remoteVideoMuted=this.remoteMember.videoMuted):(this.remoteAudioMuted=void 0,this.remoteVideoMuted=void 0)},onMembershipsChangeState:function(e){this.activeParticipantsCount=this.memberships.filter(function(e){return"connected"===e.state}).length,this.trigger("membership:"+e.state,e)},onMediaNegotiationNeeded:function(){var e=this;this.logger.info("onMediaNegotiationNeeded"),this.media.createOffer().then(function(){var t=(0,Qx.parse)(e.media.offerSdp),r=P("audio",t),n=!r.includes("send"),i=P("video",t),o=!i.includes("send"),a=P("screen",t);e.logger.info("onMediaNegotiationNeeded: audioOfferDir="+r+" videoOfferDir="+i+" screenOfferDir="+a),e.logger.info("onMediaNegotiationNeeded: audioMuted="+n+" videoMuted="+o);var u={sdp:e.media.offerSdp,mediaId:e.mediaId,audioMuted:n,videoMuted:o};return e.updateMedia(u)}).then(function(){return e.pollForExpectedLocusAndSdp()}).then(function(){var t=JSON.parse(e.mediaConnection.remoteSdp).sdp;return e.media.acceptAnswer(t)}).then(function(){return e.emit("mediaNegotiationCompleted")}).catch(function(t){return e.emit("error",t)})},onChangeLocalMediaStream:function(){var e=this;this.localMediaStream&&this.localMediaStream!==this.media.localMediaStream&&(["audio","video"].forEach(function(t){var r=e.localMediaStream.getTracks().find(function(e){return e.kind===t});r?e.media.setMedia(t,(0,y.default)(r.enabled,e["receiving"+C[t]]),r):e.media.setMedia(t,(0,y.default)(!1,e["receiving"+C[t]]))}),this.localMediaStream=this.media.localMediaStream)},onChangeIsActive:function(){this.isActive||this.joinedOnThisDevice&&(this.logger.info("call: hanging up due to locus going inactive"),this.hangup())},onChangeActiveParticipantsCount:function(){if(this.joinedOnThisDevice&&1===this.activeParticipantsCount&&(!this.isCall||this.config.hangupIfLastActive.call)&&(this.isCall||this.config.hangupIfLastActive.meeting)){var e=this.previousAttributes().locus;e&&(0,qA.activeParticipants)(e).length>1&&(this.logger.info("call: hanging up due to last participant in call"),this.hangup())}},pollForExpectedLocusAndSdp:function(){var e=this;return new f.default(function(t,r){var n=(0,Qx.parse)(e.media.offerSdp),i=P("audio",n),o=P("video",n),a=P("screen",n),u=e,s=0;!function n(){s+=1;try{if(e.logger.info("iteration "+s+": checking if current locus sdp has the expected audio and video directions"),c=JSON.parse(e.mediaConnection.remoteSdp).sdp,l=(0,Qx.parse)(c),f=P("audio",l),d=P("video",l),p=P("screen",l),h=O(i),v=O(o),g=O(a),u.logger.info("audio: "+i+", "+f+", "+h),u.logger.info("video: "+o+", "+d+", "+v),u.logger.info("screen: "+a+", "+p+", "+g),f===h&&d===v&&p===g){e.logger.info("iteration "+s+": the current locus sdp has the expected audio and video directions");try{return e.logger.info("iteration "+s+": checking if current locus has the expected audio and video directions"),e.validateLocusMediaState(e.locus),e.logger.info("iteration "+s+": the current locus has the expected audio and video directions; not syncing"),void t()}catch(t){e.logger.info("iteration "+s+": the current locus does not have the expected audio and video directions; syncing")}}else e.logger.info("iteration "+s+": the current locus sdp does not have the expected audio and video directions; syncing");if(s>4)return void r(new Error("After "+s+" attempts polling locus"));setTimeout(function(){return e.spark.internal.locus.sync(e.locus).then(function(t){return e.setLocus(t)}).then(n).catch(r)},1e3*Math.pow(2,s))}catch(e){r(e)}var c,l,f,d,p,h,v,g}()})},releaseFloor:function(){var e=this;return this.logger.info("call: releasing floor grant"),f.default.resolve().then((0,qA.waitForMediaShare)(this)).then(function(t){return e.spark.internal.locus.releaseFloorGrant(e.locus,t)})},reject:function(){var e=this;return"out"===this.direction?f.default.resolve():(this.logger.info("call: rejecting"),this.spark.internal.locus.decline(this.locus).then(function(t){return e.setLocus(t)}).then((0,kE.tap)(function(){return e.cleanup()})).then((0,kE.tap)(function(){return e.logger.info("call: rejected")})))},requestFloor:function(){var e=this;return this.logger.info("call: requesting floor grant"),f.default.resolve().then((0,qA.waitForMediaShare)(this)).then(function(t){return e.spark.internal.locus.requestFloorGrant(e.locus,t)})},setLocus:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.locus;if(!n)return this.locus=e,f.default.resolve();switch(this.spark.internal.locus.compare(n,e)){case zA.USE_INCOMING:this.locus=this.spark.internal.locus.merge(this.locus,e),this.device&&(this.correlationId=this.device.correlationId);break;case zA.FETCH:return r?(this.logger.info("call: fetching locus according to sequencing algorithm"),this.spark.internal.locus.get(n).then(function(e){return t.setLocus(e,!0)})):(this.logger.info("call: syncing locus according to sequencing algorithm"),this.spark.internal.locus.sync(n).then(function(e){return t.setLocus(e,!0)}))}return f.default.resolve()},sendDtmf:function(e){return this.supportsDtmf?this.spark.internal.locus.sendDtmf(this.locus,e):f.default.reject(new Error("this call does not support dtmf"))},sendFeedback:function(e){return this.spark.internal.metrics.submit("meetup_call_user_rating",e)},startApplicationShare:function(){var e=this;return this.logger.info("call: sharing application"),new f.default(function(t){e.media.once("answeraccepted",t),e.media.setMedia("screen","sendonly",{mediaSource:"application"})}).then(function(){return e.requestFloor()})},startScreenShare:function(){var e=this;return this.logger.info("call: sharing screen"),new f.default(function(t){e.media.once("answeraccepted",t),e.media.setMedia("screen","sendonly",{mediaSource:"screen"})}).then(function(){return e.requestFloor()})},startReceivingAudio:function(){return this.changeReceivingMedia("audio",!0)},startReceivingVideo:function(){return this.changeReceivingMedia("video",!0)},startSendingAudio:function(){return this.changeSendingMedia("audio",!0)},startSendingVideo:function(){return this.changeSendingMedia("video",!0)},stopScreenShare:function(){var e=this;return this.logger.info("call: stopping screen/application share"),this.releaseFloor().then(function(){return new f.default(function(t){e.media.once("answeraccepted",t),e.media.setMedia("screen","inactive")})})},stopReceivingAudio:function(){return this.changeReceivingMedia("audio",!1)},stopReceivingVideo:function(){return this.changeReceivingMedia("video",!1)},stopSendingAudio:function(){return this.changeSendingMedia("audio",!1)},stopSendingVideo:function(){return this.changeSendingMedia("video",!1)},toggleFacingMode:function(){var e=this;if(!this.sendingVideo)throw new Error("Cannot toggle facingMode if we're not sending video");if("user"!==this.facingMode&&"environment"!==this.facingMode)throw new Error("Cannot determine current facing mode; specify a new localMediaStream to change cameras");var t={facingMode:{ideal:"user"===this.facingMode?"environment":"user"}};return this.media.setMedia("video",(0,y.default)(this.sendingAudio,this.sendingVideo),t).then(function(){e.facingMode=t.facingMode.ideal})},toggleReceivingAudio:function(){return this.receivingAudio?this.stopReceivingAudio():this.startReceivingAudio()},toggleReceivingVideo:function(){return this.receivingVideo?this.stopReceivingVideo():this.startReceivingVideo()},toggleSendingAudio:function(){return this.sendingAudio?this.stopSendingAudio():this.startSendingAudio()},toggleSendingVideo:function(){return this.sendingVideo?this.stopSendingVideo():this.startSendingVideo()},updateMedia:function(e){var t=this;if(this.logger.info("updateMedia"),e.sdp&&!e.sdp.includes("b="))throw new Error("outbound sdp should always have a 'b=' line");return this.spark.internal.locus.updateMedia(this.locus,e).then(function(e){return t.setLocus(e)})},updateVideoMuteSdp:function(e,t){var r=E(!t,this.receivingVideo),n=E(t,this.receivingVideo);return e.replace(new RegExp("a=mid:video[^a]+a="+n,"gi"),"a=mid:video\na="+r)},updateMuteToggles:function(e,t){this.logger.info("updating mute toggles: "+e+"="+t);var r={mediaId:this.mediaId,audioMuted:!this.sendingAudio,videoMuted:!this.sendingVideo};return"audio"===e?r.audioMuted=!t:"video"===e&&(r.videoMuted=!t,r.sdp=this.updateVideoMuteSdp(this.media.offerSdp,!t)),this.updateMedia(r)},validateLocusMediaState:function(e){var t=e.self.status.audioStatus.toLowerCase(),r=this.media.audioDirection;if(t!==r)throw this.logger.warn("locus: expected audio "+t+" (locus) to equal "+r+" (local media)"),new Error("locus.self.status.audioStatus indicates the received DTO is out of date");var n=e.self.status.videoStatus.toLowerCase(),i=this.media.videoDirection;if(n!==i)throw this.logger.warn("locus: expected video "+n+" (locus) to equal "+i+" (local media)"),new Error("locus.self.status.videoStatus indicates the received DTO is out of date");return e},waitForExpectedLocus:function(){var e=this;return new f.default(function(t){var r=function r(){try{e.validateLocusMediaState(e.locus),e.off("change:locus",r),t()}catch(t){e.logger.warn("locus: current locus not in expected state; waiting for next locus")}};e.on("change:locus",r),r()})},version:"1.47.3"},"acknowledge",[kE.oneFlight],(0,u.default)(a,"acknowledge"),a),k(a,"answer",[kE.oneFlight,r],(0,u.default)(a,"answer"),a),k(a,"createOrJoinLocus",[kE.oneFlight],(0,u.default)(a,"createOrJoinLocus"),a),k(a,"decline",[n],(0,u.default)(a,"decline"),a),k(a,"dial",[kE.oneFlight],(0,u.default)(a,"dial"),a),k(a,"leave",[kE.oneFlight,i],(0,u.default)(a,"leave"),a),k(a,"onMediaNegotiationNeeded",[o],(0,u.default)(a,"onMediaNegotiationNeeded"),a),k(a,"pollForExpectedLocusAndSdp",[kE.retry],(0,u.default)(a,"pollForExpectedLocusAndSdp"),a),k(a,"reject",[kE.oneFlight],(0,u.default)(a,"reject"),a),k(a,"updateMuteToggles",[kE.oneFlight],(0,u.default)(a,"updateMuteToggles"),a),a));M.make=function(e,t){return new M(e,t)},t.default=M});t(DD);var LD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(JP),n=a(nf),i=a(cC),o=a(DD);function a(e){return e&&e.__esModule?e:{default:e}}var u=i.default.extend({model:o.default,mainIndex:"internalCallId",indexes:["correlationId"],initialize:function(){for(var e=this,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];(0,n.default)(i.default.prototype.initialize,this,r),this.on("add",function(t){e.listenTo(t,"change:state",function(){t.config.enableExperimentalGroupCallingSupport?"inactive"===t.state&&e.remove(t):"disconnected"===t.status&&e.remove(t)})})},has:function(e){if(this.get(e.url+"_"+e.fullState.lastActive))return!0;if(e.replaces){var t=!0,n=!1,i=void 0;try{for(var o,a=(0,r.default)(e.replaces);!(t=(o=a.next()).done);t=!0){var u=o.value;if(this.get(u.locusUrl+"_"+u.lastActive))return!0}}catch(e){n=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw i}}}return!1}});t.default=u});t(LD);var FD=r(function(t){!function(){var r,n="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";if(_="object"==typeof rs&&"object"==typeof rs.versions&&rs.versions.node&&!1){var i=rs.versions.node.toString().replace("v","");n="Nodejs/"+i+" (NodeOS) AppleWebKit/"+i+" (KHTML, like Gecko) Nodejs/"+i+" Nodejs/"+i}r=void 0!==e?e:window,"undefined"==typeof window&&("undefined"==typeof window&&void 0!==e&&(e.navigator={userAgent:n,getUserMedia:function(){}},r.window=e),"undefined"==typeof location&&(r.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(r.screen={width:0,height:0}));var o=window.navigator;void 0!==o?(void 0!==o.webkitGetUserMedia&&(o.getUserMedia=o.webkitGetUserMedia),void 0!==o.mozGetUserMedia&&(o.getUserMedia=o.mozGetUserMedia)):o={getUserMedia:function(){},userAgent:n};var a=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(o.userAgent||""),u=!(-1===o.userAgent.indexOf("Edge")||!o.msSaveOrOpenBlob&&!o.msSaveBlob),s=!!window.opera||o.userAgent.indexOf(" OPR/")>=0,c=void 0!==window.InstallTrigger,l=/^((?!chrome|android).)*safari/i.test(o.userAgent),f=!!window.chrome&&!s,d="undefined"!=typeof document&&!!document.documentMode&&!u;function p(e,t){var r=0,n=!1,i=window.setInterval(function(){e()&&(window.clearInterval(i),t(n)),r++>50&&(window.clearInterval(i),t(n=!0))},10)}var h={Android:function(){return o.userAgent.match(/Android/i)},BlackBerry:function(){return o.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return o.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return o.userAgent.match(/Opera Mini/i)},Windows:function(){return o.userAgent.match(/IEMobile/i)},any:function(){return h.Android()||h.BlackBerry()||h.iOS()||h.Opera()||h.Windows()},getOsName:function(){var e="Unknown OS";return h.Android()&&(e="Android"),h.BlackBerry()&&(e="BlackBerry"),h.iOS()&&(e="iOS"),h.Opera()&&(e="Opera Mini"),h.Windows()&&(e="Windows"),e}};var v="Unknown OS",g="Unknown OS Version";var m,y,b=function(){for(var e,t=o.appVersion,r=o.userAgent,n="-",i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],a=0;e=i[a];a++)if(e.r.test(r)){n=e.s;break}var u="-";switch(/Windows/.test(n)&&(/Windows (.*)/.test(n)&&(u=/Windows (.*)/.exec(n)[1]),n="Windows"),n){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(r)&&(u=/Mac OS X (10[\.\_\d]+)/.exec(r)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(r)&&(u=/Android ([\.\_\d]+)/.exec(r)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(r)&&(u=(u=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))[1]+"."+u[2]+"."+(0|u[3]))}return{osName:n,osVersion:u}}();b&&b.osName&&"-"!=b.osName?(v=b.osName,g=b.osVersion):h.any()&&"Android"==(v=h.getOsName())&&(g=!!(y=(m=(m||o.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/))&&y[1]);var _="object"==typeof rs&&"object"==typeof rs.versions&&rs.versions.node;"Unknown OS"===v&&_&&(v="Nodejs",g=rs.versions.node.toString().replace("v",""));var w=!1,S=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!w&&e in document.createElement("canvas")&&(w=!0),!S&&e in document.createElement("video")&&(S=!0))});var k=[],E=[],T=[],P=[];o.mediaDevices&&o.mediaDevices.enumerateDevices&&(o.enumerateDevices=function(e){var t=o.mediaDevices.enumerateDevices();t&&t.then?o.mediaDevices.enumerateDevices().then(e).catch(function(){e([])}):e([])});var O=!1;"undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack?O=!0:o.mediaDevices&&o.mediaDevices.enumerateDevices&&(O=!0);var C=!1,M=!1,j=!1,x=!1,R=!1;var A=window.DetectRTC||{};A.browser=function(){o.appVersion;var e,t,r,n=o.userAgent,i=o.appName,a=""+parseFloat(o.appVersion),p=parseInt(o.appVersion,10);if(s){i="Opera";try{p=(a=o.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(e){a="0.0.0.0",p=0}}else d?((t=n.indexOf("rv:"))>0?a=n.substring(t+3):(t=n.indexOf("MSIE"),a=n.substring(t+5)),i="IE"):f?(t=n.indexOf("Chrome"),i="Chrome",a=n.substring(t+7)):l?(t=n.indexOf("Safari"),i="Safari",a=n.substring(t+7),-1!==(t=n.indexOf("Version"))&&(a=n.substring(t+8)),-1!==o.userAgent.indexOf("Version/")&&(a=o.userAgent.split("Version/")[1].split(" ")[0])):c?(t=n.indexOf("Firefox"),i="Firefox",a=n.substring(t+8)):(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(i=n.substring(e,t),a=n.substring(t+1),i.toLowerCase()===i.toUpperCase()&&(i=o.appName));return u&&(i="Edge",a=o.userAgent.split("Edge/")[1]),-1!==(r=a.search(/[; \)]/))&&(a=a.substring(0,r)),p=parseInt(""+a,10),isNaN(p)&&(a=""+parseFloat(o.appVersion),p=parseInt(o.appVersion,10)),{fullVersion:a,version:p,name:i,isPrivateBrowsing:!1}}(),function(e){var t;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){t=!1},function(e){t=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var r;try{(r=window.indexedDB.open("test")).onerror=function(){return!0}}catch(e){t=!0}void 0===t&&p(function(){return"done"===r.readyState},function(e){e||(t=!r.result)})}else if(function(e){var t=e.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var r=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(r&&parseInt(r[1],10)>=10)}(window.navigator.userAgent)){t=!1;try{window.indexedDB||(t=!0)}catch(e){t=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(e){t=!0}void 0===t&&(t=!1,window.localStorage.removeItem("test"))}}catch(e){t=!1}p(function(){return void 0!==t},function(r){e(t)})}(function(e){A.browser.isPrivateBrowsing=!!e}),A.browser["is"+A.browser.name]=!0,A.osName=v,A.osVersion=g;var I=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(e){I||e in window&&(I=!0)}),A.isWebRTCSupported=I,A.isORTCSupported="undefined"!=typeof RTCIceGatherer;var D=!1;(A.browser.isChrome&&A.browser.version>=35?D=!0:A.browser.isFirefox&&A.browser.version>=34?D=!0:A.browser.isEdge&&A.browser.version>=17?D=!0:"Android"===A.osName&&A.browser.isChrome&&(D=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||""))||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(A.browser.isChrome||A.browser.isEdge||A.browser.isOpera)?D=!1:A.browser.isFirefox&&(D=!1));A.isScreenCapturingSupported=D;var L={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(e){L.isSupported||e in window&&(L.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(L.isCreateMediaStreamSourceSupported=!0))}),A.isAudioContextSupported=L.isSupported,A.isCreateMediaStreamSourceSupported=L.isCreateMediaStreamSourceSupported;var F=!1;A.browser.isChrome&&A.browser.version>31&&(F=!0),A.isRtpDataChannelsSupported=F;var N=!1;A.browser.isFirefox&&A.browser.version>28?N=!0:A.browser.isChrome&&A.browser.version>25?N=!0:A.browser.isOpera&&A.browser.version>=11&&(N=!0),A.isSctpDataChannelsSupported=N,A.isMobileDevice=a;var U=!1;o.getUserMedia?U=!0:o.mediaDevices&&o.mediaDevices.getUserMedia&&(U=!0),A.browser.isChrome&&A.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(U="Requires HTTPs"),"Nodejs"===A.osName&&(U=!1),A.isGetUserMediaSupported=U;var z,q,B,W="";screen.width&&(W+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));A.displayResolution=W,A.displayAspectRatio=(z=screen.width,q=screen.height,B=function e(t,r){return 0==r?t:e(r,t%r)}(z,q),z/B/(q/B)).toFixed(2),A.isCanvasSupportsStreamCapturing=w,A.isVideoSupportsStreamCapturing=S,"Chrome"==A.browser.name&&A.browser.version>=53&&(A.isCanvasSupportsStreamCapturing||(A.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),A.isVideoSupportsStreamCapturing||(A.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),A.DetectLocalIPAddress=function(e,t){A.isWebRTCSupported&&function(e,t){if("undefined"!=typeof document&&"function"==typeof document.getElementById){var r={},n=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!n){var i=document.getElementById("iframe");if(!i)return;var o=i.contentWindow;n=o.RTCPeerConnection||o.mozRTCPeerConnection||o.webkitRTCPeerConnection}if(n){var a=null;"Chrome"===A.browser&&A.browser.version<58&&(a={optional:[{RtpDataChannels:!0}]});var u=new n({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},a);if(t&&(u.addStream?u.addStream(t):u.addTrack&&t.getTracks()[0]&&u.addTrack(t.getTracks()[0],t)),u.onicecandidate=function(e){e.candidate&&s(e.candidate.candidate)},!t)try{u.createDataChannel("sctp",{})}catch(e){}A.isPromisesSupported?u.createOffer().then(function(e){u.setLocalDescription(e).then(c)}):u.createOffer(function(e){u.setLocalDescription(e,c,function(){})},function(){})}}function s(t){var n=/([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(t);if(n){var i=n[1];void 0===r[i]&&e(i),r[i]=!0}}function c(){var e=u.localDescription.sdp.split("\n");e.forEach(function(e){0===e.indexOf("a=candidate:")&&s(e)})}}(function(t){t.match(/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/)?e("Local: "+t):e("Public: "+t)},t)},A.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,A.isWebSocketsBlocked=!A.isWebSocketsSupported,"Nodejs"===A.osName&&(A.isWebSocketsSupported=!0,A.isWebSocketsBlocked=!1),A.checkWebSocketsSupport=function(e){e=e||function(){};try{var t,r=new WebSocket("wss://echo.websocket.org:443/");r.onopen=function(){A.isWebSocketsBlocked=!1,t=(new Date).getTime(),r.send("ping")},r.onmessage=function(){A.WebsocketLatency=(new Date).getTime()-t+"ms",e(),r.close(),r=null},r.onerror=function(){A.isWebSocketsBlocked=!0,e()}}catch(t){A.isWebSocketsBlocked=!0,e()}},A.load=function(e){!function(e){if(O)if(!o.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(o.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!o.enumerateDevices&&o.enumerateDevices&&(o.enumerateDevices=o.enumerateDevices.bind(o)),o.enumerateDevices){k=[],E=[],T=[],P=[],C=!1,M=!1,j=!1,x=!1,R=!1;var t={};o.enumerateDevices(function(r){r.forEach(function(e){var r={};for(var n in e)try{"function"!=typeof e[n]&&(r[n]=e[n])}catch(e){}t[r.deviceId+r.label+r.kind]||("audio"===r.kind&&(r.kind="audioinput"),"video"===r.kind&&(r.kind="videoinput"),r.deviceId||(r.deviceId=r.id),r.id||(r.id=r.deviceId),r.label?("videoinput"!==r.kind||R||(R=!0),"audioinput"!==r.kind||x||(x=!0)):(r.isCustomLabel=!0,"videoinput"===r.kind?r.label="Camera "+(P.length+1):"audioinput"===r.kind?r.label="Microphone "+(E.length+1):"audiooutput"===r.kind?r.label="Speaker "+(T.length+1):r.label="Please invoke getUserMedia once.",void 0!==A&&A.browser.isChrome&&A.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(r.label="HTTPs is required to get label of this "+r.kind+" device.")),"audioinput"===r.kind&&(C=!0,-1===E.indexOf(r)&&E.push(r)),"audiooutput"===r.kind&&(M=!0,-1===T.indexOf(r)&&T.push(r)),"videoinput"===r.kind&&(j=!0,-1===P.indexOf(r)&&P.push(r)),k.push(r),t[r.deviceId+r.label+r.kind]=r)}),void 0!==A&&(A.MediaDevices=k,A.hasMicrophone=C,A.hasSpeakers=M,A.hasWebcam=j,A.isWebsiteHasWebcamPermissions=R,A.isWebsiteHasMicrophonePermissions=x,A.audioInputDevices=E,A.audioOutputDevices=T,A.videoInputDevices=P),e&&e()})}else e&&e();else e&&e()}(e=e||function(){})},A.MediaDevices=void 0!==k?k:[],A.hasMicrophone=C,A.hasSpeakers=M,A.hasWebcam=j,A.isWebsiteHasWebcamPermissions=R,A.isWebsiteHasMicrophonePermissions=x,A.audioInputDevices=E,A.audioOutputDevices=T,A.videoInputDevices=P;var V=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(V=!0),A.isSetSinkIdSupported=V;var G=!1;A.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(G=!0):A.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(G=!0),A.isRTPSenderReplaceTracksSupported=G;var H=!1;A.browser.isFirefox&&A.browser.version>38&&(H=!0),A.isRemoteStreamProcessingSupported=H;var J=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(J=!0),A.isApplyConstraintsSupported=J;var Y=!1;A.browser.isFirefox&&A.browser.version>=43&&(Y=!0),A.isMultiMonitorScreenCapturingSupported=Y,A.isPromisesSupported=!!("Promise"in window),A.version="1.3.6",void 0===A&&(window.DetectRTC={});var $=window.MediaStream;void 0===$&&"undefined"!=typeof webkitMediaStream&&($=webkitMediaStream),A.MediaStream=void 0!==$&&"function"==typeof $&&Object.keys($.prototype),"undefined"!=typeof MediaStreamTrack?A.MediaStreamTrack=Object.keys(MediaStreamTrack.prototype):A.MediaStreamTrack=!1;var K=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;A.RTCPeerConnection=void 0!==K&&Object.keys(K.prototype),window.DetectRTC=A,t.exports=A}()}),ND=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.events=void 0;var r=l(nf),n=l(YP),i=l(Yl),o=l(_C),a=l(Uw),u=l(TR),s=l(DD),c=l(LD);function l(e){return e&&e.__esModule?e:{default:e}}var f=t.events={CALL_CREATED:"call:created",CALL_INCOMING:"call:incoming"},d=QC.SparkPlugin.extend({collections:{emittedCalls:c.default},session:{connected:{default:!1,type:"boolean"},defaultFacingMode:{default:"user",type:"string",values:["user","environment"]},registered:{default:!1,type:"boolean"}},namespace:"phone",isCallingSupported:function(){return new i.default(function(e){e(FD.isWebRTCSupported)})},register:function(){var e=this;return this.spark.internal.device.refresh().then(function(){return e.connected?i.default.resolve():i.default.all([e.emittedCalls.reset(),e.spark.internal.mercury.when("event:mercury.buffer_state").then(function(t){return"UNKNOWN"===(0,n.default)(t,1)[0].data.bufferState.locus?e.listActiveCalls():i.default.resolve()}),e.spark.internal.mercury.connect()])})},deregister:function(){var e=this;return this.spark.internal.mercury.disconnect().then(function(){return e.spark.internal.device.unregister()})},createLocalMediaStream:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.constraints||e;return(0,a.default)(t,{audio:!0,video:!0}),u.default.getUserMedia(t)},listActiveCalls:function(){var e=this;return this.spark.internal.locus.list().then(function(t){var r=e.emittedCalls.map(function(e){return e});return t?(t.forEach(function(t){if(!e.emittedCalls.has(t)){var n=s.default.make({locus:t,parent:e.spark});r.push(n),e.emittedCalls.add(n),e._triggerCallEvents(n,t)}}),r):r})},initialize:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];(0,r.default)(QC.SparkPlugin.prototype.initialize,this,n),this.listenTo(this.spark.internal.mercury,"event:locus",function(t){return e.onLocusEvent(t)}),this.listenTo(this.spark.internal.mercury,"change:connected",function(){e.connected=e.spark.internal.mercury.connected,e.registered=!!e.spark.internal.device.url&&e.connected}),this.listenTo(this.spark.internal.device,"change:url",function(){e.registered=!!e.spark.internal.device.url&&e.connected})},onLocusEvent:function(e){var t=e.data.locus;if(!this.emittedCalls.has(t)&&"inactive"!==t.fullState.state.toLowerCase()){var r=s.default.make({locus:t},{parent:this.spark});this.emittedCalls.add(r),this._triggerCallEvents(r,e.data.locus)}},dial:function(e,t){var r=s.default.make({},{parent:this.spark});return r.dial(e,t),this.emittedCalls.add(r),r},_triggerCallEvents:function(e,t){this.trigger(f.CALL_CREATED,e),(0,qA.shouldRing)(t)&&((0,qA.isCall)(t)||!(0,qA.isCall)(t)&&(0,o.default)(this,"config.enableExperimentalGroupCallingSupport"))&&this.trigger(f.CALL_INCOMING,e)},version:"1.47.3"});t.default=d});t(ND);ND.events;var UD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=Yl)&&r.__esModule?r:{default:r};var i=QC.Batcher.extend({namespace:"People",handleHttpSuccess:function(e){var t=this;return n.default.all(e.body.items.map(function(e){return t.handleItemSuccess(e.id,e)}))},handleItemFailure:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.reject(t)})},handleItemSuccess:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.resolve(t)})},fingerprintRequest:function(e){var t=this.spark.people.inferPersonIdFromUuid(e);return n.default.resolve(t)},fingerprintResponse:function(e){return n.default.resolve(e)},prepareRequest:function(e){return n.default.resolve(e.join())},submitHttpRequest:function(e){return this.spark.request({service:"hydra",resource:"people/?id="+e+"&showAllTypes="+this.config.showAllTypes})}});t.default=i});t(UD);var zD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(Ls),i=a(Yl),o=a(UD);function a(e){return e&&e.__esModule?e:{default:e}}var u,s,c,l,f,d,p=QC.SparkPlugin.extend((r={namespace:"People",children:{batcher:o.default},get:function(e){if(!e)return i.default.reject(new Error("A person with an id is required"));if("me"===e)return this._getMe();var t=e.personId||e.id||e;return this.batcher.request(t)},list:function(e){var t=this;if(Array.isArray(e)){var r=e;return i.default.all(r.map(function(e){return t.batcher.request(e)}))}return this.request({service:"hydra",resource:"people",qs:e}).then(function(e){return new QC.Page(e,t.spark)})},inferPersonIdFromUuid:function(e){try{if(kE.base64.decode(e).includes("ciscospark://"))return e}catch(e){}return kE.base64.encode("ciscospark://us/PEOPLE/"+e)},_getMe:function(){return this.spark.request({service:"hydra",resource:"people/me"}).then(function(e){return e.body})},version:"1.47.3"},u=r,s="_getMe",c=[kE.oneFlight],l=(0,n.default)(r,"_getMe"),f=r,d={},Object.keys(l).forEach(function(e){d[e]=l[e]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=c.slice().reverse().reduce(function(e,t){return t(u,s,e)||e},d),f&&void 0!==d.initializer&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),void 0===d.initializer&&(Object.defineProperty(u,s,d),d=null),r));t.default=p});t(zD);var qD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={people:{batcherWait:100,batcherMaxCalls:10,batcherMaxWait:1500,showAllTypes:!1}}});t(qD),t(r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(zD).default}});var r=i(zD),n=i(qD);function i(e){return e&&e.__esModule?e:{default:e}}(0,QC.registerPlugin)("people",r.default,{config:n.default})}));var BD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={phone:{audioBandwidthLimit:64e3,videoBandwidthLimit:1e6,enableExperimentalGroupCallingSupport:!1,hangupIfLastActive:{call:!0,meeting:!1}}}});t(BD);var WD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StatsStream=t.StatsFilter=t.remoteParticipant=t.boolToStatus=t.Call=t.phoneEvents=void 0,Object.defineProperty(t,"phoneEvents",{enumerable:!0,get:function(){return ND.events}}),Object.defineProperty(t,"Call",{enumerable:!0,get:function(){return i(DD).default}}),Object.defineProperty(t,"boolToStatus",{enumerable:!0,get:function(){return i(BA).default}}),Object.defineProperty(t,"remoteParticipant",{enumerable:!0,get:function(){return qA.remoteParticipant}}),Object.defineProperty(t,"StatsFilter",{enumerable:!0,get:function(){return i(AD).default}}),Object.defineProperty(t,"StatsStream",{enumerable:!0,get:function(){return i(ID).default}});var r=i(ND),n=i(BD);function i(e){return e&&e.__esModule?e:{default:e}}t.default=r.default,(0,QC.registerPlugin)("phone",r.default,{config:n.default})});t(WD);WD.StatsStream,WD.StatsFilter,WD.remoteParticipant,WD.boolToStatus,WD.Call,WD.phoneEvents;var VD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(bP),n=o(Us),i=o(Gd);function o(e){return e&&e.__esModule?e:{default:e}}var a=QC.SparkPlugin.extend({create:function(e){var t="body";e.file&&(this.logger.warn("Supplying a single `file` property is deprecated; please supply a `files` array"),e.files=[e.file],(0,n.default)(e,"file")),(0,i.default)(e.files)&&e.files.reduce(function(e,t){return e||"string"!=typeof t},!1)&&(t="formData");var o=(0,r.default)({method:"POST",service:"hydra",resource:"messages"},t,e);return this.request(o).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"messages/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"messages",qs:e}).then(function(e){return new QC.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"messages/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},version:"1.47.3"});t.default=a});t(VD),t(r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=VD)&&r.__esModule?r:{default:r};(0,QC.registerPlugin)("messages",n.default),t.default=n.default}));var GD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=QC.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"memberships",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"memberships/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"memberships",qs:e}).then(function(e){return new QC.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"memberships/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id||e;return this.request({method:"PUT",service:"hydra",resource:"memberships/"+t,body:e}).then(function(e){return e.body})},version:"1.47.3"});t.default=r});t(GD),t(r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=GD)&&r.__esModule?r:{default:r};(0,QC.registerPlugin)("memberships",n.default),t.default=n.default}));var HD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=QC.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"rooms",body:e}).then(function(e){return e.body})},get:function(e,t){var r=e.id||e;return this.request({service:"hydra",resource:"rooms/"+r,qs:t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"rooms/",qs:e}).then(function(e){return new QC.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"rooms/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"rooms/"+t,body:e}).then(function(e){return e.body})},version:"1.47.3"});t.default=r});t(HD),t(r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=HD)&&r.__esModule?r:{default:r};(0,QC.registerPlugin)("rooms",n.default),t.default=n.default}));var JD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=QC.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"teams",body:e}).then(function(e){return e.body})},get:function(e,t){var r=e.id||e;return this.request({service:"hydra",resource:"teams/"+r,qs:t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"teams/",qs:e}).then(function(e){return new QC.Page(e,t.spark)})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"teams/"+t,body:e}).then(function(e){return e.body})},version:"1.47.3"});t.default=r});t(JD),t(r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=JD)&&r.__esModule?r:{default:r};(0,QC.registerPlugin)("teams",n.default),t.default=n.default}));var YD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=QC.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"team/memberships",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"team/memberships/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"team/memberships",qs:e}).then(function(e){return new QC.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"team/memberships/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id||e;return this.request({method:"PUT",service:"hydra",resource:"team/memberships/"+t,body:e}).then(function(e){return e.body})},version:"1.47.3"});t.default=r});t(YD),t(r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=YD)&&r.__esModule?r:{default:r};(0,QC.registerPlugin)("teamMemberships",n.default),t.default=n.default}));var $D=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=QC.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"webhooks",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"webhooks/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"webhooks/",qs:e}).then(function(e){return new QC.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"webhooks/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"webhooks/"+t,body:e}).then(function(e){return e.body})},version:"1.47.3"});t.default=r});t($D),t(r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=$D)&&r.__esModule?r:{default:r};(0,QC.registerPlugin)("webhooks",n.default),t.default=n.default}));var KD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(Us),n=s(Yl),i=s(uf),o=s(by),a=s(ky),u=s(Vy);function s(e){return e&&e.__esModule?e:{default:e}}var c=new u.default,l=new u.default,f=function(){function e(t){(0,o.default)(this,e),this.Bound=function(){function e(t,r){(0,o.default)(this,e),c.set(this,t),l.set(this,r.logger)}return(0,a.default)(e,[{key:"_getRawData",value:function(){var e=localStorage.getItem(t);return e?JSON.parse(e):{}}},{key:"_load",value:function(){return this._getRawData()[c.get(this)]||{}}},{key:"_save",value:function(e){var r=this._getRawData();r[c.get(this)]=e,localStorage.setItem(t,(0,i.default)(r))}},{key:"clear",value:function(){return l.get(this).info("local-storage-store-adapter: clearing localStorage"),n.default.resolve(localStorage.removeItem(t))}},{key:"del",value:function(e){var t=this;return new n.default(function(n){l.get(t).info("local-storage-store-adapter: deleting `"+e+"`");var i=t._load();(0,r.default)(i,e),t._save(i),n()})}},{key:"get",value:function(e){var t=this;return new n.default(function(r,n){l.get(t).info("local-storage-store-adapter: reading `"+e+"`");var i=t._load()[e];return void 0!==i?r(i):n(new QC.NotFoundError("No value found for "+e))})}},{key:"put",value:function(e,t){var r=this;return new n.default(function(n){l.get(r).info("local-storage-store-adapter: writing `"+e+"`");var i=r._load();i[e]=t,r._save(i),n()})}}]),e}()}return(0,a.default)(e,[{key:"bind",value:function(e,t){return t=t||{},e?t.logger?(t.logger.info("local-storage-store-adapter: returning binding"),n.default.resolve(new this.Bound(e,t))):n.default.reject(new Error("`options.logger` is required")):n.default.reject(new Error("`namespace` is required"))}}]),e}();t.default=f});t(KD);var XD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=KD)&&r.__esModule?r:{default:r};t.default={boundedAdapter:new n.default("ciscospark"),unboundedAdapter:QC.MemoryStoreAdapter}});t(XD);var ZD=r(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=XD)&&r.__esModule?r:{default:r};t.default={hydraServiceUrl:rs.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1",credentials:{clientType:"confidential"},device:{ephemeral:!0},storage:n.default}});t(ZD);var QD=QC.default.extend({ciscospark:!0,version:"1.47.4"});QD.version="1.47.4",QD.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.config=bC({},ZD,e.config),new QD(e)};var eL=QD;e._babelPolyfill;var tL=eL;return window.ciscospark=tL}();
